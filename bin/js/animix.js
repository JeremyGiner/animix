// Generated by Haxe 4.1.4
(function ($global) { "use strict";
var $hxClasses = {},$estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = $hxEnums || {},$_;
function $extend(from, fields) {
	var proto = Object.create(from);
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var EReg = function(r,opt) {
	this.r = new RegExp(r,opt.split("u").join(""));
};
$hxClasses["EReg"] = EReg;
EReg.__name__ = "EReg";
EReg.prototype = {
	match: function(s) {
		if(this.r.global) {
			this.r.lastIndex = 0;
		}
		this.r.m = this.r.exec(s);
		this.r.s = s;
		return this.r.m != null;
	}
	,matched: function(n) {
		if(this.r.m != null && n >= 0 && n < this.r.m.length) {
			return this.r.m[n];
		} else {
			throw haxe_Exception.thrown("EReg::matched");
		}
	}
	,matchedRight: function() {
		if(this.r.m == null) {
			throw haxe_Exception.thrown("No string matched");
		}
		var sz = this.r.m.index + this.r.m[0].length;
		return HxOverrides.substr(this.r.s,sz,this.r.s.length - sz);
	}
	,matchedPos: function() {
		if(this.r.m == null) {
			throw haxe_Exception.thrown("No string matched");
		}
		return { pos : this.r.m.index, len : this.r.m[0].length};
	}
	,__class__: EReg
};
var HxOverrides = function() { };
$hxClasses["HxOverrides"] = HxOverrides;
HxOverrides.__name__ = "HxOverrides";
HxOverrides.strDate = function(s) {
	switch(s.length) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d["setTime"](0);
		d["setUTCHours"](k[0]);
		d["setUTCMinutes"](k[1]);
		d["setUTCSeconds"](k[2]);
		return d;
	case 10:
		var k = s.split("-");
		return new Date(k[0],k[1] - 1,k[2],0,0,0);
	case 19:
		var k = s.split(" ");
		var y = k[0].split("-");
		var t = k[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw haxe_Exception.thrown("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.remove = function(a,obj) {
	var i = a.indexOf(obj);
	if(i == -1) {
		return false;
	}
	a.splice(i,1);
	return true;
};
HxOverrides.now = function() {
	return Date.now();
};
Math.__name__ = "Math";
var Reflect = function() { };
$hxClasses["Reflect"] = Reflect;
Reflect.__name__ = "Reflect";
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( _g ) {
		return null;
	}
};
Reflect.getProperty = function(o,field) {
	var tmp;
	if(o == null) {
		return null;
	} else {
		var tmp1;
		if(o.__properties__) {
			tmp = o.__properties__["get_" + field];
			tmp1 = tmp;
		} else {
			tmp1 = false;
		}
		if(tmp1) {
			return o[tmp]();
		} else {
			return o[field];
		}
	}
};
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) {
			a.push(f);
		}
		}
	}
	return a;
};
Reflect.isFunction = function(f) {
	if(typeof(f) == "function") {
		return !(f.__name__ || f.__ename__);
	} else {
		return false;
	}
};
Reflect.compare = function(a,b) {
	if(a == b) {
		return 0;
	} else if(a > b) {
		return 1;
	} else {
		return -1;
	}
};
Reflect.deleteField = function(o,field) {
	if(!Object.prototype.hasOwnProperty.call(o,field)) {
		return false;
	}
	delete(o[field]);
	return true;
};
var Std = function() { };
$hxClasses["Std"] = Std;
Std.__name__ = "Std";
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	if(x != null) {
		var _g = 0;
		var _g1 = x.length;
		while(_g < _g1) {
			var i = _g++;
			var c = x.charCodeAt(i);
			if(c <= 8 || c >= 14 && c != 32 && c != 45) {
				var nc = x.charCodeAt(i + 1);
				var v = parseInt(x,nc == 120 || nc == 88 ? 16 : 10);
				if(isNaN(v)) {
					return null;
				} else {
					return v;
				}
			}
		}
	}
	return null;
};
var StringBuf = function() {
	this.b = "";
};
$hxClasses["StringBuf"] = StringBuf;
StringBuf.__name__ = "StringBuf";
StringBuf.prototype = {
	__class__: StringBuf
};
var StringTools = function() { };
$hxClasses["StringTools"] = StringTools;
StringTools.__name__ = "StringTools";
StringTools.replace = function(s,sub,by) {
	return s.split(sub).join(by);
};
var ValueType = $hxEnums["ValueType"] = { __ename__ : "ValueType", __constructs__ : ["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]
	,TNull: {_hx_index:0,__enum__:"ValueType",toString:$estr}
	,TInt: {_hx_index:1,__enum__:"ValueType",toString:$estr}
	,TFloat: {_hx_index:2,__enum__:"ValueType",toString:$estr}
	,TBool: {_hx_index:3,__enum__:"ValueType",toString:$estr}
	,TObject: {_hx_index:4,__enum__:"ValueType",toString:$estr}
	,TFunction: {_hx_index:5,__enum__:"ValueType",toString:$estr}
	,TClass: ($_=function(c) { return {_hx_index:6,c:c,__enum__:"ValueType",toString:$estr}; },$_.__params__ = ["c"],$_)
	,TEnum: ($_=function(e) { return {_hx_index:7,e:e,__enum__:"ValueType",toString:$estr}; },$_.__params__ = ["e"],$_)
	,TUnknown: {_hx_index:8,__enum__:"ValueType",toString:$estr}
};
var Type = function() { };
$hxClasses["Type"] = Type;
Type.__name__ = "Type";
Type.createInstance = function(cl,args) {
	var ctor = Function.prototype.bind.apply(cl,[null].concat(args));
	return new (ctor);
};
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) {
		throw haxe_Exception.thrown("No such constructor " + constr);
	}
	if(Reflect.isFunction(f)) {
		if(params == null) {
			throw haxe_Exception.thrown("Constructor " + constr + " need parameters");
		}
		return f.apply(e,params);
	}
	if(params != null && params.length != 0) {
		throw haxe_Exception.thrown("Constructor " + constr + " does not need parameters");
	}
	return f;
};
Type.typeof = function(v) {
	switch(typeof(v)) {
	case "boolean":
		return ValueType.TBool;
	case "function":
		if(v.__name__ || v.__ename__) {
			return ValueType.TObject;
		}
		return ValueType.TFunction;
	case "number":
		if(Math.ceil(v) == v % 2147483648.0) {
			return ValueType.TInt;
		}
		return ValueType.TFloat;
	case "object":
		if(v == null) {
			return ValueType.TNull;
		}
		var e = v.__enum__;
		if(e != null) {
			return ValueType.TEnum($hxEnums[e]);
		}
		var c = js_Boot.getClass(v);
		if(c != null) {
			return ValueType.TClass(c);
		}
		return ValueType.TObject;
	case "string":
		return ValueType.TClass(String);
	case "undefined":
		return ValueType.TNull;
	default:
		return ValueType.TUnknown;
	}
};
Type.enumParameters = function(e) {
	var enm = $hxEnums[e.__enum__];
	var ctorName = enm.__constructs__[e._hx_index];
	var params = enm[ctorName].__params__;
	if(params != null) {
		var _g = [];
		var _g1 = 0;
		while(_g1 < params.length) {
			var p = params[_g1];
			++_g1;
			_g.push(e[p]);
		}
		return _g;
	} else {
		return [];
	}
};
var mon_$calc_core_IAction = function() { };
$hxClasses["mon_calc.core.IAction"] = mon_$calc_core_IAction;
mon_$calc_core_IAction.__name__ = "mon_calc.core.IAction";
mon_$calc_core_IAction.__isInterface__ = true;
mon_$calc_core_IAction.prototype = {
	__class__: mon_$calc_core_IAction
};
var animix_action_IAction = function() { };
$hxClasses["animix.action.IAction"] = animix_action_IAction;
animix_action_IAction.__name__ = "animix.action.IAction";
animix_action_IAction.__isInterface__ = true;
animix_action_IAction.__interfaces__ = [mon_$calc_core_IAction];
var animix_action_AniMoveAction = function(bSide,iMoveId) {
	this._bSide = bSide;
	this._iMoveId = iMoveId;
};
$hxClasses["animix.action.AniMoveAction"] = animix_action_AniMoveAction;
animix_action_AniMoveAction.__name__ = "animix.action.AniMoveAction";
animix_action_AniMoveAction.__interfaces__ = [animix_action_IAction];
animix_action_AniMoveAction.prototype = {
	getSide: function() {
		return this._bSide;
	}
	,getMove: function(oBattle) {
		var oAni = oBattle.getCurrentMon(this._bSide);
		if(this._iMoveId == null) {
			return oAni.getType().getDefaultMove();
		}
		return oAni.getMove(this._iMoveId);
	}
	,validate: function(oBattle) {
		return true;
	}
	,process: function(oGame) {
	}
	,__class__: animix_action_AniMoveAction
};
var animix_action_AniSwitchAction = function(bSide,iMonIndex) {
	this._bSide = bSide;
	this._iBattlerIndex = iMonIndex;
};
$hxClasses["animix.action.AniSwitchAction"] = animix_action_AniSwitchAction;
animix_action_AniSwitchAction.__name__ = "animix.action.AniSwitchAction";
animix_action_AniSwitchAction.__interfaces__ = [animix_action_IAction];
animix_action_AniSwitchAction.prototype = {
	getSide: function() {
		return this._bSide;
	}
	,getMonIndex: function() {
		return this._iBattlerIndex;
	}
	,getAni: function(oBattle) {
		return oBattle.getTeam(this._bSide).getFighter(this._iBattlerIndex);
	}
	,validate: function(oBattle) {
		var oAni = this.getAni(oBattle);
		if(oAni == null || oAni.getHealth() <= 0) {
			return false;
		}
		return true;
	}
	,process: function(oBattle) {
		throw haxe_Exception.thrown("!!!");
	}
	,__class__: animix_action_AniSwitchAction
};
var animix_aspect_Damage = function(iPower,eType,eCategory,aFlag) {
	this._eType = eType;
	this._eCategory = eCategory;
	this._iPower = iPower;
};
$hxClasses["animix.aspect.Damage"] = animix_aspect_Damage;
animix_aspect_Damage.__name__ = "animix.aspect.Damage";
animix_aspect_Damage.prototype = {
	getHitType: function() {
		return this._eType;
	}
	,getCategory: function() {
		return this._eCategory;
	}
	,getDamageCategory: function() {
		return this._eCategory;
	}
	,getPower: function() {
		return this._iPower;
	}
	,process: function(oContext,oEvent) {
		if(oEvent.defender == null) {
			throw haxe_Exception.thrown("!!!");
		}
		var oCalcContext = oContext.process.trigger(animix_core_aspect_OnDamageCalc,this._createCalcContext(oContext,oEvent.side_att,oEvent.attacker,oEvent.defender));
		if(oCalcContext.factor == null) {
			return;
		}
		var oDamageContext = oContext.process.trigger(animix_core_aspect_OnDamage,{ source : oEvent.attacker, target : oEvent.defender, source_effect : this, damage : this._calcDamage(oContext,oCalcContext), prevent_default : false});
		if(oDamageContext.damage == 0) {
			return;
		}
		if(oDamageContext.prevent_default) {
			return;
		}
		oDamageContext.target.damage(oDamageContext.damage);
	}
	,damage: function(oContext) {
	}
	,_createCalcContext: function(oContext,bSide,oSource,oTarget) {
		var fFactor = 1.0;
		if(this._eType != null) {
			fFactor *= this.getAffinityFactor(oTarget.geElement0(),this._eType);
			if(oTarget.getElement1() != null) {
				fFactor *= this.getAffinityFactor(oTarget.geElement0(),this._eType);
			}
		}
		var mStatAtt = oSource.getStatEffectiveMap();
		var mStatDef = oTarget.getStatEffectiveMap();
		return { type : mon_$calc_ds_EEventType.OnDamageCalc, crit_chance : 0.0625, factor : fFactor, power : this.getPower(), damage : this, att_mon : oSource, att_stat : this._eCategory == 0 ? mStatAtt.get(2) : mStatAtt.get(4), def_mon : oTarget, def_stat : this._eCategory == 0 ? mStatDef.get(5) : mStatDef.get(7), att_side : bSide};
	}
	,_calcDamage: function(oContext,oEvent) {
		var fStabFactor = this.getStabFactor(oEvent.att_mon);
		var fCriticFactor = oContext.process.getChance(oEvent.crit_chance) ? 1.5 : 1;
		var fTargetFactor = 1;
		var iLevel = 50;
		var fBaseDamage = Math.floor((mon_$calc_tool_IntTool.div(iLevel * 2,5) + 2) * oEvent.power * (oEvent.att_stat / oEvent.def_stat) / 50) + 2;
		return Math.floor(fBaseDamage * fTargetFactor * fStabFactor * fCriticFactor * oEvent.factor);
	}
	,getStabFactor: function(oAttacker) {
		if(!oAttacker.hasElement(this._eType)) {
			return 1;
		}
		return 1.5;
	}
	,getAffinityFactor: function(eElementAtt,eElementDef) {
		if(eElementAtt == eElementDef) {
			return 0;
		}
		switch(eElementAtt) {
		case 1:
			switch(eElementDef) {
			case 2:
				return 1.5;
			case 5:
				return 0.5;
			default:
			}
			break;
		case 2:
			switch(eElementDef) {
			case 1:
				return 0.5;
			case 3:
				return 1.5;
			default:
			}
			break;
		case 3:
			switch(eElementDef) {
			case 2:
				return 0.5;
			case 4:
				return 1.5;
			default:
			}
			break;
		case 4:
			switch(eElementDef) {
			case 3:
				return 0.5;
			case 5:
				return 1.5;
			default:
			}
			break;
		case 5:
			switch(eElementDef) {
			case 1:
				return 1.5;
			case 4:
				return 0.5;
			default:
			}
			break;
		default:
		}
		return 1.0;
	}
	,__class__: animix_aspect_Damage
};
var mon_$calc_core_aspect_IAspect = function() { };
$hxClasses["mon_calc.core.aspect.IAspect"] = mon_$calc_core_aspect_IAspect;
mon_$calc_core_aspect_IAspect.__name__ = "mon_calc.core.aspect.IAspect";
mon_$calc_core_aspect_IAspect.__isInterface__ = true;
var mon_$calc_core_aspect_AAspect = function(aFlag) {
	this._aFlag = aFlag;
};
$hxClasses["mon_calc.core.aspect.AAspect"] = mon_$calc_core_aspect_AAspect;
mon_$calc_core_aspect_AAspect.__name__ = "mon_calc.core.aspect.AAspect";
mon_$calc_core_aspect_AAspect.__interfaces__ = [mon_$calc_core_aspect_IAspect];
mon_$calc_core_aspect_AAspect.prototype = {
	hasFlag: function(e) {
		return this._aFlag.indexOf(e) != -1;
	}
	,__class__: mon_$calc_core_aspect_AAspect
};
var mon_$calc_core_effect_IEffect = function() { };
$hxClasses["mon_calc.core.effect.IEffect"] = mon_$calc_core_effect_IEffect;
mon_$calc_core_effect_IEffect.__name__ = "mon_calc.core.effect.IEffect";
mon_$calc_core_effect_IEffect.__isInterface__ = true;
mon_$calc_core_effect_IEffect.prototype = {
	__class__: mon_$calc_core_effect_IEffect
};
var animix_core_aspect_OnMove = function() { };
$hxClasses["animix.core.aspect.OnMove"] = animix_core_aspect_OnMove;
animix_core_aspect_OnMove.__name__ = "animix.core.aspect.OnMove";
animix_core_aspect_OnMove.__isInterface__ = true;
animix_core_aspect_OnMove.__interfaces__ = [mon_$calc_core_effect_IEffect];
animix_core_aspect_OnMove.prototype = {
	__class__: animix_core_aspect_OnMove
};
var animix_aspect_MoveAspectApplier = function(oAspectFactory) {
	this._oAspectFactory = oAspectFactory;
	mon_$calc_core_aspect_AAspect.call(this,[]);
};
$hxClasses["animix.aspect.MoveAspectApplier"] = animix_aspect_MoveAspectApplier;
animix_aspect_MoveAspectApplier.__name__ = "animix.aspect.MoveAspectApplier";
animix_aspect_MoveAspectApplier.__interfaces__ = [animix_core_aspect_OnMove];
animix_aspect_MoveAspectApplier.__super__ = mon_$calc_core_aspect_AAspect;
animix_aspect_MoveAspectApplier.prototype = $extend(mon_$calc_core_aspect_AAspect.prototype,{
	getPriority: function() {
		return "";
	}
	,getFlagAr: function() {
		return this._aFlag;
	}
	,notify: function(oContext,oEvent) {
		oContext.process.addAspect(oEvent.defender,this._oAspectFactory.create());
	}
	,__class__: animix_aspect_MoveAspectApplier
});
var animix_aspect_MoveDamage = function(iPower,eType,eCategory,aFlag) {
	mon_$calc_core_aspect_AAspect.call(this,[]);
	this._oDamage = new animix_aspect_Damage(iPower,eType,eCategory);
};
$hxClasses["animix.aspect.MoveDamage"] = animix_aspect_MoveDamage;
animix_aspect_MoveDamage.__name__ = "animix.aspect.MoveDamage";
animix_aspect_MoveDamage.__interfaces__ = [animix_core_aspect_OnMove];
animix_aspect_MoveDamage.__super__ = mon_$calc_core_aspect_AAspect;
animix_aspect_MoveDamage.prototype = $extend(mon_$calc_core_aspect_AAspect.prototype,{
	getPriority: function() {
		return "";
	}
	,getFlagAr: function() {
		return this._aFlag;
	}
	,notify: function(oContext,oEvent) {
		this._oDamage.process(oContext,oEvent);
	}
	,__class__: animix_aspect_MoveDamage
});
var animix_core_effect_OnTurnEnd = function() { };
$hxClasses["animix.core.effect.OnTurnEnd"] = animix_core_effect_OnTurnEnd;
animix_core_effect_OnTurnEnd.__name__ = "animix.core.effect.OnTurnEnd";
animix_core_effect_OnTurnEnd.__isInterface__ = true;
animix_core_effect_OnTurnEnd.__interfaces__ = [mon_$calc_core_effect_IEffect];
var animix_aspect_Poison = function(iPower) {
	this._iPower = iPower;
	this._iFade = 1;
	mon_$calc_core_aspect_AAspect.call(this,[]);
};
$hxClasses["animix.aspect.Poison"] = animix_aspect_Poison;
animix_aspect_Poison.__name__ = "animix.aspect.Poison";
animix_aspect_Poison.__interfaces__ = [animix_core_effect_OnTurnEnd];
animix_aspect_Poison.__super__ = mon_$calc_core_aspect_AAspect;
animix_aspect_Poison.prototype = $extend(mon_$calc_core_aspect_AAspect.prototype,{
	notify: function(oContext,oEvent) {
		throw haxe_Exception.thrown("TODO");
	}
	,__class__: animix_aspect_Poison
});
var animix_core_aspect_OnActionPrompt = function() { };
$hxClasses["animix.core.aspect.OnActionPrompt"] = animix_core_aspect_OnActionPrompt;
animix_core_aspect_OnActionPrompt.__name__ = "animix.core.aspect.OnActionPrompt";
animix_core_aspect_OnActionPrompt.__isInterface__ = true;
animix_core_aspect_OnActionPrompt.__interfaces__ = [mon_$calc_core_effect_IEffect];
animix_core_aspect_OnActionPrompt.prototype = {
	__class__: animix_core_aspect_OnActionPrompt
};
var animix_core_aspect_OnDamage = function() { };
$hxClasses["animix.core.aspect.OnDamage"] = animix_core_aspect_OnDamage;
animix_core_aspect_OnDamage.__name__ = "animix.core.aspect.OnDamage";
animix_core_aspect_OnDamage.__isInterface__ = true;
animix_core_aspect_OnDamage.__interfaces__ = [mon_$calc_core_effect_IEffect];
animix_core_aspect_OnDamage.prototype = {
	__class__: animix_core_aspect_OnDamage
};
var animix_core_aspect_OnDamageCalc = function() { };
$hxClasses["animix.core.aspect.OnDamageCalc"] = animix_core_aspect_OnDamageCalc;
animix_core_aspect_OnDamageCalc.__name__ = "animix.core.aspect.OnDamageCalc";
animix_core_aspect_OnDamageCalc.__isInterface__ = true;
animix_core_aspect_OnDamageCalc.__interfaces__ = [mon_$calc_core_effect_IEffect];
animix_core_aspect_OnDamageCalc.prototype = {
	__class__: animix_core_aspect_OnDamageCalc
};
var animix_core_aspect_OnMoveCalc = function() { };
$hxClasses["animix.core.aspect.OnMoveCalc"] = animix_core_aspect_OnMoveCalc;
animix_core_aspect_OnMoveCalc.__name__ = "animix.core.aspect.OnMoveCalc";
animix_core_aspect_OnMoveCalc.__isInterface__ = true;
animix_core_aspect_OnMoveCalc.__interfaces__ = [mon_$calc_core_effect_IEffect];
animix_core_aspect_OnMoveCalc.prototype = {
	__class__: animix_core_aspect_OnMoveCalc
};
var animix_core_aspect_OnStatCalc = function() { };
$hxClasses["animix.core.aspect.OnStatCalc"] = animix_core_aspect_OnStatCalc;
animix_core_aspect_OnStatCalc.__name__ = "animix.core.aspect.OnStatCalc";
animix_core_aspect_OnStatCalc.__isInterface__ = true;
animix_core_aspect_OnStatCalc.__interfaces__ = [mon_$calc_core_effect_IEffect];
var animix_core_aspect_OnSwitchIn = function() { };
$hxClasses["animix.core.aspect.OnSwitchIn"] = animix_core_aspect_OnSwitchIn;
animix_core_aspect_OnSwitchIn.__name__ = "animix.core.aspect.OnSwitchIn";
animix_core_aspect_OnSwitchIn.__isInterface__ = true;
animix_core_aspect_OnSwitchIn.__interfaces__ = [mon_$calc_core_effect_IEffect];
animix_core_aspect_OnSwitchIn.prototype = {
	__class__: animix_core_aspect_OnSwitchIn
};
var animix_core_aspect_OnSwitchOut = function() { };
$hxClasses["animix.core.aspect.OnSwitchOut"] = animix_core_aspect_OnSwitchOut;
animix_core_aspect_OnSwitchOut.__name__ = "animix.core.aspect.OnSwitchOut";
animix_core_aspect_OnSwitchOut.__isInterface__ = true;
animix_core_aspect_OnSwitchOut.__interfaces__ = [mon_$calc_core_effect_IEffect];
animix_core_aspect_OnSwitchOut.prototype = {
	__class__: animix_core_aspect_OnSwitchOut
};
var animix_core_aspect_OnTurnEnd = function() { };
$hxClasses["animix.core.aspect.OnTurnEnd"] = animix_core_aspect_OnTurnEnd;
animix_core_aspect_OnTurnEnd.__name__ = "animix.core.aspect.OnTurnEnd";
animix_core_aspect_OnTurnEnd.__isInterface__ = true;
animix_core_aspect_OnTurnEnd.__interfaces__ = [mon_$calc_core_effect_IEffect];
var animix_core_aspect_OnTurnStart = function() { };
$hxClasses["animix.core.aspect.OnTurnStart"] = animix_core_aspect_OnTurnStart;
animix_core_aspect_OnTurnStart.__name__ = "animix.core.aspect.OnTurnStart";
animix_core_aspect_OnTurnStart.__isInterface__ = true;
animix_core_aspect_OnTurnStart.__interfaces__ = [mon_$calc_core_effect_IEffect];
var mon_$calc_core_aspect_IAspectBearer = function() { };
$hxClasses["mon_calc.core.aspect.IAspectBearer"] = mon_$calc_core_aspect_IAspectBearer;
mon_$calc_core_aspect_IAspectBearer.__name__ = "mon_calc.core.aspect.IAspectBearer";
mon_$calc_core_aspect_IAspectBearer.__isInterface__ = true;
mon_$calc_core_aspect_IAspectBearer.prototype = {
	__class__: mon_$calc_core_aspect_IAspectBearer
};
var mon_$calc_core_aspect_AAspectBearer = function(aAspect) {
	this._aAspect = aAspect == null ? [] : aAspect;
	this._mCacheByClass = new haxe_ds_StringMap();
};
$hxClasses["mon_calc.core.aspect.AAspectBearer"] = mon_$calc_core_aspect_AAspectBearer;
mon_$calc_core_aspect_AAspectBearer.__name__ = "mon_calc.core.aspect.AAspectBearer";
mon_$calc_core_aspect_AAspectBearer.__interfaces__ = [mon_$calc_core_aspect_IAspectBearer];
mon_$calc_core_aspect_AAspectBearer.prototype = {
	getAspectOneByClass: function(oClass) {
		var _g = 0;
		var _g1 = this.getAspectAr();
		while(_g < _g1.length) {
			var o = _g1[_g];
			++_g;
			if(js_Boot.__instanceof(o,oClass)) {
				return o;
			}
		}
		return null;
	}
	,getAspectByClass: function(oClass) {
		var s = oClass.__name__;
		if(!Object.prototype.hasOwnProperty.call(this._mCacheByClass.h,s)) {
			var _this = this._mCacheByClass;
			var _g = [];
			var _g1 = 0;
			var _g2 = this._aAspect;
			while(_g1 < _g2.length) {
				var v = _g2[_g1];
				++_g1;
				if(js_Boot.__instanceof(v,oClass)) {
					_g.push(v);
				}
			}
			_this.h[s] = _g;
		}
		return this._mCacheByClass.h[s];
	}
	,hasAspect: function(o) {
		return this._aAspect.indexOf(o) != -1;
	}
	,getAspectAr: function() {
		return this._aAspect;
	}
	,hasAspectByClass: function(oClass) {
		return this.getAspectOneByClass(oClass) != null;
	}
	,addAspect: function(o) {
		this._aAspect.push(o);
		this._mCacheByClass.h = Object.create(null);
	}
	,removeAspect: function(oAspect) {
		this._mCacheByClass.h = Object.create(null);
		return HxOverrides.remove(this._aAspect,oAspect);
	}
	,__class__: mon_$calc_core_aspect_AAspectBearer
};
var animix_entity_Ani = function(sLabel,oType,iAbilityIndex,aMove) {
	mon_$calc_core_aspect_AAspectBearer.call(this);
	this._sLabel = sLabel;
	this._oType = oType;
	this._aType = [oType.geElement0(),oType.getElement1()];
	this._iLevel = 50;
	this._updateEffective();
	this._iHealth = this.getStatEffective(0);
	this._iEnergy = this.getStatEffective(1);
};
$hxClasses["animix.entity.Ani"] = animix_entity_Ani;
animix_entity_Ani.__name__ = "animix.entity.Ani";
animix_entity_Ani.__super__ = mon_$calc_core_aspect_AAspectBearer;
animix_entity_Ani.prototype = $extend(mon_$calc_core_aspect_AAspectBearer.prototype,{
	getHealth: function() {
		return this._iHealth;
	}
	,getEnergy: function() {
		return this._iEnergy;
	}
	,getType: function() {
		return this._oType;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getLevel: function() {
		return this._iLevel;
	}
	,getMoveAr: function() {
		return this._aMove;
	}
	,getMove: function(i) {
		return this._aMove[i];
	}
	,geElement0: function() {
		return this._aType[0];
	}
	,getElement1: function() {
		return this._aType[1];
	}
	,hasElement: function(eType) {
		if(this._aType[0] != eType) {
			return this._aType[1] == eType;
		} else {
			return true;
		}
	}
	,getStatEffective: function(eStat) {
		return this._mStatEffectiveCache.get(eStat);
	}
	,getStatEffectiveMap: function() {
		return this._mStatEffectiveCache.copy();
	}
	,getMaxHealth: function() {
		return this.getStatEffective(0);
	}
	,isInPinch: function() {
		return this._iHealth <= Math.floor(this.getMaxHealth() / 3);
	}
	,getMoveIndex: function(oMove) {
		var _g = 0;
		var _g1 = this._aMove.length;
		while(_g < _g1) {
			var i = _g++;
			if(this._aMove[i] == oMove) {
				return i;
			}
		}
		return null;
	}
	,getAspectAr: function() {
		return mon_$calc_core_aspect_AAspectBearer.prototype.getAspectAr.call(this).concat(this._oType.getPassiveAr());
	}
	,reset: function() {
		this.aspectPurge(function(o) {
			return true;
		});
	}
	,aspectPurge: function(fn) {
		var _g = [];
		var _g1 = 0;
		var _g2 = this._aAspect;
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(fn(v)) {
				_g.push(v);
			}
		}
		this._aAspect = _g;
	}
	,damage: function(i) {
		this._iHealth = mon_$calc_tool_IntTool.clamp(this._iHealth - i,0,this.getMaxHealth());
		return this;
	}
	,heal: function(i) {
		this._iHealth = mon_$calc_tool_IntTool.clamp(this._iHealth + i,0,this.getMaxHealth());
		return this;
	}
	,damagePercent: function(f) {
		this.damage(Math.floor(this._calcStatEffective(0) * f));
		return this;
	}
	,healPercent: function(f) {
		this.heal(Math.floor(this._calcStatEffective(0) * f));
		return this;
	}
	,_updateEffective: function() {
		var _g = new haxe_ds_IntMap();
		_g.set(0,this._calcStatEffective(0));
		_g.set(1,this._calcStatEffective(1));
		_g.set(2,this._calcStatEffective(2));
		_g.set(5,this._calcStatEffective(5));
		_g.set(4,this._calcStatEffective(4));
		_g.set(7,this._calcStatEffective(7));
		_g.set(3,this._calcStatEffective(3));
		_g.set(6,this._calcStatEffective(6));
		_g.set(8,this._calcStatEffective(8));
		this._mStatEffectiveCache = _g;
	}
	,_calcStatEffective: function(eStat) {
		var fStat = this._oType.getStat(eStat) * 2;
		if(eStat == 0) {
			return Math.floor(fStat * this._iLevel / 100 + this._iLevel + 10);
		}
		return Math.floor(fStat * this._iLevel / 100 + 5);
	}
	,__class__: animix_entity_Ani
});
var animix_entity_AniType = function(iId,sLabel,aStat,eType1,eType2,aAbility,aMoveSet,aEvolution) {
	this._iId = iId;
	this._sLabel = sLabel;
	this._aStat = aStat;
	this._eType1 = eType1;
	this._eType2 = eType2;
	this._aAbility = aAbility;
	this._aMoveSet = aMoveSet;
	this._aEvolution = aEvolution;
	mon_$calc_core_aspect_AAspectBearer.call(this,[]);
};
$hxClasses["animix.entity.AniType"] = animix_entity_AniType;
animix_entity_AniType.__name__ = "animix.entity.AniType";
animix_entity_AniType.__super__ = mon_$calc_core_aspect_AAspectBearer;
animix_entity_AniType.prototype = $extend(mon_$calc_core_aspect_AAspectBearer.prototype,{
	getStat: function(eStat) {
		return this._aStat.get(eStat);
	}
	,getId: function() {
		return this._iId;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,geElement0: function() {
		return this._eType1;
	}
	,getElement1: function() {
		return this._eType2;
	}
	,getAbilityAr: function() {
		return this._aAbility;
	}
	,getMoveSet: function() {
		return this._aMoveSet;
	}
	,getEvolutionAr: function() {
		return this._aEvolution;
	}
	,getDefaultMove: function() {
		return animix_entity_AniType.DEFAULT_MOVE;
	}
	,getPassiveAr: function() {
		return this.getAspectAr();
	}
	,__class__: animix_entity_AniType
});
var animix_entity_Battle = function(oTeamRed,oTeamBlue) {
	mon_$calc_core_aspect_AAspectBearer.call(this);
	this._oTeamRed = oTeamRed;
	this._oTeamBlue = oTeamBlue;
	this._aBattleSlotRed = [new animix_entity_BattleSlot(false,this._oTeamRed.getMon(0))];
	this._aBattleSlotBlue = [new animix_entity_BattleSlot(true,this._oTeamBlue.getMon(0))];
};
$hxClasses["animix.entity.Battle"] = animix_entity_Battle;
animix_entity_Battle.__name__ = "animix.entity.Battle";
animix_entity_Battle.__super__ = mon_$calc_core_aspect_AAspectBearer;
animix_entity_Battle.prototype = $extend(mon_$calc_core_aspect_AAspectBearer.prototype,{
	getTeamRed: function() {
		return this._oTeamRed;
	}
	,getTeamBlue: function() {
		return this._oTeamBlue;
	}
	,getTeam: function(bSide) {
		if(bSide) {
			return this._oTeamBlue;
		} else {
			return this._oTeamRed;
		}
	}
	,getCurrentMon: function(bSide) {
		return this.getBattleSlot(bSide).getBattler();
	}
	,getBattleSlot: function(bSide) {
		if(bSide) {
			return this._aBattleSlotBlue[0];
		} else {
			return this._aBattleSlotRed[0];
		}
	}
	,isDone: function() {
		if(this._oTeamRed.hasValidMon() || this._oTeamBlue.hasValidMon()) {
			return false;
		}
		return true;
	}
	,getSideFromAni: function(oAni) {
		if(this._oTeamRed.getMonAr().indexOf(oAni) != -1) {
			return false;
		}
		if(this._oTeamBlue.getMonAr().indexOf(oAni) != -1) {
			return true;
		}
		throw haxe_Exception.thrown("!!!");
	}
	,__class__: animix_entity_Battle
});
var mon_$calc_core_entity_ABattleSlot = function(bSide,oBattler) {
	this._bSide = bSide;
	this._oBattler = oBattler;
	mon_$calc_core_aspect_AAspectBearer.call(this,[]);
};
$hxClasses["mon_calc.core.entity.ABattleSlot"] = mon_$calc_core_entity_ABattleSlot;
mon_$calc_core_entity_ABattleSlot.__name__ = "mon_calc.core.entity.ABattleSlot";
mon_$calc_core_entity_ABattleSlot.__super__ = mon_$calc_core_aspect_AAspectBearer;
mon_$calc_core_entity_ABattleSlot.prototype = $extend(mon_$calc_core_aspect_AAspectBearer.prototype,{
	getBattler: function() {
		return this._oBattler;
	}
	,switchMon: function(oBattler) {
		this._oBattler = oBattler;
	}
	,__class__: mon_$calc_core_entity_ABattleSlot
});
var animix_entity_BattleSlot = function(side,oBattler) {
	mon_$calc_core_entity_ABattleSlot.call(this,side,oBattler);
};
$hxClasses["animix.entity.BattleSlot"] = animix_entity_BattleSlot;
animix_entity_BattleSlot.__name__ = "animix.entity.BattleSlot";
animix_entity_BattleSlot.__super__ = mon_$calc_core_entity_ABattleSlot;
animix_entity_BattleSlot.prototype = $extend(mon_$calc_core_entity_ABattleSlot.prototype,{
	__class__: animix_entity_BattleSlot
});
var animix_entity_Move = function(sId,sLabel,eElement,eTarget,aEffect,ePrioity,oRequirement) {
	if(ePrioity == null) {
		ePrioity = 0;
	}
	mon_$calc_core_aspect_AAspectBearer.call(this,aEffect);
	this._sId = sId;
	this._sLabel = sLabel;
	this._eElement = eElement;
	this._eTarget = eTarget;
	this._ePrioity = ePrioity;
	this._oRequirement = oRequirement;
};
$hxClasses["animix.entity.Move"] = animix_entity_Move;
animix_entity_Move.__name__ = "animix.entity.Move";
animix_entity_Move.__super__ = mon_$calc_core_aspect_AAspectBearer;
animix_entity_Move.prototype = $extend(mon_$calc_core_aspect_AAspectBearer.prototype,{
	copyEcho: function() {
		return new animix_entity_Move(this._sId,this._sLabel,this._eElement,this._eTarget,this.getAspectAr(),this._ePrioity,null);
	}
	,getId: function() {
		return this._sId;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getHitType: function() {
		return this._eElement;
	}
	,getValidator: function() {
		return this._oRequirement;
	}
	,getPriority: function() {
		return this._ePrioity;
	}
	,getTarget: function() {
		return this._eTarget;
	}
	,__class__: animix_entity_Move
});
var animix_entity_Team = function(sLabel,aMon) {
	mon_$calc_core_aspect_AAspectBearer.call(this);
	if(aMon.length == 0) {
		throw haxe_Exception.thrown("!!!");
	}
	this._aMon = aMon;
	this._sLabel = sLabel;
};
$hxClasses["animix.entity.Team"] = animix_entity_Team;
animix_entity_Team.__name__ = "animix.entity.Team";
animix_entity_Team.__super__ = mon_$calc_core_aspect_AAspectBearer;
animix_entity_Team.prototype = $extend(mon_$calc_core_aspect_AAspectBearer.prototype,{
	getLabel: function() {
		return this._sLabel;
	}
	,getMonAr: function() {
		return this._aMon;
	}
	,getMon: function(i) {
		if(i >= this._aMon.length) {
			return null;
		}
		return this._aMon[i];
	}
	,getFighter: function(i) {
		if(i >= this._aMon.length) {
			return null;
		}
		return this._aMon[i];
	}
	,getMonIndex: function(oMon) {
		var _g = 0;
		var _g1 = this._aMon.length;
		while(_g < _g1) {
			var i = _g++;
			if(this._aMon[i] == oMon) {
				return i;
			}
		}
		return null;
	}
	,hasValidMon: function() {
		var _g = 0;
		var _g1 = this._aMon;
		while(_g < _g1.length) {
			var oMon = _g1[_g];
			++_g;
			if(oMon.getHealth() > 0) {
				return true;
			}
		}
		return false;
	}
	,switchMon: function(i) {
		var oMon = this._aMon[0];
		if(i >= this._aMon.length) {
			throw haxe_Exception.thrown("!!!");
		}
		this._aMon[0] = this._aMon[i];
		this._aMon[i] = oMon;
		return this;
	}
	,__class__: animix_entity_Team
});
var mon_$calc_core_IState = function() { };
$hxClasses["mon_calc.core.IState"] = mon_$calc_core_IState;
mon_$calc_core_IState.__name__ = "mon_calc.core.IState";
mon_$calc_core_IState.__isInterface__ = true;
mon_$calc_core_IState.prototype = {
	__class__: mon_$calc_core_IState
};
var animix_state_BaseState = function(oBattle) {
	this._oBattle = oBattle;
};
$hxClasses["animix.state.BaseState"] = animix_state_BaseState;
animix_state_BaseState.__name__ = "animix.state.BaseState";
animix_state_BaseState.__interfaces__ = [mon_$calc_core_IState];
animix_state_BaseState.prototype = {
	process: function() {
		throw haxe_Exception.thrown("!!");
	}
	,trigger: function(oInterface,oEvent) {
		var a = [].concat(this.getAspectContextPair(oInterface,this._oBattle)).concat(this.getAspectContextPair(oInterface,this._oBattle.getTeamRed())).concat(this.getAspectContextPair(oInterface,this._oBattle.getTeamBlue())).concat(this.getAspectContextPair(oInterface,this._oBattle.getCurrentMon(false))).concat(this.getAspectContextPair(oInterface,this._oBattle.getCurrentMon(true)));
		var _g = 0;
		while(_g < a.length) {
			var pair = a[_g];
			++_g;
			pair.B.notify(pair.A,oEvent);
		}
		return oEvent;
	}
	,getAspectContextPair: function(oInterface,oBearer) {
		var _gthis = this;
		var _this = oBearer.getAspectByClass(oInterface);
		var result = new Array(_this.length);
		var _g = 0;
		var _g1 = _this.length;
		while(_g < _g1) {
			var i = _g++;
			var aspect = _this[i];
			result[i] = { A : { battle : _gthis._oBattle, process : _gthis, aspect : aspect, bearer : oBearer}, B : aspect};
		}
		return result;
	}
	,getChance: function(f) {
		if(f >= 1.0) {
			return true;
		}
		return Math.random() < f;
	}
	,addAspect: function(oTarget,oAspect) {
		oTarget.addAspect(oAspect);
	}
	,getCurrentStat: function(oAni,eStat) {
		var oContext = { side : this._oBattle.getSideFromAni(oAni), subject : oAni, type : eStat, value : oAni.getStatEffective(eStat)};
		this.trigger(animix_core_aspect_OnStatCalc,oContext);
		return oContext.value;
	}
	,__class__: animix_state_BaseState
};
var animix_state_AniActionState = function(oBattle) {
	this._iBlueActionPick = null;
	this._iRedActionPick = null;
	this._aBlueActionAr = null;
	this._aRedActionAr = null;
	animix_state_BaseState.call(this,oBattle);
	this._aRedActionAr = null;
	this._aBlueActionAr = null;
	this._iRedActionPick = null;
	this._iBlueActionPick = null;
	this._aRedActionAr = this.generatePlayerAction(false);
	this._aBlueActionAr = this.generatePlayerAction(true);
};
$hxClasses["animix.state.AniActionState"] = animix_state_AniActionState;
animix_state_AniActionState.__name__ = "animix.state.AniActionState";
animix_state_AniActionState.__super__ = animix_state_BaseState;
animix_state_AniActionState.prototype = $extend(animix_state_BaseState.prototype,{
	getBattle: function() {
		return this._oBattle;
	}
	,setRedAction: function(i) {
		this._iRedActionPick = i;
	}
	,setBlueAction: function(i) {
		this._iRedActionPick = i;
	}
	,getRedActionAr: function() {
		return this._aRedActionAr;
	}
	,getBlueActionAr: function() {
		return this._aBlueActionAr;
	}
	,process: function() {
		if(this._iRedActionPick == null && this._aRedActionAr.length > 1 || this._iBlueActionPick == null && this._aBlueActionAr.length > 1) {
			throw haxe_Exception.thrown("!!!");
		}
		return new animix_state_AniSwitchState(this._oBattle,this._aRedActionAr[this._iRedActionPick],this._aBlueActionAr[this._iBlueActionPick]);
	}
	,generatePlayerAction: function(bSide) {
		var _gthis = this;
		var oMon = this._oBattle.getCurrentMon(bSide);
		var aAction = [];
		aAction.push(new animix_action_AniMoveAction(bSide,0));
		aAction.push(new animix_action_AniMoveAction(bSide,1));
		aAction.push(new animix_action_AniMoveAction(bSide,2));
		aAction.push(new animix_action_AniMoveAction(bSide,3));
		var _g = [];
		var _g1 = 0;
		var _g2 = aAction;
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(v.validate(_gthis._oBattle)) {
				_g.push(v);
			}
		}
		aAction = _g;
		if(aAction.length == 0) {
			aAction.push(new animix_action_AniMoveAction(bSide,null));
		}
		aAction.concat(this.generatePlayerSwitchAction(bSide));
		var oEvent = this.trigger(animix_core_aspect_OnActionPrompt,{ action : aAction, side : bSide});
		return oEvent.action;
	}
	,generatePlayerSwitchAction: function(bSide) {
		var _gthis = this;
		var oCurrent = this._oBattle.getCurrentMon(bSide);
		var oTeam = this._oBattle.getTeam(bSide);
		var aAction = [];
		var _g = 0;
		var _g1 = oTeam.getMonAr().length;
		while(_g < _g1) {
			var i = _g++;
			if(oCurrent != oTeam.getMon(i)) {
				aAction.push(new animix_action_AniSwitchAction(bSide,i));
			}
		}
		var _g = [];
		var _g1 = 0;
		var _g2 = aAction;
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(v.validate(_gthis._oBattle)) {
				_g.push(v);
			}
		}
		return _g;
	}
	,__class__: animix_state_AniActionState
});
var animix_state_AniMoveState = function(oBattle,oActionRed,oActionBlue) {
	animix_state_BaseState.call(this,oBattle);
	this._oActionRed = oActionRed;
	this._oActionBlue = oActionBlue;
};
$hxClasses["animix.state.AniMoveState"] = animix_state_AniMoveState;
animix_state_AniMoveState.__name__ = "animix.state.AniMoveState";
animix_state_AniMoveState.__super__ = animix_state_BaseState;
animix_state_AniMoveState.prototype = $extend(animix_state_BaseState.prototype,{
	process: function() {
		var _gthis = this;
		var oBattle = this._oBattle;
		var aEvent = [];
		if(((this._oActionRed) instanceof animix_action_AniMoveAction)) {
			var oMove = (js_Boot.__cast(this._oActionRed , animix_action_AniMoveAction)).getMove(this._oBattle);
			aEvent.push({ side : false, mon : oBattle.getCurrentMon(false), move_origin : oMove, move : oMove});
		}
		if(((this._oActionBlue) instanceof animix_action_AniMoveAction)) {
			var oMove = (js_Boot.__cast(this._oActionBlue , animix_action_AniMoveAction)).getMove(this._oBattle);
			aEvent.push({ side : true, mon : oBattle.getCurrentMon(true), move_origin : oMove, move : oMove});
		}
		var _g = 0;
		while(_g < aEvent.length) {
			var oEvent = aEvent[_g];
			++_g;
			this.trigger(animix_core_aspect_OnMoveCalc,oEvent);
		}
		aEvent.sort(function(a,b) {
			var i = Reflect.compare(b.move.getPriority(),a.move.getPriority());
			if(i == 0) {
				return -Reflect.compare(_gthis.getCurrentStat(_gthis._oBattle.getCurrentMon(a.side),8),_gthis.getCurrentStat(_gthis._oBattle.getCurrentMon(b.side),8));
			}
			return i;
		});
		var _g = 0;
		while(_g < aEvent.length) {
			var oEvent = aEvent[_g];
			++_g;
			this.doMove(oEvent);
		}
		return new animix_state_TurnEndState(this._oBattle);
	}
	,doMove: function(oEvent) {
		var bSide = oEvent.side;
		var oMonAtt = oEvent.mon;
		var oMove = oEvent.move;
		if(oMove == null) {
			return;
		}
		var oMonTarget = null;
		switch(oMove.getTarget()) {
		case 0:
			oMonTarget = oMonAtt;
			break;
		case 1:
			oMonTarget = this._oBattle.getCurrentMon(!bSide);
			break;
		default:
			throw haxe_Exception.thrown("!!!");
		}
		this.trigger(animix_core_aspect_OnMove,{ side_att : bSide, turnover : false, move : oMove, defender : oMonTarget, attacker : oMonAtt});
	}
	,__class__: animix_state_AniMoveState
});
var animix_state_AniSwitchState = function(oBattle,oActionRed,oActionBlue) {
	animix_state_BaseState.call(this,oBattle);
	this._oActionRed = oActionRed;
	this._oActionBlue = oActionBlue;
};
$hxClasses["animix.state.AniSwitchState"] = animix_state_AniSwitchState;
animix_state_AniSwitchState.__name__ = "animix.state.AniSwitchState";
animix_state_AniSwitchState.__super__ = animix_state_BaseState;
animix_state_AniSwitchState.prototype = $extend(animix_state_BaseState.prototype,{
	process: function() {
		if(((this._oActionRed) instanceof animix_action_AniSwitchAction)) {
			var oSwtichAction = js_Boot.__cast(this._oActionRed , animix_action_AniSwitchAction);
			this.switchAni(false,oSwtichAction.getMonIndex());
		}
		if(((this._oActionBlue) instanceof animix_action_AniSwitchAction)) {
			var oSwtichAction = js_Boot.__cast(this._oActionBlue , animix_action_AniSwitchAction);
			this.switchAni(true,oSwtichAction.getMonIndex());
		}
		return new animix_state_AniMoveState(this._oBattle,this._oActionRed,this._oActionBlue);
	}
	,switchAni: function(bSide,iAniIndex) {
		this.trigger(animix_core_aspect_OnSwitchOut,{ side : bSide, subject : this._oBattle.getCurrentMon(bSide)});
		var oTeam = this._oBattle.getTeam(bSide);
		var oAni = oTeam.getMon(iAniIndex);
		this._oBattle.getBattleSlot(bSide).switchMon(oAni);
		this.trigger(animix_core_aspect_OnSwitchIn,{ side : bSide, subject : oAni});
	}
	,__class__: animix_state_AniSwitchState
});
var animix_state_BattleBeginState = function(oBattle) {
	animix_state_BaseState.call(this,oBattle);
};
$hxClasses["animix.state.BattleBeginState"] = animix_state_BattleBeginState;
animix_state_BattleBeginState.__name__ = "animix.state.BattleBeginState";
animix_state_BattleBeginState.__super__ = animix_state_BaseState;
animix_state_BattleBeginState.prototype = $extend(animix_state_BaseState.prototype,{
	process: function() {
		return new animix_state_AniActionState(this._oBattle);
	}
	,__class__: animix_state_BattleBeginState
});
var animix_state_TurnEndState = function(oBattle) {
	animix_state_BaseState.call(this,oBattle);
};
$hxClasses["animix.state.TurnEndState"] = animix_state_TurnEndState;
animix_state_TurnEndState.__name__ = "animix.state.TurnEndState";
animix_state_TurnEndState.__super__ = animix_state_BaseState;
animix_state_TurnEndState.prototype = $extend(animix_state_BaseState.prototype,{
	process: function() {
		this.trigger(animix_core_aspect_OnTurnEnd,{ });
		return new animix_state_AniActionState(this._oBattle);
	}
	,__class__: animix_state_TurnEndState
});
var animix_$client_$js_Main = function() {
	this._oClient = new animix_$client_$js_client_Client();
	var oForm = new animix_$client_$js_client_component_page_MainPage();
	this._oClient.renderDyna(oForm);
};
$hxClasses["animix_client_js.Main"] = animix_$client_$js_Main;
animix_$client_$js_Main.__name__ = "animix_client_js.Main";
animix_$client_$js_Main.main = function() {
	animix_$client_$js_Main._oInstance = new animix_$client_$js_Main();
};
animix_$client_$js_Main.get = function() {
	return animix_$client_$js_Main._oInstance;
};
animix_$client_$js_Main.prototype = {
	getClient: function() {
		return this._oClient;
	}
	,__class__: animix_$client_$js_Main
};
var haxe_iterators_ArrayIterator = function(array) {
	this.current = 0;
	this.array = array;
};
$hxClasses["haxe.iterators.ArrayIterator"] = haxe_iterators_ArrayIterator;
haxe_iterators_ArrayIterator.__name__ = "haxe.iterators.ArrayIterator";
haxe_iterators_ArrayIterator.prototype = {
	hasNext: function() {
		return this.current < this.array.length;
	}
	,next: function() {
		return this.array[this.current++];
	}
	,__class__: haxe_iterators_ArrayIterator
};
var haxe_Template = function(str) {
	var tokens = this.parseTokens(str);
	this.expr = this.parseBlock(tokens);
	if(!tokens.isEmpty()) {
		throw haxe_Exception.thrown("Unexpected '" + Std.string(tokens.first().s) + "'");
	}
};
$hxClasses["haxe.Template"] = haxe_Template;
haxe_Template.__name__ = "haxe.Template";
haxe_Template.prototype = {
	execute: function(context,macros) {
		this.macros = macros == null ? { } : macros;
		this.context = context;
		this.stack = new haxe_ds_List();
		this.buf = new StringBuf();
		this.run(this.expr);
		return this.buf.b;
	}
	,resolve: function(v) {
		if(v == "__current__") {
			return this.context;
		}
		var value = Reflect.getProperty(this.context,v);
		if(value != null || Object.prototype.hasOwnProperty.call(this.context,v)) {
			return value;
		}
		var _g_head = this.stack.h;
		while(_g_head != null) {
			var val = _g_head.item;
			_g_head = _g_head.next;
			var ctx = val;
			value = Reflect.getProperty(ctx,v);
			if(value != null || Object.prototype.hasOwnProperty.call(ctx,v)) {
				return value;
			}
		}
		return Reflect.field(haxe_Template.globals,v);
	}
	,parseTokens: function(data) {
		var tokens = new haxe_ds_List();
		while(haxe_Template.splitter.match(data)) {
			var p = haxe_Template.splitter.matchedPos();
			if(p.pos > 0) {
				tokens.add({ p : HxOverrides.substr(data,0,p.pos), s : true, l : null});
			}
			if(HxOverrides.cca(data,p.pos) == 58) {
				tokens.add({ p : HxOverrides.substr(data,p.pos + 2,p.len - 4), s : false, l : null});
				data = haxe_Template.splitter.matchedRight();
				continue;
			}
			var parp = p.pos + p.len;
			var npar = 1;
			var params = [];
			var part = "";
			while(true) {
				var c = HxOverrides.cca(data,parp);
				++parp;
				if(c == 40) {
					++npar;
				} else if(c == 41) {
					--npar;
					if(npar <= 0) {
						break;
					}
				} else if(c == null) {
					throw haxe_Exception.thrown("Unclosed macro parenthesis");
				}
				if(c == 44 && npar == 1) {
					params.push(part);
					part = "";
				} else {
					part += String.fromCodePoint(c);
				}
			}
			params.push(part);
			tokens.add({ p : haxe_Template.splitter.matched(2), s : false, l : params});
			data = HxOverrides.substr(data,parp,data.length - parp);
		}
		if(data.length > 0) {
			tokens.add({ p : data, s : true, l : null});
		}
		return tokens;
	}
	,parseBlock: function(tokens) {
		var l = new haxe_ds_List();
		while(true) {
			var t = tokens.first();
			if(t == null) {
				break;
			}
			if(!t.s && (t.p == "end" || t.p == "else" || HxOverrides.substr(t.p,0,7) == "elseif ")) {
				break;
			}
			l.add(this.parse(tokens));
		}
		if(l.length == 1) {
			return l.first();
		}
		return haxe__$Template_TemplateExpr.OpBlock(l);
	}
	,parse: function(tokens) {
		var t = tokens.pop();
		var p = t.p;
		if(t.s) {
			return haxe__$Template_TemplateExpr.OpStr(p);
		}
		if(t.l != null) {
			var pe = new haxe_ds_List();
			var _g = 0;
			var _g1 = t.l;
			while(_g < _g1.length) {
				var p1 = _g1[_g];
				++_g;
				pe.add(this.parseBlock(this.parseTokens(p1)));
			}
			return haxe__$Template_TemplateExpr.OpMacro(p,pe);
		}
		var kwdEnd = function(kwd) {
			var pos = -1;
			var length = kwd.length;
			if(HxOverrides.substr(p,0,length) == kwd) {
				pos = length;
				var _g_offset = 0;
				var _g_s = HxOverrides.substr(p,length,null);
				while(_g_offset < _g_s.length) {
					var c = _g_s.charCodeAt(_g_offset++);
					if(c == 32) {
						++pos;
					} else {
						break;
					}
				}
			}
			return pos;
		};
		var pos = kwdEnd("if");
		if(pos > 0) {
			p = HxOverrides.substr(p,pos,p.length - pos);
			var e = this.parseExpr(p);
			var eif = this.parseBlock(tokens);
			var t = tokens.first();
			var eelse;
			if(t == null) {
				throw haxe_Exception.thrown("Unclosed 'if'");
			}
			if(t.p == "end") {
				tokens.pop();
				eelse = null;
			} else if(t.p == "else") {
				tokens.pop();
				eelse = this.parseBlock(tokens);
				t = tokens.pop();
				if(t == null || t.p != "end") {
					throw haxe_Exception.thrown("Unclosed 'else'");
				}
			} else {
				t.p = HxOverrides.substr(t.p,4,t.p.length - 4);
				eelse = this.parse(tokens);
			}
			return haxe__$Template_TemplateExpr.OpIf(e,eif,eelse);
		}
		var pos = kwdEnd("foreach");
		if(pos >= 0) {
			p = HxOverrides.substr(p,pos,p.length - pos);
			var e = this.parseExpr(p);
			var efor = this.parseBlock(tokens);
			var t = tokens.pop();
			if(t == null || t.p != "end") {
				throw haxe_Exception.thrown("Unclosed 'foreach'");
			}
			return haxe__$Template_TemplateExpr.OpForeach(e,efor);
		}
		if(haxe_Template.expr_splitter.match(p)) {
			return haxe__$Template_TemplateExpr.OpExpr(this.parseExpr(p));
		}
		return haxe__$Template_TemplateExpr.OpVar(p);
	}
	,parseExpr: function(data) {
		var l = new haxe_ds_List();
		var expr = data;
		while(haxe_Template.expr_splitter.match(data)) {
			var p = haxe_Template.expr_splitter.matchedPos();
			var k = p.pos + p.len;
			if(p.pos != 0) {
				l.add({ p : HxOverrides.substr(data,0,p.pos), s : true});
			}
			var p1 = haxe_Template.expr_splitter.matched(0);
			l.add({ p : p1, s : p1.indexOf("\"") >= 0});
			data = haxe_Template.expr_splitter.matchedRight();
		}
		if(data.length != 0) {
			var _g_offset = 0;
			var _g_s = data;
			while(_g_offset < _g_s.length) {
				var _g1_key = _g_offset;
				var _g1_value = _g_s.charCodeAt(_g_offset++);
				var i = _g1_key;
				var c = _g1_value;
				if(c != 32) {
					l.add({ p : HxOverrides.substr(data,i,null), s : true});
					break;
				}
			}
		}
		var e;
		try {
			e = this.makeExpr(l);
			if(!l.isEmpty()) {
				throw haxe_Exception.thrown(l.first().p);
			}
		} catch( _g ) {
			var _g1 = haxe_Exception.caught(_g).unwrap();
			if(typeof(_g1) == "string") {
				var s = _g1;
				throw haxe_Exception.thrown("Unexpected '" + s + "' in " + expr);
			} else {
				throw _g;
			}
		}
		return function() {
			try {
				return e();
			} catch( _g ) {
				var exc = haxe_Exception.caught(_g).unwrap();
				throw haxe_Exception.thrown("Error : " + Std.string(exc) + " in " + expr);
			}
		};
	}
	,makeConst: function(v) {
		haxe_Template.expr_trim.match(v);
		v = haxe_Template.expr_trim.matched(1);
		if(HxOverrides.cca(v,0) == 34) {
			var str = HxOverrides.substr(v,1,v.length - 2);
			return function() {
				return str;
			};
		}
		if(haxe_Template.expr_int.match(v)) {
			var i = Std.parseInt(v);
			return function() {
				return i;
			};
		}
		if(haxe_Template.expr_float.match(v)) {
			var f = parseFloat(v);
			return function() {
				return f;
			};
		}
		var me = this;
		return function() {
			return me.resolve(v);
		};
	}
	,makePath: function(e,l) {
		var p = l.first();
		if(p == null || p.p != ".") {
			return e;
		}
		l.pop();
		var field = l.pop();
		if(field == null || !field.s) {
			throw haxe_Exception.thrown(field.p);
		}
		var f = field.p;
		haxe_Template.expr_trim.match(f);
		f = haxe_Template.expr_trim.matched(1);
		return this.makePath(function() {
			return Reflect.field(e(),f);
		},l);
	}
	,makeExpr: function(l) {
		return this.makePath(this.makeExpr2(l),l);
	}
	,skipSpaces: function(l) {
		var p = l.first();
		while(p != null) {
			var _g_offset = 0;
			var _g_s = p.p;
			while(_g_offset < _g_s.length) {
				var c = _g_s.charCodeAt(_g_offset++);
				if(c != 32) {
					return;
				}
			}
			l.pop();
			p = l.first();
		}
	}
	,makeExpr2: function(l) {
		this.skipSpaces(l);
		var p = l.pop();
		this.skipSpaces(l);
		if(p == null) {
			throw haxe_Exception.thrown("<eof>");
		}
		if(p.s) {
			return this.makeConst(p.p);
		}
		switch(p.p) {
		case "!":
			var e = this.makeExpr(l);
			return function() {
				var v = e();
				if(v != null) {
					return v == false;
				} else {
					return true;
				}
			};
		case "(":
			this.skipSpaces(l);
			var e1 = this.makeExpr(l);
			this.skipSpaces(l);
			var p1 = l.pop();
			if(p1 == null || p1.s) {
				throw haxe_Exception.thrown(p1);
			}
			if(p1.p == ")") {
				return e1;
			}
			this.skipSpaces(l);
			var e2 = this.makeExpr(l);
			this.skipSpaces(l);
			var p2 = l.pop();
			this.skipSpaces(l);
			if(p2 == null || p2.p != ")") {
				throw haxe_Exception.thrown(p2);
			}
			switch(p1.p) {
			case "!=":
				return function() {
					return e1() != e2();
				};
			case "&&":
				return function() {
					return e1() && e2();
				};
			case "*":
				return function() {
					return e1() * e2();
				};
			case "+":
				return function() {
					return e1() + e2();
				};
			case "-":
				return function() {
					return e1() - e2();
				};
			case "/":
				return function() {
					return e1() / e2();
				};
			case "<":
				return function() {
					return e1() < e2();
				};
			case "<=":
				return function() {
					return e1() <= e2();
				};
			case "==":
				return function() {
					return e1() == e2();
				};
			case ">":
				return function() {
					return e1() > e2();
				};
			case ">=":
				return function() {
					return e1() >= e2();
				};
			case "||":
				return function() {
					return e1() || e2();
				};
			default:
				throw haxe_Exception.thrown("Unknown operation " + p1.p);
			}
			break;
		case "-":
			var e3 = this.makeExpr(l);
			return function() {
				return -e3();
			};
		}
		throw haxe_Exception.thrown(p.p);
	}
	,run: function(e) {
		switch(e._hx_index) {
		case 0:
			var v = e.v;
			var _this = this.buf;
			var x = Std.string(this.resolve(v));
			_this.b += Std.string(x);
			break;
		case 1:
			var e1 = e.expr;
			var _this = this.buf;
			var x = Std.string(e1());
			_this.b += Std.string(x);
			break;
		case 2:
			var eelse = e.eelse;
			var eif = e.eif;
			var e1 = e.expr;
			var v = e1();
			if(v == null || v == false) {
				if(eelse != null) {
					this.run(eelse);
				}
			} else {
				this.run(eif);
			}
			break;
		case 3:
			var str = e.str;
			this.buf.b += str == null ? "null" : "" + str;
			break;
		case 4:
			var l = e.l;
			var _g_head = l.h;
			while(_g_head != null) {
				var val = _g_head.item;
				_g_head = _g_head.next;
				var e1 = val;
				this.run(e1);
			}
			break;
		case 5:
			var loop = e.loop;
			var e1 = e.expr;
			var v = e1();
			try {
				var x = $getIterator(v);
				if(x.hasNext == null) {
					throw haxe_Exception.thrown(null);
				}
				v = x;
			} catch( _g ) {
				try {
					if(v.hasNext == null) {
						throw haxe_Exception.thrown(null);
					}
				} catch( _g1 ) {
					throw haxe_Exception.thrown("Cannot iter on " + Std.string(v));
				}
			}
			this.stack.push(this.context);
			var v1 = v;
			var ctx = v1;
			while(ctx.hasNext()) {
				var ctx1 = ctx.next();
				this.context = ctx1;
				this.run(loop);
			}
			this.context = this.stack.pop();
			break;
		case 6:
			var params = e.params;
			var m = e.name;
			var v = Reflect.field(this.macros,m);
			var pl = [];
			var old = this.buf;
			pl.push($bind(this,this.resolve));
			var _g_head = params.h;
			while(_g_head != null) {
				var val = _g_head.item;
				_g_head = _g_head.next;
				var p = val;
				if(p._hx_index == 0) {
					var v1 = p.v;
					pl.push(this.resolve(v1));
				} else {
					this.buf = new StringBuf();
					this.run(p);
					pl.push(this.buf.b);
				}
			}
			this.buf = old;
			try {
				var _this = this.buf;
				var x = Std.string(v.apply(this.macros,pl));
				_this.b += Std.string(x);
			} catch( _g ) {
				var e = haxe_Exception.caught(_g).unwrap();
				var plstr;
				try {
					plstr = pl.join(",");
				} catch( _g1 ) {
					plstr = "???";
				}
				var msg = "Macro call " + m + "(" + plstr + ") failed (" + Std.string(e) + ")";
				throw haxe_Exception.thrown(msg);
			}
			break;
		}
	}
	,__class__: haxe_Template
};
var animix_$client_$js_Template = function(s) {
	haxe_Template.call(this,s);
};
$hxClasses["animix_client_js.Template"] = animix_$client_$js_Template;
animix_$client_$js_Template.__name__ = "animix_client_js.Template";
animix_$client_$js_Template.__super__ = haxe_Template;
animix_$client_$js_Template.prototype = $extend(haxe_Template.prototype,{
	resolve: function(v) {
		if(v == "__parent__") {
			return this.stack.first();
		}
		return haxe_Template.prototype.resolve.call(this,v);
	}
	,__class__: animix_$client_$js_Template
});
var animix_$client_$js_client_Client = function() {
	this._root = null;
	window.Client = this;
};
$hxClasses["animix_client_js.client.Client"] = animix_$client_$js_client_Client;
animix_$client_$js_client_Client.__name__ = "animix_client_js.client.Client";
animix_$client_$js_client_Client.prototype = {
	getRoot: function() {
		return this._root;
	}
	,renderDyna: function(oView) {
		var holder = window.document.body;
		holder.innerHTML = "";
		holder.append(oView.getDomElement());
		this._root = oView;
	}
	,getClientChild: function(uid) {
		var el = this._root.getDomElement().querySelector("[data-client-id=\"" + uid + "\"]");
		return el.hxComponent;
	}
	,__class__: animix_$client_$js_client_Client
};
var animix_$client_$js_client_IRenderable = function() { };
$hxClasses["animix_client_js.client.IRenderable"] = animix_$client_$js_client_IRenderable;
animix_$client_$js_client_IRenderable.__name__ = "animix_client_js.client.IRenderable";
animix_$client_$js_client_IRenderable.__isInterface__ = true;
var haxe_Resource = function() { };
$hxClasses["haxe.Resource"] = haxe_Resource;
haxe_Resource.__name__ = "haxe.Resource";
haxe_Resource.getString = function(name) {
	var _g = 0;
	var _g1 = haxe_Resource.content;
	while(_g < _g1.length) {
		var x = _g1[_g];
		++_g;
		if(x.name == name) {
			if(x.str != null) {
				return x.str;
			}
			var b = haxe_crypto_Base64.decode(x.data);
			return b.toString();
		}
	}
	return null;
};
var haxe_io_Bytes = function(data) {
	this.length = data.byteLength;
	this.b = new Uint8Array(data);
	this.b.bufferValue = data;
	data.hxBytes = this;
	data.bytes = this.b;
};
$hxClasses["haxe.io.Bytes"] = haxe_io_Bytes;
haxe_io_Bytes.__name__ = "haxe.io.Bytes";
haxe_io_Bytes.ofString = function(s,encoding) {
	if(encoding == haxe_io_Encoding.RawNative) {
		var buf = new Uint8Array(s.length << 1);
		var _g = 0;
		var _g1 = s.length;
		while(_g < _g1) {
			var i = _g++;
			var c = s.charCodeAt(i);
			buf[i << 1] = c & 255;
			buf[i << 1 | 1] = c >> 8;
		}
		return new haxe_io_Bytes(buf.buffer);
	}
	var a = [];
	var i = 0;
	while(i < s.length) {
		var c = s.charCodeAt(i++);
		if(55296 <= c && c <= 56319) {
			c = c - 55232 << 10 | s.charCodeAt(i++) & 1023;
		}
		if(c <= 127) {
			a.push(c);
		} else if(c <= 2047) {
			a.push(192 | c >> 6);
			a.push(128 | c & 63);
		} else if(c <= 65535) {
			a.push(224 | c >> 12);
			a.push(128 | c >> 6 & 63);
			a.push(128 | c & 63);
		} else {
			a.push(240 | c >> 18);
			a.push(128 | c >> 12 & 63);
			a.push(128 | c >> 6 & 63);
			a.push(128 | c & 63);
		}
	}
	return new haxe_io_Bytes(new Uint8Array(a).buffer);
};
haxe_io_Bytes.prototype = {
	getString: function(pos,len,encoding) {
		if(pos < 0 || len < 0 || pos + len > this.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		if(encoding == null) {
			encoding = haxe_io_Encoding.UTF8;
		}
		var s = "";
		var b = this.b;
		var i = pos;
		var max = pos + len;
		switch(encoding._hx_index) {
		case 0:
			var debug = pos > 0;
			while(i < max) {
				var c = b[i++];
				if(c < 128) {
					if(c == 0) {
						break;
					}
					s += String.fromCodePoint(c);
				} else if(c < 224) {
					var code = (c & 63) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code);
				} else if(c < 240) {
					var c2 = b[i++];
					var code1 = (c & 31) << 12 | (c2 & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code1);
				} else {
					var c21 = b[i++];
					var c3 = b[i++];
					var u = (c & 15) << 18 | (c21 & 127) << 12 | (c3 & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(u);
				}
			}
			break;
		case 1:
			while(i < max) {
				var c = b[i++] | b[i++] << 8;
				s += String.fromCodePoint(c);
			}
			break;
		}
		return s;
	}
	,toString: function() {
		return this.getString(0,this.length);
	}
	,__class__: haxe_io_Bytes
};
var haxe_io_Encoding = $hxEnums["haxe.io.Encoding"] = { __ename__ : "haxe.io.Encoding", __constructs__ : ["UTF8","RawNative"]
	,UTF8: {_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr}
	,RawNative: {_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}
};
var haxe_crypto_Base64 = function() { };
$hxClasses["haxe.crypto.Base64"] = haxe_crypto_Base64;
haxe_crypto_Base64.__name__ = "haxe.crypto.Base64";
haxe_crypto_Base64.decode = function(str,complement) {
	if(complement == null) {
		complement = true;
	}
	if(complement) {
		while(HxOverrides.cca(str,str.length - 1) == 61) str = HxOverrides.substr(str,0,-1);
	}
	return new haxe_crypto_BaseCode(haxe_crypto_Base64.BYTES).decodeBytes(haxe_io_Bytes.ofString(str));
};
var haxe_crypto_BaseCode = function(base) {
	var len = base.length;
	var nbits = 1;
	while(len > 1 << nbits) ++nbits;
	if(nbits > 8 || len != 1 << nbits) {
		throw haxe_Exception.thrown("BaseCode : base length must be a power of two.");
	}
	this.base = base;
	this.nbits = nbits;
};
$hxClasses["haxe.crypto.BaseCode"] = haxe_crypto_BaseCode;
haxe_crypto_BaseCode.__name__ = "haxe.crypto.BaseCode";
haxe_crypto_BaseCode.prototype = {
	initTable: function() {
		var tbl = [];
		var _g = 0;
		while(_g < 256) {
			var i = _g++;
			tbl[i] = -1;
		}
		var _g = 0;
		var _g1 = this.base.length;
		while(_g < _g1) {
			var i = _g++;
			tbl[this.base.b[i]] = i;
		}
		this.tbl = tbl;
	}
	,decodeBytes: function(b) {
		var nbits = this.nbits;
		var base = this.base;
		if(this.tbl == null) {
			this.initTable();
		}
		var tbl = this.tbl;
		var size = b.length * nbits >> 3;
		var out = new haxe_io_Bytes(new ArrayBuffer(size));
		var buf = 0;
		var curbits = 0;
		var pin = 0;
		var pout = 0;
		while(pout < size) {
			while(curbits < 8) {
				curbits += nbits;
				buf <<= nbits;
				var i = tbl[b.b[pin++]];
				if(i == -1) {
					throw haxe_Exception.thrown("BaseCode : invalid encoded char");
				}
				buf |= i;
			}
			curbits -= 8;
			out.b[pout++] = buf >> curbits & 255;
		}
		return out;
	}
	,__class__: haxe_crypto_BaseCode
};
var haxe_Exception = function(message,previous,native) {
	Error.call(this,message);
	this.message = message;
	this.__previousException = previous;
	this.__nativeException = native != null ? native : this;
};
$hxClasses["haxe.Exception"] = haxe_Exception;
haxe_Exception.__name__ = "haxe.Exception";
haxe_Exception.caught = function(value) {
	if(((value) instanceof haxe_Exception)) {
		return value;
	} else if(((value) instanceof Error)) {
		return new haxe_Exception(value.message,null,value);
	} else {
		return new haxe_ValueException(value,null,value);
	}
};
haxe_Exception.thrown = function(value) {
	if(((value) instanceof haxe_Exception)) {
		return value.get_native();
	} else if(((value) instanceof Error)) {
		return value;
	} else {
		var e = new haxe_ValueException(value);
		return e;
	}
};
haxe_Exception.__super__ = Error;
haxe_Exception.prototype = $extend(Error.prototype,{
	unwrap: function() {
		return this.__nativeException;
	}
	,toString: function() {
		return this.get_message();
	}
	,get_message: function() {
		return this.message;
	}
	,get_native: function() {
		return this.__nativeException;
	}
	,__class__: haxe_Exception
	,__properties__: {get_native:"get_native",get_message:"get_message"}
});
var haxe_ValueException = function(value,previous,native) {
	haxe_Exception.call(this,String(value),previous,native);
	this.value = value;
};
$hxClasses["haxe.ValueException"] = haxe_ValueException;
haxe_ValueException.__name__ = "haxe.ValueException";
haxe_ValueException.__super__ = haxe_Exception;
haxe_ValueException.prototype = $extend(haxe_Exception.prototype,{
	unwrap: function() {
		return this.value;
	}
	,__class__: haxe_ValueException
});
var js_Boot = function() { };
$hxClasses["js.Boot"] = js_Boot;
js_Boot.__name__ = "js.Boot";
js_Boot.getClass = function(o) {
	if(o == null) {
		return null;
	} else if(((o) instanceof Array)) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var n = e.__constructs__[o._hx_index];
			var con = e[n];
			if(con.__params__) {
				s = s + "\t";
				return n + "(" + ((function($this) {
					var $r;
					var _g = [];
					{
						var _g1 = 0;
						var _g2 = con.__params__;
						while(true) {
							if(!(_g1 < _g2.length)) {
								break;
							}
							var p = _g2[_g1];
							_g1 = _g1 + 1;
							_g.push(js_Boot.__string_rec(o[p],s));
						}
					}
					$r = _g;
					return $r;
				}(this))).join(",") + ")";
			} else {
				return n;
			}
		}
		if(((o) instanceof Array)) {
			var str = "[";
			s += "\t";
			var _g = 0;
			var _g1 = o.length;
			while(_g < _g1) {
				var i = _g++;
				str += (i > 0 ? "," : "") + js_Boot.__string_rec(o[i],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( _g ) {
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var str = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		var k = null;
		for( k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str.length != 2) {
			str += ", \n";
		}
		str += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str += "\n" + s + "}";
		return str;
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	if(cc == null) {
		return false;
	}
	if(cc == cl) {
		return true;
	}
	var intf = cc.__interfaces__;
	if(intf != null) {
		var _g = 0;
		var _g1 = intf.length;
		while(_g < _g1) {
			var i = _g++;
			var i1 = intf[i];
			if(i1 == cl || js_Boot.__interfLoop(i1,cl)) {
				return true;
			}
		}
	}
	return js_Boot.__interfLoop(cc.__super__,cl);
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) {
		return false;
	}
	switch(cl) {
	case Array:
		return ((o) instanceof Array);
	case Bool:
		return typeof(o) == "boolean";
	case Dynamic:
		return o != null;
	case Float:
		return typeof(o) == "number";
	case Int:
		if(typeof(o) == "number") {
			return ((o | 0) === o);
		} else {
			return false;
		}
		break;
	case String:
		return typeof(o) == "string";
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if(js_Boot.__downcastCheck(o,cl)) {
					return true;
				}
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if(((o) instanceof cl)) {
					return true;
				}
			}
		} else {
			return false;
		}
		if(cl == Class ? o.__name__ != null : false) {
			return true;
		}
		if(cl == Enum ? o.__ename__ != null : false) {
			return true;
		}
		return o.__enum__ != null ? $hxEnums[o.__enum__] == cl : false;
	}
};
js_Boot.__downcastCheck = function(o,cl) {
	if(!((o) instanceof cl)) {
		if(cl.__isInterface__) {
			return js_Boot.__interfLoop(js_Boot.getClass(o),cl);
		} else {
			return false;
		}
	} else {
		return true;
	}
};
js_Boot.__implements = function(o,iface) {
	return js_Boot.__interfLoop(js_Boot.getClass(o),iface);
};
js_Boot.__cast = function(o,t) {
	if(o == null || js_Boot.__instanceof(o,t)) {
		return o;
	} else {
		throw haxe_Exception.thrown("Cannot cast " + Std.string(o) + " to " + Std.string(t));
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var animix_$client_$js_client_TplManager = function() {
};
$hxClasses["animix_client_js.client.TplManager"] = animix_$client_$js_client_TplManager;
animix_$client_$js_client_TplManager.__name__ = "animix_client_js.client.TplManager";
animix_$client_$js_client_TplManager.uid = function() {
	return animix_$client_$js_client_TplManager._uid++;
};
animix_$client_$js_client_TplManager.prototype = {
	__class__: animix_$client_$js_client_TplManager
};
var animix_$client_$js_client_form_IView = function() { };
$hxClasses["animix_client_js.client.form.IView"] = animix_$client_$js_client_form_IView;
animix_$client_$js_client_form_IView.__name__ = "animix_client_js.client.form.IView";
animix_$client_$js_client_form_IView.__isInterface__ = true;
animix_$client_$js_client_form_IView.__interfaces__ = [animix_$client_$js_client_IRenderable];
animix_$client_$js_client_form_IView.prototype = {
	__class__: animix_$client_$js_client_form_IView
};
var animix_$client_$js_client_form_AView = function(tag) {
	if(tag == null) {
		tag = "div";
	}
	this._dom = window.document.createElement(tag);
	this._dom.hxComponent = this;
	this._uid = animix_$client_$js_client_TplManager.uid();
	this._dom.setAttribute("data-client-id",this._uid + "");
};
$hxClasses["animix_client_js.client.form.AView"] = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_AView.__name__ = "animix_client_js.client.form.AView";
animix_$client_$js_client_form_AView.__interfaces__ = [animix_$client_$js_client_form_IView];
animix_$client_$js_client_form_AView.prototype = {
	getId: function() {
		return this._uid;
	}
	,getDomElement: function() {
		return this._dom;
	}
	,renderTemplate: function(s) {
		var div = window.document.createElement("div");
		div.innerHTML = s;
		if(div.children.length != 1) {
			throw haxe_Exception.thrown("!!");
		}
		return div.children[0];
	}
	,createInput: function(label,name,attr) {
		var input = window.document.createElement("input");
		input.placeholder = label;
		input.name = name;
		if(haxe_ds_StringMap.valueIterator(attr.h).hasNext()) {
			throw haxe_Exception.thrown("TODO");
		}
		return input;
	}
	,__class__: animix_$client_$js_client_form_AView
};
var animix_$client_$js_client_form_IViewComposite = function() { };
$hxClasses["animix_client_js.client.form.IViewComposite"] = animix_$client_$js_client_form_IViewComposite;
animix_$client_$js_client_form_IViewComposite.__name__ = "animix_client_js.client.form.IViewComposite";
animix_$client_$js_client_form_IViewComposite.__isInterface__ = true;
animix_$client_$js_client_form_IViewComposite.__interfaces__ = [animix_$client_$js_client_form_IView];
animix_$client_$js_client_form_IViewComposite.prototype = {
	__class__: animix_$client_$js_client_form_IViewComposite
};
var animix_$client_$js_client_form_AViewComposite = function(a) {
	animix_$client_$js_client_form_AView.call(this);
	this._child = a;
	var _g = 0;
	while(_g < a.length) {
		var el = a[_g];
		++_g;
		this._dom.append(el.getDomElement());
	}
};
$hxClasses["animix_client_js.client.form.AViewComposite"] = animix_$client_$js_client_form_AViewComposite;
animix_$client_$js_client_form_AViewComposite.__name__ = "animix_client_js.client.form.AViewComposite";
animix_$client_$js_client_form_AViewComposite.__interfaces__ = [animix_$client_$js_client_form_IViewComposite];
animix_$client_$js_client_form_AViewComposite.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_AViewComposite.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	getClientChild: function(uid) {
		return this._dom.querySelector("[data-client-id=\"" + uid + "\"]").hxComponent;
	}
	,__class__: animix_$client_$js_client_form_AViewComposite
});
var animix_$client_$js_client_component_page_MainPage = function() {
	this._oFormMatchCreation = new animix_$client_$js_client_form_FormMatchCreation($bind(this,this.submitMatchCreation));
	this._oBattleWidget = null;
	animix_$client_$js_client_form_AViewComposite.call(this,[this._oFormMatchCreation]);
};
$hxClasses["animix_client_js.client.component.page.MainPage"] = animix_$client_$js_client_component_page_MainPage;
animix_$client_$js_client_component_page_MainPage.__name__ = "animix_client_js.client.component.page.MainPage";
animix_$client_$js_client_component_page_MainPage.__super__ = animix_$client_$js_client_form_AViewComposite;
animix_$client_$js_client_component_page_MainPage.prototype = $extend(animix_$client_$js_client_form_AViewComposite.prototype,{
	submitMatchCreation: function(oForm) {
		this._oBattleWidget = new animix_$client_$js_client_form_BattleWidget(this._oFormMatchCreation.getValue());
		this._dom.append(this._oBattleWidget._dom);
	}
	,__class__: animix_$client_$js_client_component_page_MainPage
});
var animix_$client_$js_client_form_IForm = function() { };
$hxClasses["animix_client_js.client.form.IForm"] = animix_$client_$js_client_form_IForm;
animix_$client_$js_client_form_IForm.__name__ = "animix_client_js.client.form.IForm";
animix_$client_$js_client_form_IForm.__isInterface__ = true;
animix_$client_$js_client_form_IForm.prototype = {
	__class__: animix_$client_$js_client_form_IForm
};
var animix_$client_$js_client_form_AInput = function(label,name,attr,tag) {
	if(tag == null) {
		tag = "input";
	}
	this._label = label;
	this._name = name;
	animix_$client_$js_client_form_AView.call(this,tag);
	this._dom.setAttribute("type","text");
	this._dom.setAttribute("name",name);
	this._dom.setAttribute("placeholder",label);
	if(attr != null) {
		var _g = haxe_ds_StringMap.kvIterator(attr.h);
		while(_g.hasNext()) {
			var _g1 = _g.next();
			var k = _g1.key;
			var v = _g1.value;
			this._dom.setAttribute(k,v);
		}
	}
};
$hxClasses["animix_client_js.client.form.AInput"] = animix_$client_$js_client_form_AInput;
animix_$client_$js_client_form_AInput.__name__ = "animix_client_js.client.form.AInput";
animix_$client_$js_client_form_AInput.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_AInput.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_AInput.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	validate: function() {
		return true;
	}
	,getInputElement: function() {
		return this._dom;
	}
	,getValue: function() {
		return this.getInputElement().value;
	}
	,__class__: animix_$client_$js_client_form_AInput
});
var animix_$client_$js_client_form_ActionChoiceWidget = function(oState,fn) {
	var _gthis = this;
	this._oState = oState;
	this._fn = fn;
	animix_$client_$js_client_form_AView.call(this);
	var sMove = "";
	var _g_current = 0;
	var _g_array = this._oState.getRedActionAr();
	while(_g_current < _g_array.length) {
		var _g1_value = _g_array[_g_current];
		var _g1_key = _g_current++;
		var k = _g1_key;
		var v = _g1_value;
		if(((v) instanceof animix_action_AniMoveAction)) {
			var oAction = v;
			sMove += "<button type=\"button\" class=\"btn btn-primary\" data-actionbtn=\"" + k + "\">" + oAction.getMove(this._oState.getBattle()).getLabel() + "</button>";
			continue;
		}
	}
	var sSwitch = "";
	var _g_current = 0;
	var _g_array = this._oState.getRedActionAr();
	while(_g_current < _g_array.length) {
		var _g1_value = _g_array[_g_current];
		var _g1_key = _g_current++;
		var k = _g1_key;
		var v = _g1_value;
		if(((v) instanceof animix_action_AniSwitchAction)) {
			var oAction = v;
			sSwitch += "<button type=\"button\" class=\"btn btn-primary\" data-actionbtn=\"" + k + "\">" + "Switch to " + oAction.getAni(this._oState.getBattle()).getLabel() + "</button>";
			continue;
		}
	}
	this._dom.innerHTML = "<div class=\"row\">\r\n\t\t\t<div class=\"col\">" + sMove + "</div>\r\n\t\t\t<div class=\"col\">" + sSwitch + "</div>\r\n\t\t</div>";
	this._dom.addEventListener("click",function(oEvent) {
		if(!((oEvent.target) instanceof HTMLElement)) {
			return;
		}
		var oElement = oEvent.target;
		if(!oElement.hasAttribute("data-actionbtn")) {
			return;
		}
		_gthis._fn(Std.parseInt(oElement.getAttribute("data-actionbtn")));
	});
};
$hxClasses["animix_client_js.client.form.ActionChoiceWidget"] = animix_$client_$js_client_form_ActionChoiceWidget;
animix_$client_$js_client_form_ActionChoiceWidget.__name__ = "animix_client_js.client.form.ActionChoiceWidget";
animix_$client_$js_client_form_ActionChoiceWidget.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_ActionChoiceWidget.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	__class__: animix_$client_$js_client_form_ActionChoiceWidget
});
var animix_$client_$js_client_form_BattleWidget = function(oBattle) {
	this._oState = new animix_state_BattleBeginState(oBattle);
	animix_$client_$js_client_form_AView.call(this);
	this._dom.innerHTML = "<div>\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col\">\r\n\t\t\t\t<img />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col\">\r\n\t\t\t\t<img />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"row\">\r\n\t\t\t<div data-actionbox></div>\r\n\t\t</div>\r\n\t\t</div>";
	this._process();
};
$hxClasses["animix_client_js.client.form.BattleWidget"] = animix_$client_$js_client_form_BattleWidget;
animix_$client_$js_client_form_BattleWidget.__name__ = "animix_client_js.client.form.BattleWidget";
animix_$client_$js_client_form_BattleWidget.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_BattleWidget.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	_process: function() {
		var actionbox = this._dom.querySelector("[data-actionbox]");
		this._oActionChoice = null;
		actionbox.remove();
		while(!((this._oState) instanceof animix_state_AniActionState)) this._oState = this._oState.process();
		this._oActionChoice = new animix_$client_$js_client_form_ActionChoiceWidget(this._oState,$bind(this,this._chooseAction));
		actionbox.append(this._oActionChoice._dom);
	}
	,_chooseAction: function(i) {
		if(!((this._oState) instanceof animix_state_AniActionState)) {
			throw haxe_Exception.thrown("!!");
		}
		var oActionState = this._oState;
		oActionState.setRedAction(i);
		oActionState.setBlueAction(Math.floor(Math.random() * oActionState.getBlueActionAr().length));
	}
	,__class__: animix_$client_$js_client_form_BattleWidget
});
var animix_$client_$js_client_form_Layout = function(a) {
	animix_$client_$js_client_form_AView.call(this);
	this._child = a;
	this._dom.classList.add("row");
	var _g = 0;
	while(_g < a.length) {
		var el = a[_g];
		++_g;
		var col = window.document.createElement("div");
		col.classList.add("col-auto");
		col.append(el.getDomElement());
		this._dom.append(col);
	}
};
$hxClasses["animix_client_js.client.form.Layout"] = animix_$client_$js_client_form_Layout;
animix_$client_$js_client_form_Layout.__name__ = "animix_client_js.client.form.Layout";
animix_$client_$js_client_form_Layout.__interfaces__ = [animix_$client_$js_client_form_IViewComposite];
animix_$client_$js_client_form_Layout.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_Layout.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	getClientChild: function(uid) {
		throw haxe_Exception.thrown("!!!");
	}
	,__class__: animix_$client_$js_client_form_Layout
});
var animix_$client_$js_client_form_FormAniCreation = function() {
	animix_$client_$js_client_form_Layout.call(this,[new animix_$client_$js_client_form_AViewComposite([this._oLabel = new animix_$client_$js_client_form_Input("Name","label"),this._oElement0 = new animix_$client_$js_client_form_InputSelectElement("Primary element","element0"),this._oElement1 = new animix_$client_$js_client_form_InputSelectElement("Secondary element","element1"),this._oAvatar = new animix_$client_$js_client_form_InputAniAvatar()]),new animix_$client_$js_client_form_AViewComposite([this._oMove0 = new animix_$client_$js_client_form_FormMoveCreation(),this._oMove1 = new animix_$client_$js_client_form_FormMoveCreation(),this._oMove2 = new animix_$client_$js_client_form_FormMoveCreation(),this._oMove3 = new animix_$client_$js_client_form_FormMoveCreation()])]);
};
$hxClasses["animix_client_js.client.form.FormAniCreation"] = animix_$client_$js_client_form_FormAniCreation;
animix_$client_$js_client_form_FormAniCreation.__name__ = "animix_client_js.client.form.FormAniCreation";
animix_$client_$js_client_form_FormAniCreation.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_FormAniCreation.__super__ = animix_$client_$js_client_form_Layout;
animix_$client_$js_client_form_FormAniCreation.prototype = $extend(animix_$client_$js_client_form_Layout.prototype,{
	validate: function() {
		return true;
	}
	,getValue: function() {
		var tmp = this._oLabel.getValue();
		var tmp1 = this._oLabel.getValue();
		var _g = new haxe_ds_IntMap();
		_g.set(0,10);
		_g.set(2,10);
		_g.set(5,10);
		_g.set(4,10);
		_g.set(7,10);
		return new animix_entity_Ani(tmp,new animix_entity_AniType(0,tmp1,_g,this._oElement0.getValue(),this._oElement1.getValue(),[],[],[]),0,[this._oMove0.getValue(),this._oMove1.getValue(),this._oMove2.getValue(),this._oMove3.getValue()]);
	}
	,__class__: animix_$client_$js_client_form_FormAniCreation
});
var animix_$client_$js_client_form_FormAspectApplier = function() {
	var tmp = new animix_$client_$js_client_form_InputRange("Turn","turn",0,5);
	var _g = new haxe_ds_StringMap();
	_g.h["burn"] = "Burn";
	_g.h["poison"] = "Poison";
	animix_$client_$js_client_form_AViewComposite.call(this,[tmp,new animix_$client_$js_client_form_InputSelect("Aspect","aspect",_g)]);
};
$hxClasses["animix_client_js.client.form.FormAspectApplier"] = animix_$client_$js_client_form_FormAspectApplier;
animix_$client_$js_client_form_FormAspectApplier.__name__ = "animix_client_js.client.form.FormAspectApplier";
animix_$client_$js_client_form_FormAspectApplier.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_FormAspectApplier.__super__ = animix_$client_$js_client_form_AViewComposite;
animix_$client_$js_client_form_FormAspectApplier.prototype = $extend(animix_$client_$js_client_form_AViewComposite.prototype,{
	validate: function() {
		return true;
	}
	,getValue: function() {
		return new animix_aspect_MoveAspectApplier(new sweet_functor_builder_FactoryDefault(animix_aspect_Poison,[1,1]));
	}
	,__class__: animix_$client_$js_client_form_FormAspectApplier
});
var animix_$client_$js_client_form_FormAttack = function() {
	this._oRange = new animix_$client_$js_client_form_InputRange("Damage","damage",0,100);
	this._oElement = new animix_$client_$js_client_form_InputSelectElement("Element","element");
	var _g = new haxe_ds_StringMap();
	_g.h["physique"] = "Physique";
	_g.h["magic"] = "Magic";
	this._oType = new animix_$client_$js_client_form_InputSelect("Element","element",_g);
	animix_$client_$js_client_form_AViewComposite.call(this,[this._oRange,this._oElement,this._oType]);
};
$hxClasses["animix_client_js.client.form.FormAttack"] = animix_$client_$js_client_form_FormAttack;
animix_$client_$js_client_form_FormAttack.__name__ = "animix_client_js.client.form.FormAttack";
animix_$client_$js_client_form_FormAttack.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_FormAttack.__super__ = animix_$client_$js_client_form_AViewComposite;
animix_$client_$js_client_form_FormAttack.prototype = $extend(animix_$client_$js_client_form_AViewComposite.prototype,{
	validate: function() {
		return true;
	}
	,getValue: function() {
		return new animix_aspect_MoveDamage(this._oRange.getValueInt(),this._oElement.getValue(),this._resolveType(this._oType.getValue()),[]);
	}
	,_resolveType: function(s) {
		switch(s) {
		case "magic":
			return 1;
		case "physique":
			return 0;
		}
		throw haxe_Exception.thrown("invalid " + s);
	}
	,__class__: animix_$client_$js_client_form_FormAttack
});
var animix_$client_$js_client_form_FormMatchCreation = function(fnSubmit) {
	animix_$client_$js_client_form_AView.call(this,"form");
	this._fnSubmit = fnSubmit;
	this._dom.addEventListener("submit",$bind(this,this.submit));
	var layout = new animix_$client_$js_client_form_Layout([this.oInputTeamRed = new animix_$client_$js_client_form_FormTeamCreation("Red"),this.oInputTeamBlue = new animix_$client_$js_client_form_FormTeamCreation("Blue")]);
	this._dom.append(layout._dom);
	this._dom.append(new animix_$client_$js_client_form_Submit("Battle !","")._dom);
};
$hxClasses["animix_client_js.client.form.FormMatchCreation"] = animix_$client_$js_client_form_FormMatchCreation;
animix_$client_$js_client_form_FormMatchCreation.__name__ = "animix_client_js.client.form.FormMatchCreation";
animix_$client_$js_client_form_FormMatchCreation.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_FormMatchCreation.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_FormMatchCreation.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	submit: function(oEvent) {
		oEvent.preventDefault();
		if(!this.validate()) {
			throw haxe_Exception.thrown("!!!");
		}
		this._fnSubmit(this);
	}
	,validate: function() {
		var a = [this.oInputTeamRed.validate(),this.oInputTeamBlue.validate()];
		return a.indexOf(false) == -1;
	}
	,getValue: function() {
		return new animix_entity_Battle(this.oInputTeamRed.getValue(),this.oInputTeamBlue.getValue());
	}
	,__class__: animix_$client_$js_client_form_FormMatchCreation
});
var animix_$client_$js_client_form_FormMoveCreation = function() {
	animix_$client_$js_client_form_AViewComposite.call(this,[this._oLabel = new animix_$client_$js_client_form_Input("Move label","label"),this._oElement = new animix_$client_$js_client_form_InputSelectElement("Move element","element"),this._oAspect = new animix_$client_$js_client_form_InputAspectList("Effect")]);
};
$hxClasses["animix_client_js.client.form.FormMoveCreation"] = animix_$client_$js_client_form_FormMoveCreation;
animix_$client_$js_client_form_FormMoveCreation.__name__ = "animix_client_js.client.form.FormMoveCreation";
animix_$client_$js_client_form_FormMoveCreation.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_FormMoveCreation.__super__ = animix_$client_$js_client_form_AViewComposite;
animix_$client_$js_client_form_FormMoveCreation.prototype = $extend(animix_$client_$js_client_form_AViewComposite.prototype,{
	validate: function() {
		var a = [this._oLabel,this._oElement,this._oAspect];
		var result = new Array(a.length);
		var _g = 0;
		var _g1 = a.length;
		while(_g < _g1) {
			var i = _g++;
			result[i] = a[i].validate();
		}
		return result.indexOf(false) == -1;
	}
	,getValue: function() {
		return new animix_entity_Move("__",this._oLabel.getValue(),this._oElement.getValue(),1,this._oAspect.getValue(),0,null);
	}
	,__class__: animix_$client_$js_client_form_FormMoveCreation
});
var animix_$client_$js_client_form_FormTeamCreation = function(defaultLabel) {
	var _g = new haxe_ds_StringMap();
	_g.h["value"] = defaultLabel;
	animix_$client_$js_client_form_AViewComposite.call(this,[this._oLabel = new animix_$client_$js_client_form_Input("Name","label",_g),this._oAni0 = new animix_$client_$js_client_form_FormAniCreation(),this._oAni1 = new animix_$client_$js_client_form_FormAniCreation(),this._oAni2 = new animix_$client_$js_client_form_FormAniCreation()]);
};
$hxClasses["animix_client_js.client.form.FormTeamCreation"] = animix_$client_$js_client_form_FormTeamCreation;
animix_$client_$js_client_form_FormTeamCreation.__name__ = "animix_client_js.client.form.FormTeamCreation";
animix_$client_$js_client_form_FormTeamCreation.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_FormTeamCreation.__super__ = animix_$client_$js_client_form_AViewComposite;
animix_$client_$js_client_form_FormTeamCreation.prototype = $extend(animix_$client_$js_client_form_AViewComposite.prototype,{
	validate: function() {
		return true;
	}
	,getValue: function() {
		return new animix_entity_Team(this._oLabel.getValue(),[this._oAni0.getValue(),this._oAni1.getValue(),this._oAni2.getValue()]);
	}
	,__class__: animix_$client_$js_client_form_FormTeamCreation
});
var animix_$client_$js_client_form_Input = function(label,name,attr,tag) {
	animix_$client_$js_client_form_AInput.call(this,label,name,attr,tag);
};
$hxClasses["animix_client_js.client.form.Input"] = animix_$client_$js_client_form_Input;
animix_$client_$js_client_form_Input.__name__ = "animix_client_js.client.form.Input";
animix_$client_$js_client_form_Input.__super__ = animix_$client_$js_client_form_AInput;
animix_$client_$js_client_form_Input.prototype = $extend(animix_$client_$js_client_form_AInput.prototype,{
	__class__: animix_$client_$js_client_form_Input
});
var animix_$client_$js_client_form_InputAniAvatar = function() {
	var _gthis = this;
	this._drag = null;
	animix_$client_$js_client_form_AView.call(this,"div");
	this._dom.classList.add("input-ani-avatar");
	var s = "\r\n            <input type=\"file\" data-input-avatar />\r\n            <div class=\"bg-checkboard wrapper-img-preview\" data-wrapper-preview style=\"display: none\">\r\n                <img class=\"img-fluid\" src=\"\" alt=\"\" data-img-preview />\r\n                <div data-marker-eye-0 style=\"top:10%;left:10%\"></div>\r\n                <div data-marker-eye-1 style=\"top:10%;left:70%\"></div>\r\n            </div>\r\n\t\t\t<style>\r\n\t\t\t\t.wrapper-img-preview {\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t}\r\n\t\t\t\t.input-ani-avatar {\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t[data-marker-eye-0],\r\n\t\t\t\t[data-marker-eye-1] {\r\n\t\t\t\t\tposition: absolute; \r\n\r\n\t\t\t\t\tborder: 1px solid red;\r\n\t\t\t\t\twidth: 10%;\r\n\t\t\t\t\theight: 10%;\r\n\t\t\t\t\tbackground-color: white;\r\n\r\n\t\t\t\t\tcursor: move;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.bg-checkboard{\r\n\t\t\t\t\tbackground-size: 40px 40px;\r\n\t\t\t\t\tbackground-image: radial-gradient(circle, #000000 1px, rgba(0, 0, 0, 0) 1px);\r\n\t\t\t\t}\r\n\t\t\t</style>\r\n        ";
	this._dom.innerHTML = s;
	var wrapper = this._dom.querySelector("[data-wrapper-preview]");
	var marker_eye_0 = this._dom.querySelector("[data-marker-eye-0]");
	var marker_eye_1 = this._dom.querySelector("[data-marker-eye-1]");
	this._dom.querySelector("[data-input-avatar]").addEventListener("change",function(event) {
		var target = event.target;
		var file = target.files.item(0);
		if(file == null) {
			return;
		}
		var img = _gthis._dom.querySelector("[data-img-preview]");
		img.src = URL.createObjectURL(file);
		img.dispatchEvent(new Event("inputfile-preview",{ target : img, input : target, bubbles : true}));
		wrapper.style.display = "";
	});
	marker_eye_0.addEventListener("mousedown",function() {
		return _gthis._drag = marker_eye_0;
	});
	marker_eye_1.addEventListener("mousedown",function() {
		return _gthis._drag = marker_eye_1;
	});
	marker_eye_0.addEventListener("mouseup",$bind(this,this.dragStop));
	marker_eye_1.addEventListener("mouseup",$bind(this,this.dragStop));
	window.document.addEventListener("mousemove",$bind(this,this.dragMove));
};
$hxClasses["animix_client_js.client.form.InputAniAvatar"] = animix_$client_$js_client_form_InputAniAvatar;
animix_$client_$js_client_form_InputAniAvatar.__name__ = "animix_client_js.client.form.InputAniAvatar";
animix_$client_$js_client_form_InputAniAvatar.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_InputAniAvatar.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	dragStart: function(event) {
		if(this._drag == null) {
			return;
		}
		var box = this._dom.getBoundingClientRect();
		this._drag.style.top = event.clientY - box.top + "px";
		this._drag.style.left = event.clientX - box.left + "px";
	}
	,dragStop: function(event) {
		this._drag = null;
	}
	,dragMove: function(event) {
		if(this._drag == null) {
			return;
		}
		var box = this._dom.getBoundingClientRect();
		this._drag.style.top = event.clientY - box.top + "px";
		this._drag.style.left = event.clientX - box.left + "px";
	}
	,__class__: animix_$client_$js_client_form_InputAniAvatar
});
var animix_$client_$js_client_form_InputAspectList = function(label) {
	animix_$client_$js_client_form_AView.call(this);
	this._label = label;
	this._aChild = [];
	this._dom.innerHTML = this.render();
};
$hxClasses["animix_client_js.client.form.InputAspectList"] = animix_$client_$js_client_form_InputAspectList;
animix_$client_$js_client_form_InputAspectList.__name__ = "animix_client_js.client.form.InputAspectList";
animix_$client_$js_client_form_InputAspectList.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_InputAspectList.getTemplate = function() {
	return new animix_$client_$js_Template(haxe_Resource.getString("form.input_aspect"));
};
animix_$client_$js_client_form_InputAspectList.getTemplateItem = function() {
	return new animix_$client_$js_Template(haxe_Resource.getString("form.input_listaspect_item"));
};
animix_$client_$js_client_form_InputAspectList.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_InputAspectList.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	validate: function() {
		if(this._aChild.length != 0) {
			var error_box = this._dom.querySelector("[data-form-error=" + this._uid + "]");
			error_box.textContent = "Require at least one effect.";
			return false;
		}
		return true;
	}
	,getValue: function() {
		var _this = this._aChild;
		var result = new Array(_this.length);
		var _g = 0;
		var _g1 = _this.length;
		while(_g < _g1) {
			var i = _g++;
			result[i] = _this[i].getValue();
		}
		return result;
	}
	,getActionOptionMap: function() {
		var _g = new haxe_ds_StringMap();
		_g.h["damage"] = "Damage";
		_g.h["aspect_applier"] = "Status applier";
		var m = _g;
		return m;
	}
	,removeAction: function(el) {
		el.closest("fieldset").remove();
	}
	,addAction: function(el) {
		var root = el.closest("[data-dyn-tpl]");
		var select = root.querySelector("[data-inputaspect-select-action]");
		var wrapper = root.querySelector("[data-action-list]");
		var item = this.renderTemplate(animix_$client_$js_client_form_InputAspectList.getTemplateItem().execute({ uid : this._uid}));
		wrapper.append(item);
		item.querySelector("[data-placeholder]").replaceWith(this.createForm(select.value).getDomElement());
	}
	,createForm: function(s) {
		switch(s) {
		case "applier":
			return new animix_$client_$js_client_form_FormAspectApplier();
		case "damage":
			return new animix_$client_$js_client_form_FormAttack();
		}
		throw haxe_Exception.thrown("invalid \"" + s + "\"");
	}
	,render: function() {
		var option = [];
		var _g = haxe_ds_StringMap.kvIterator(this.getActionOptionMap().h);
		while(_g.hasNext()) {
			var _g1 = _g.next();
			var k = _g1.key;
			var v = _g1.value;
			option.push({ label : v, value : k});
		}
		return animix_$client_$js_client_form_InputAspectList.getTemplate().execute({ label : this._label, uid : this._uid, action_option_list : option});
	}
	,__class__: animix_$client_$js_client_form_InputAspectList
});
var animix_$client_$js_client_form_InputRange = function(label,name,min,max,step,attr) {
	if(step == null) {
		step = 1;
	}
	if(max == null) {
		max = 100;
	}
	if(min == null) {
		min = 0;
	}
	if(attr == null) {
		attr = new haxe_ds_StringMap();
	}
	attr.h["type"] = "range";
	attr.h["min"] = min + "";
	attr.h["max"] = max + "";
	animix_$client_$js_client_form_AInput.call(this,label,name,attr);
};
$hxClasses["animix_client_js.client.form.InputRange"] = animix_$client_$js_client_form_InputRange;
animix_$client_$js_client_form_InputRange.__name__ = "animix_client_js.client.form.InputRange";
animix_$client_$js_client_form_InputRange.__super__ = animix_$client_$js_client_form_AInput;
animix_$client_$js_client_form_InputRange.prototype = $extend(animix_$client_$js_client_form_AInput.prototype,{
	getValueInt: function() {
		return Std.parseInt(this.getValue());
	}
	,__class__: animix_$client_$js_client_form_InputRange
});
var animix_$client_$js_client_form_InputSelect = function(label,name,choiceAr) {
	this._choiceMap = choiceAr;
	animix_$client_$js_client_form_AInput.call(this,label,name,null,"select");
	var _g = haxe_ds_StringMap.kvIterator(choiceAr.h);
	while(_g.hasNext()) {
		var _g1 = _g.next();
		var k = _g1.key;
		var v = _g1.value;
		this._dom.append(this.createOption(v,k));
	}
};
$hxClasses["animix_client_js.client.form.InputSelect"] = animix_$client_$js_client_form_InputSelect;
animix_$client_$js_client_form_InputSelect.__name__ = "animix_client_js.client.form.InputSelect";
animix_$client_$js_client_form_InputSelect.__super__ = animix_$client_$js_client_form_AInput;
animix_$client_$js_client_form_InputSelect.prototype = $extend(animix_$client_$js_client_form_AInput.prototype,{
	createOption: function(label,value) {
		var o = window.document.createElement("option");
		o.setAttribute("value",value);
		o.innerText = label;
		return o;
	}
	,__class__: animix_$client_$js_client_form_InputSelect
});
var animix_$client_$js_client_form_InputSelectElement = function(label,name) {
	var _g = new haxe_ds_StringMap();
	_g.h["fire"] = "Fire";
	_g.h["water"] = "Water";
	_g.h["air"] = "Air";
	_g.h["earth"] = "Earth";
	_g.h["electric"] = "Electric";
	this._element = new animix_$client_$js_client_form_InputSelect(label,name,_g);
	animix_$client_$js_client_form_AViewComposite.call(this,[this._element]);
};
$hxClasses["animix_client_js.client.form.InputSelectElement"] = animix_$client_$js_client_form_InputSelectElement;
animix_$client_$js_client_form_InputSelectElement.__name__ = "animix_client_js.client.form.InputSelectElement";
animix_$client_$js_client_form_InputSelectElement.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_InputSelectElement.__super__ = animix_$client_$js_client_form_AViewComposite;
animix_$client_$js_client_form_InputSelectElement.prototype = $extend(animix_$client_$js_client_form_AViewComposite.prototype,{
	validate: function() {
		return true;
	}
	,getValue: function() {
		return this._resolveElement(this._element.getValue());
	}
	,_resolveElement: function(s) {
		switch(s) {
		case "air":
			return 3;
		case "earth":
			return 4;
		case "electric":
			return 5;
		case "fire":
			return 2;
		case "water":
			return 1;
		}
		throw haxe_Exception.thrown("invalid " + s);
	}
	,__class__: animix_$client_$js_client_form_InputSelectElement
});
var animix_$client_$js_client_form_Submit = function(label,name,attr) {
	this._label = label;
	this._name = name;
	animix_$client_$js_client_form_AView.call(this,"button");
	this._dom.setAttribute("type","submit");
	this._dom.setAttribute("name",name);
	this._dom.classList.add("btn-primary");
	this._dom.classList.add("btn");
	this._dom.textContent = label;
	if(attr != null) {
		var _g = haxe_ds_StringMap.kvIterator(attr.h);
		while(_g.hasNext()) {
			var _g1 = _g.next();
			var k = _g1.key;
			var v = _g1.value;
			this._dom.setAttribute(k,v);
		}
	}
};
$hxClasses["animix_client_js.client.form.Submit"] = animix_$client_$js_client_form_Submit;
animix_$client_$js_client_form_Submit.__name__ = "animix_client_js.client.form.Submit";
animix_$client_$js_client_form_Submit.__interfaces__ = [animix_$client_$js_client_form_IForm];
animix_$client_$js_client_form_Submit.__super__ = animix_$client_$js_client_form_AView;
animix_$client_$js_client_form_Submit.prototype = $extend(animix_$client_$js_client_form_AView.prototype,{
	validate: function() {
		return true;
	}
	,getInputElement: function() {
		return this._dom;
	}
	,getValue: function() {
		return this.getInputElement().value;
	}
	,__class__: animix_$client_$js_client_form_Submit
});
var haxe_IMap = function() { };
$hxClasses["haxe.IMap"] = haxe_IMap;
haxe_IMap.__name__ = "haxe.IMap";
haxe_IMap.__isInterface__ = true;
haxe_IMap.prototype = {
	__class__: haxe_IMap
};
var haxe_Serializer = function() {
	this.buf = new StringBuf();
	this.cache = [];
	this.useCache = haxe_Serializer.USE_CACHE;
	this.useEnumIndex = haxe_Serializer.USE_ENUM_INDEX;
	this.shash = new haxe_ds_StringMap();
	this.scount = 0;
};
$hxClasses["haxe.Serializer"] = haxe_Serializer;
haxe_Serializer.__name__ = "haxe.Serializer";
haxe_Serializer.run = function(v) {
	var s = new haxe_Serializer();
	s.serialize(v);
	return s.toString();
};
haxe_Serializer.prototype = {
	toString: function() {
		return this.buf.b;
	}
	,serializeString: function(s) {
		var x = this.shash.h[s];
		if(x != null) {
			this.buf.b += "R";
			this.buf.b += x == null ? "null" : "" + x;
			return;
		}
		this.shash.h[s] = this.scount++;
		this.buf.b += "y";
		s = encodeURIComponent(s);
		this.buf.b += Std.string(s.length);
		this.buf.b += ":";
		this.buf.b += s == null ? "null" : "" + s;
	}
	,serializeRef: function(v) {
		var vt = typeof(v);
		var _g = 0;
		var _g1 = this.cache.length;
		while(_g < _g1) {
			var i = _g++;
			var ci = this.cache[i];
			if(typeof(ci) == vt && ci == v) {
				this.buf.b += "r";
				this.buf.b += i == null ? "null" : "" + i;
				return true;
			}
		}
		this.cache.push(v);
		return false;
	}
	,serializeFields: function(v) {
		var _g = 0;
		var _g1 = Reflect.fields(v);
		while(_g < _g1.length) {
			var f = _g1[_g];
			++_g;
			this.serializeString(f);
			this.serialize(Reflect.field(v,f));
		}
		this.buf.b += "g";
	}
	,serialize: function(v) {
		var _g = Type.typeof(v);
		switch(_g._hx_index) {
		case 0:
			this.buf.b += "n";
			break;
		case 1:
			var v1 = v;
			if(v1 == 0) {
				this.buf.b += "z";
				return;
			}
			this.buf.b += "i";
			this.buf.b += v1 == null ? "null" : "" + v1;
			break;
		case 2:
			var v1 = v;
			if(isNaN(v1)) {
				this.buf.b += "k";
			} else if(!isFinite(v1)) {
				this.buf.b += v1 < 0 ? "m" : "p";
			} else {
				this.buf.b += "d";
				this.buf.b += v1 == null ? "null" : "" + v1;
			}
			break;
		case 3:
			this.buf.b += v ? "t" : "f";
			break;
		case 4:
			if(js_Boot.__instanceof(v,Class)) {
				var className = v.__name__;
				this.buf.b += "A";
				this.serializeString(className);
			} else if(js_Boot.__instanceof(v,Enum)) {
				this.buf.b += "B";
				this.serializeString(v.__ename__);
			} else {
				if(this.useCache && this.serializeRef(v)) {
					return;
				}
				this.buf.b += "o";
				this.serializeFields(v);
			}
			break;
		case 5:
			throw haxe_Exception.thrown("Cannot serialize function");
		case 6:
			var c = _g.c;
			if(c == String) {
				this.serializeString(v);
				return;
			}
			if(this.useCache && this.serializeRef(v)) {
				return;
			}
			switch(c) {
			case Array:
				var ucount = 0;
				this.buf.b += "a";
				var l = v["length"];
				var _g1 = 0;
				var _g2 = l;
				while(_g1 < _g2) {
					var i = _g1++;
					if(v[i] == null) {
						++ucount;
					} else {
						if(ucount > 0) {
							if(ucount == 1) {
								this.buf.b += "n";
							} else {
								this.buf.b += "u";
								this.buf.b += ucount == null ? "null" : "" + ucount;
							}
							ucount = 0;
						}
						this.serialize(v[i]);
					}
				}
				if(ucount > 0) {
					if(ucount == 1) {
						this.buf.b += "n";
					} else {
						this.buf.b += "u";
						this.buf.b += ucount == null ? "null" : "" + ucount;
					}
				}
				this.buf.b += "h";
				break;
			case Date:
				var d = v;
				this.buf.b += "v";
				this.buf.b += Std.string(d.getTime());
				break;
			case haxe_ds_IntMap:
				this.buf.b += "q";
				var v1 = v;
				var k = v1.keys();
				while(k.hasNext()) {
					var k1 = k.next();
					this.buf.b += ":";
					this.buf.b += k1 == null ? "null" : "" + k1;
					this.serialize(v1.h[k1]);
				}
				this.buf.b += "h";
				break;
			case haxe_ds_List:
				this.buf.b += "l";
				var v1 = v;
				var _g_head = v1.h;
				while(_g_head != null) {
					var val = _g_head.item;
					_g_head = _g_head.next;
					var i = val;
					this.serialize(i);
				}
				this.buf.b += "h";
				break;
			case haxe_ds_ObjectMap:
				this.buf.b += "M";
				var v1 = v;
				var k = v1.keys();
				while(k.hasNext()) {
					var k1 = k.next();
					var id = Reflect.field(k1,"__id__");
					Reflect.deleteField(k1,"__id__");
					this.serialize(k1);
					k1["__id__"] = id;
					this.serialize(v1.h[k1.__id__]);
				}
				this.buf.b += "h";
				break;
			case haxe_ds_StringMap:
				this.buf.b += "b";
				var v1 = v;
				var k = haxe_ds_StringMap.keysIterator(v1.h);
				while(k.hasNext()) {
					var k1 = k.next();
					this.serializeString(k1);
					this.serialize(v1.h[k1]);
				}
				this.buf.b += "h";
				break;
			case haxe_io_Bytes:
				var v1 = v;
				this.buf.b += "s";
				this.buf.b += Std.string(Math.ceil(v1.length * 8 / 6));
				this.buf.b += ":";
				var i = 0;
				var max = v1.length - 2;
				var b64 = haxe_Serializer.BASE64_CODES;
				if(b64 == null) {
					var this1 = new Array(haxe_Serializer.BASE64.length);
					b64 = this1;
					var _g1 = 0;
					var _g2 = haxe_Serializer.BASE64.length;
					while(_g1 < _g2) {
						var i1 = _g1++;
						b64[i1] = HxOverrides.cca(haxe_Serializer.BASE64,i1);
					}
					haxe_Serializer.BASE64_CODES = b64;
				}
				while(i < max) {
					var b1 = v1.b[i++];
					var b2 = v1.b[i++];
					var b3 = v1.b[i++];
					this.buf.b += String.fromCodePoint(b64[b1 >> 2]);
					this.buf.b += String.fromCodePoint(b64[(b1 << 4 | b2 >> 4) & 63]);
					this.buf.b += String.fromCodePoint(b64[(b2 << 2 | b3 >> 6) & 63]);
					this.buf.b += String.fromCodePoint(b64[b3 & 63]);
				}
				if(i == max) {
					var b1 = v1.b[i++];
					var b2 = v1.b[i++];
					this.buf.b += String.fromCodePoint(b64[b1 >> 2]);
					this.buf.b += String.fromCodePoint(b64[(b1 << 4 | b2 >> 4) & 63]);
					this.buf.b += String.fromCodePoint(b64[b2 << 2 & 63]);
				} else if(i == max + 1) {
					var b1 = v1.b[i++];
					this.buf.b += String.fromCodePoint(b64[b1 >> 2]);
					this.buf.b += String.fromCodePoint(b64[b1 << 4 & 63]);
				}
				break;
			default:
				if(this.useCache) {
					this.cache.pop();
				}
				if(v.hxSerialize != null) {
					this.buf.b += "C";
					this.serializeString(c.__name__);
					if(this.useCache) {
						this.cache.push(v);
					}
					v.hxSerialize(this);
					this.buf.b += "g";
				} else {
					this.buf.b += "c";
					this.serializeString(c.__name__);
					if(this.useCache) {
						this.cache.push(v);
					}
					this.serializeFields(v);
				}
			}
			break;
		case 7:
			var e = _g.e;
			if(this.useCache) {
				if(this.serializeRef(v)) {
					return;
				}
				this.cache.pop();
			}
			this.buf.b += Std.string(this.useEnumIndex ? "j" : "w");
			this.serializeString(e.__ename__);
			if(this.useEnumIndex) {
				this.buf.b += ":";
				this.buf.b += Std.string(v._hx_index);
			} else {
				var e = v;
				this.serializeString($hxEnums[e.__enum__].__constructs__[e._hx_index]);
			}
			this.buf.b += ":";
			var params = Type.enumParameters(v);
			this.buf.b += Std.string(params.length);
			var _g = 0;
			while(_g < params.length) {
				var p = params[_g];
				++_g;
				this.serialize(p);
			}
			if(this.useCache) {
				this.cache.push(v);
			}
			break;
		default:
			throw haxe_Exception.thrown("Cannot serialize " + Std.string(v));
		}
	}
	,__class__: haxe_Serializer
};
var haxe__$Template_TemplateExpr = $hxEnums["haxe._Template.TemplateExpr"] = { __ename__ : "haxe._Template.TemplateExpr", __constructs__ : ["OpVar","OpExpr","OpIf","OpStr","OpBlock","OpForeach","OpMacro"]
	,OpVar: ($_=function(v) { return {_hx_index:0,v:v,__enum__:"haxe._Template.TemplateExpr",toString:$estr}; },$_.__params__ = ["v"],$_)
	,OpExpr: ($_=function(expr) { return {_hx_index:1,expr:expr,__enum__:"haxe._Template.TemplateExpr",toString:$estr}; },$_.__params__ = ["expr"],$_)
	,OpIf: ($_=function(expr,eif,eelse) { return {_hx_index:2,expr:expr,eif:eif,eelse:eelse,__enum__:"haxe._Template.TemplateExpr",toString:$estr}; },$_.__params__ = ["expr","eif","eelse"],$_)
	,OpStr: ($_=function(str) { return {_hx_index:3,str:str,__enum__:"haxe._Template.TemplateExpr",toString:$estr}; },$_.__params__ = ["str"],$_)
	,OpBlock: ($_=function(l) { return {_hx_index:4,l:l,__enum__:"haxe._Template.TemplateExpr",toString:$estr}; },$_.__params__ = ["l"],$_)
	,OpForeach: ($_=function(expr,loop) { return {_hx_index:5,expr:expr,loop:loop,__enum__:"haxe._Template.TemplateExpr",toString:$estr}; },$_.__params__ = ["expr","loop"],$_)
	,OpMacro: ($_=function(name,params) { return {_hx_index:6,name:name,params:params,__enum__:"haxe._Template.TemplateExpr",toString:$estr}; },$_.__params__ = ["name","params"],$_)
};
var haxe__$Unserializer_DefaultResolver = function() {
};
$hxClasses["haxe._Unserializer.DefaultResolver"] = haxe__$Unserializer_DefaultResolver;
haxe__$Unserializer_DefaultResolver.__name__ = "haxe._Unserializer.DefaultResolver";
haxe__$Unserializer_DefaultResolver.prototype = {
	resolveClass: function(name) {
		return $hxClasses[name];
	}
	,resolveEnum: function(name) {
		return $hxEnums[name];
	}
	,__class__: haxe__$Unserializer_DefaultResolver
};
var haxe_Unserializer = function(buf) {
	this.buf = buf;
	this.length = buf.length;
	this.pos = 0;
	this.scache = [];
	this.cache = [];
	var r = haxe_Unserializer.DEFAULT_RESOLVER;
	if(r == null) {
		r = new haxe__$Unserializer_DefaultResolver();
		haxe_Unserializer.DEFAULT_RESOLVER = r;
	}
	this.resolver = r;
};
$hxClasses["haxe.Unserializer"] = haxe_Unserializer;
haxe_Unserializer.__name__ = "haxe.Unserializer";
haxe_Unserializer.initCodes = function() {
	var codes = [];
	var _g = 0;
	var _g1 = haxe_Unserializer.BASE64.length;
	while(_g < _g1) {
		var i = _g++;
		codes[haxe_Unserializer.BASE64.charCodeAt(i)] = i;
	}
	return codes;
};
haxe_Unserializer.run = function(v) {
	return new haxe_Unserializer(v).unserialize();
};
haxe_Unserializer.prototype = {
	readDigits: function() {
		var k = 0;
		var s = false;
		var fpos = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c != c) {
				break;
			}
			if(c == 45) {
				if(this.pos != fpos) {
					break;
				}
				s = true;
				this.pos++;
				continue;
			}
			if(c < 48 || c > 57) {
				break;
			}
			k = k * 10 + (c - 48);
			this.pos++;
		}
		if(s) {
			k *= -1;
		}
		return k;
	}
	,readFloat: function() {
		var p1 = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c != c) {
				break;
			}
			if(c >= 43 && c < 58 || c == 101 || c == 69) {
				this.pos++;
			} else {
				break;
			}
		}
		return parseFloat(HxOverrides.substr(this.buf,p1,this.pos - p1));
	}
	,unserializeObject: function(o) {
		while(true) {
			if(this.pos >= this.length) {
				throw haxe_Exception.thrown("Invalid object");
			}
			if(this.buf.charCodeAt(this.pos) == 103) {
				break;
			}
			var k = this.unserialize();
			if(typeof(k) != "string") {
				throw haxe_Exception.thrown("Invalid object key");
			}
			var v = this.unserialize();
			o[k] = v;
		}
		this.pos++;
	}
	,unserializeEnum: function(edecl,tag) {
		if(this.buf.charCodeAt(this.pos++) != 58) {
			throw haxe_Exception.thrown("Invalid enum format");
		}
		var nargs = this.readDigits();
		if(nargs == 0) {
			return Type.createEnum(edecl,tag);
		}
		var args = [];
		while(nargs-- > 0) args.push(this.unserialize());
		return Type.createEnum(edecl,tag,args);
	}
	,unserialize: function() {
		switch(this.buf.charCodeAt(this.pos++)) {
		case 65:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) {
				throw haxe_Exception.thrown("Class not found " + name);
			}
			return cl;
		case 66:
			var name = this.unserialize();
			var e = this.resolver.resolveEnum(name);
			if(e == null) {
				throw haxe_Exception.thrown("Enum not found " + name);
			}
			return e;
		case 67:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) {
				throw haxe_Exception.thrown("Class not found " + name);
			}
			var o = Object.create(cl.prototype);
			this.cache.push(o);
			o.hxUnserialize(this);
			if(this.buf.charCodeAt(this.pos++) != 103) {
				throw haxe_Exception.thrown("Invalid custom data");
			}
			return o;
		case 77:
			var h = new haxe_ds_ObjectMap();
			this.cache.push(h);
			var buf = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) {
				var s = this.unserialize();
				h.set(s,this.unserialize());
			}
			this.pos++;
			return h;
		case 82:
			var n = this.readDigits();
			if(n < 0 || n >= this.scache.length) {
				throw haxe_Exception.thrown("Invalid string reference");
			}
			return this.scache[n];
		case 97:
			var buf = this.buf;
			var a = [];
			this.cache.push(a);
			while(true) {
				var c = this.buf.charCodeAt(this.pos);
				if(c == 104) {
					this.pos++;
					break;
				}
				if(c == 117) {
					this.pos++;
					var n = this.readDigits();
					a[a.length + n - 1] = null;
				} else {
					a.push(this.unserialize());
				}
			}
			return a;
		case 98:
			var h = new haxe_ds_StringMap();
			this.cache.push(h);
			var buf = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) {
				var s = this.unserialize();
				var value = this.unserialize();
				h.h[s] = value;
			}
			this.pos++;
			return h;
		case 99:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) {
				throw haxe_Exception.thrown("Class not found " + name);
			}
			var o = Object.create(cl.prototype);
			this.cache.push(o);
			this.unserializeObject(o);
			return o;
		case 100:
			return this.readFloat();
		case 102:
			return false;
		case 105:
			return this.readDigits();
		case 106:
			var name = this.unserialize();
			var edecl = this.resolver.resolveEnum(name);
			if(edecl == null) {
				throw haxe_Exception.thrown("Enum not found " + name);
			}
			this.pos++;
			var index = this.readDigits();
			var tag = edecl.__constructs__.slice()[index];
			if(tag == null) {
				throw haxe_Exception.thrown("Unknown enum index " + name + "@" + index);
			}
			var e = this.unserializeEnum(edecl,tag);
			this.cache.push(e);
			return e;
		case 107:
			return NaN;
		case 108:
			var l = new haxe_ds_List();
			this.cache.push(l);
			var buf = this.buf;
			while(this.buf.charCodeAt(this.pos) != 104) l.add(this.unserialize());
			this.pos++;
			return l;
		case 109:
			return -Infinity;
		case 110:
			return null;
		case 111:
			var o = { };
			this.cache.push(o);
			this.unserializeObject(o);
			return o;
		case 112:
			return Infinity;
		case 113:
			var h = new haxe_ds_IntMap();
			this.cache.push(h);
			var buf = this.buf;
			var c = this.buf.charCodeAt(this.pos++);
			while(c == 58) {
				var i = this.readDigits();
				var value = this.unserialize();
				h.h[i] = value;
				c = this.buf.charCodeAt(this.pos++);
			}
			if(c != 104) {
				throw haxe_Exception.thrown("Invalid IntMap format");
			}
			return h;
		case 114:
			var n = this.readDigits();
			if(n < 0 || n >= this.cache.length) {
				throw haxe_Exception.thrown("Invalid reference");
			}
			return this.cache[n];
		case 115:
			var len = this.readDigits();
			var buf = this.buf;
			if(this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len) {
				throw haxe_Exception.thrown("Invalid bytes length");
			}
			var codes = haxe_Unserializer.CODES;
			if(codes == null) {
				codes = haxe_Unserializer.initCodes();
				haxe_Unserializer.CODES = codes;
			}
			var i = this.pos;
			var rest = len & 3;
			var size = (len >> 2) * 3 + (rest >= 2 ? rest - 1 : 0);
			var max = i + (len - rest);
			var bytes = new haxe_io_Bytes(new ArrayBuffer(size));
			var bpos = 0;
			while(i < max) {
				var c1 = codes[buf.charCodeAt(i++)];
				var c2 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c1 << 2 | c2 >> 4;
				var c3 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c2 << 4 | c3 >> 2;
				var c4 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c3 << 6 | c4;
			}
			if(rest >= 2) {
				var c1 = codes[buf.charCodeAt(i++)];
				var c2 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c1 << 2 | c2 >> 4;
				if(rest == 3) {
					var c3 = codes[buf.charCodeAt(i++)];
					bytes.b[bpos++] = c2 << 4 | c3 >> 2;
				}
			}
			this.pos += len;
			this.cache.push(bytes);
			return bytes;
		case 116:
			return true;
		case 118:
			var d;
			if(this.buf.charCodeAt(this.pos) >= 48 && this.buf.charCodeAt(this.pos) <= 57 && this.buf.charCodeAt(this.pos + 1) >= 48 && this.buf.charCodeAt(this.pos + 1) <= 57 && this.buf.charCodeAt(this.pos + 2) >= 48 && this.buf.charCodeAt(this.pos + 2) <= 57 && this.buf.charCodeAt(this.pos + 3) >= 48 && this.buf.charCodeAt(this.pos + 3) <= 57 && this.buf.charCodeAt(this.pos + 4) == 45) {
				d = HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));
				this.pos += 19;
			} else {
				d = new Date(this.readFloat());
			}
			this.cache.push(d);
			return d;
		case 119:
			var name = this.unserialize();
			var edecl = this.resolver.resolveEnum(name);
			if(edecl == null) {
				throw haxe_Exception.thrown("Enum not found " + name);
			}
			var e = this.unserializeEnum(edecl,this.unserialize());
			this.cache.push(e);
			return e;
		case 120:
			throw haxe_Exception.thrown(this.unserialize());
		case 121:
			var len = this.readDigits();
			if(this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len) {
				throw haxe_Exception.thrown("Invalid string length");
			}
			var s = HxOverrides.substr(this.buf,this.pos,len);
			this.pos += len;
			s = decodeURIComponent(s.split("+").join(" "));
			this.scache.push(s);
			return s;
		case 122:
			return 0;
		default:
		}
		this.pos--;
		throw haxe_Exception.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
	}
	,__class__: haxe_Unserializer
};
var haxe_ds_IntMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.IntMap"] = haxe_ds_IntMap;
haxe_ds_IntMap.__name__ = "haxe.ds.IntMap";
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	set: function(key,value) {
		this.h[key] = value;
	}
	,get: function(key) {
		return this.h[key];
	}
	,exists: function(key) {
		return this.h.hasOwnProperty(key);
	}
	,keys: function() {
		var a = [];
		for( var key in this.h ) if(this.h.hasOwnProperty(key)) a.push(key | 0);
		return new haxe_iterators_ArrayIterator(a);
	}
	,keyValueIterator: function() {
		return new haxe_iterators_MapKeyValueIterator(this);
	}
	,copy: function() {
		var copied = new haxe_ds_IntMap();
		var key = this.keys();
		while(key.hasNext()) {
			var key1 = key.next();
			copied.h[key1] = this.h[key1];
		}
		return copied;
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_List = function() {
	this.length = 0;
};
$hxClasses["haxe.ds.List"] = haxe_ds_List;
haxe_ds_List.__name__ = "haxe.ds.List";
haxe_ds_List.prototype = {
	add: function(item) {
		var x = new haxe_ds__$List_ListNode(item,null);
		if(this.h == null) {
			this.h = x;
		} else {
			this.q.next = x;
		}
		this.q = x;
		this.length++;
	}
	,push: function(item) {
		var x = new haxe_ds__$List_ListNode(item,this.h);
		this.h = x;
		if(this.q == null) {
			this.q = x;
		}
		this.length++;
	}
	,first: function() {
		if(this.h == null) {
			return null;
		} else {
			return this.h.item;
		}
	}
	,pop: function() {
		if(this.h == null) {
			return null;
		}
		var x = this.h.item;
		this.h = this.h.next;
		if(this.h == null) {
			this.q = null;
		}
		this.length--;
		return x;
	}
	,isEmpty: function() {
		return this.h == null;
	}
	,toString: function() {
		var s_b = "";
		var first = true;
		var l = this.h;
		s_b += "{";
		while(l != null) {
			if(first) {
				first = false;
			} else {
				s_b += ", ";
			}
			s_b += Std.string(Std.string(l.item));
			l = l.next;
		}
		s_b += "}";
		return s_b;
	}
	,__class__: haxe_ds_List
};
var haxe_ds__$List_ListNode = function(item,next) {
	this.item = item;
	this.next = next;
};
$hxClasses["haxe.ds._List.ListNode"] = haxe_ds__$List_ListNode;
haxe_ds__$List_ListNode.__name__ = "haxe.ds._List.ListNode";
haxe_ds__$List_ListNode.prototype = {
	__class__: haxe_ds__$List_ListNode
};
var haxe_ds_ObjectMap = function() {
	this.h = { __keys__ : { }};
};
$hxClasses["haxe.ds.ObjectMap"] = haxe_ds_ObjectMap;
haxe_ds_ObjectMap.__name__ = "haxe.ds.ObjectMap";
haxe_ds_ObjectMap.__interfaces__ = [haxe_IMap];
haxe_ds_ObjectMap.prototype = {
	set: function(key,value) {
		var id = key.__id__;
		if(id == null) {
			id = (key.__id__ = $global.$haxeUID++);
		}
		this.h[id] = value;
		this.h.__keys__[id] = key;
	}
	,get: function(key) {
		return this.h[key.__id__];
	}
	,exists: function(key) {
		return this.h.__keys__[key.__id__] != null;
	}
	,keys: function() {
		var a = [];
		for( var key in this.h.__keys__ ) {
		if(this.h.hasOwnProperty(key)) {
			a.push(this.h.__keys__[key]);
		}
		}
		return new haxe_iterators_ArrayIterator(a);
	}
	,keyValueIterator: function() {
		return new haxe_iterators_MapKeyValueIterator(this);
	}
	,copy: function() {
		var copied = new haxe_ds_ObjectMap();
		var key = this.keys();
		while(key.hasNext()) {
			var key1 = key.next();
			copied.set(key1,this.h[key1.__id__]);
		}
		return copied;
	}
	,__class__: haxe_ds_ObjectMap
};
var haxe_ds_StringMap = function() {
	this.h = Object.create(null);
};
$hxClasses["haxe.ds.StringMap"] = haxe_ds_StringMap;
haxe_ds_StringMap.__name__ = "haxe.ds.StringMap";
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.keysIterator = function(h) {
	var keys = Object.keys(h);
	var len = keys.length;
	var idx = 0;
	return { hasNext : function() {
		return idx < len;
	}, next : function() {
		idx += 1;
		return keys[idx - 1];
	}};
};
haxe_ds_StringMap.valueIterator = function(h) {
	var keys = Object.keys(h);
	var len = keys.length;
	var idx = 0;
	return { hasNext : function() {
		return idx < len;
	}, next : function() {
		idx += 1;
		return h[keys[idx - 1]];
	}};
};
haxe_ds_StringMap.kvIterator = function(h) {
	var keys = Object.keys(h);
	var len = keys.length;
	var idx = 0;
	return { hasNext : function() {
		return idx < len;
	}, next : function() {
		idx += 1;
		var k = keys[idx - 1];
		return { key : k, value : h[k]};
	}};
};
haxe_ds_StringMap.createCopy = function(h) {
	var copy = new haxe_ds_StringMap();
	for (var key in h) copy.h[key] = h[key];
	return copy;
};
haxe_ds_StringMap.prototype = {
	exists: function(key) {
		return Object.prototype.hasOwnProperty.call(this.h,key);
	}
	,get: function(key) {
		return this.h[key];
	}
	,set: function(key,value) {
		this.h[key] = value;
	}
	,keys: function() {
		return haxe_ds_StringMap.keysIterator(this.h);
	}
	,keyValueIterator: function() {
		return haxe_ds_StringMap.kvIterator(this.h);
	}
	,copy: function() {
		return haxe_ds_StringMap.createCopy(this.h);
	}
	,__class__: haxe_ds_StringMap
};
var haxe_io_Error = $hxEnums["haxe.io.Error"] = { __ename__ : "haxe.io.Error", __constructs__ : ["Blocked","Overflow","OutsideBounds","Custom"]
	,Blocked: {_hx_index:0,__enum__:"haxe.io.Error",toString:$estr}
	,Overflow: {_hx_index:1,__enum__:"haxe.io.Error",toString:$estr}
	,OutsideBounds: {_hx_index:2,__enum__:"haxe.io.Error",toString:$estr}
	,Custom: ($_=function(e) { return {_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}; },$_.__params__ = ["e"],$_)
};
var haxe_iterators_MapKeyValueIterator = function(map) {
	this.map = map;
	this.keys = map.keys();
};
$hxClasses["haxe.iterators.MapKeyValueIterator"] = haxe_iterators_MapKeyValueIterator;
haxe_iterators_MapKeyValueIterator.__name__ = "haxe.iterators.MapKeyValueIterator";
haxe_iterators_MapKeyValueIterator.prototype = {
	hasNext: function() {
		return this.keys.hasNext();
	}
	,next: function() {
		var key = this.keys.next();
		return { value : this.map.get(key), key : key};
	}
	,__class__: haxe_iterators_MapKeyValueIterator
};
var mon_$calc_action_IAction = function() { };
$hxClasses["mon_calc.action.IAction"] = mon_$calc_action_IAction;
mon_$calc_action_IAction.__name__ = "mon_calc.action.IAction";
mon_$calc_action_IAction.__isInterface__ = true;
mon_$calc_action_IAction.prototype = {
	__class__: mon_$calc_action_IAction
};
var mon_$calc_action_MonMoveAction = function(bSide,iMoveId) {
	this._bSide = bSide;
	this._iMoveId = iMoveId;
};
$hxClasses["mon_calc.action.MonMoveAction"] = mon_$calc_action_MonMoveAction;
mon_$calc_action_MonMoveAction.__name__ = "mon_calc.action.MonMoveAction";
mon_$calc_action_MonMoveAction.__interfaces__ = [mon_$calc_action_IAction];
mon_$calc_action_MonMoveAction.prototype = {
	getSide: function() {
		return this._bSide;
	}
	,getMove: function(oBattle) {
		return oBattle.getCurrentMon(this._bSide).getMove(this._iMoveId);
	}
	,validate: function(oBattle) {
		var oMon = oBattle.getCurrentMon(this._bSide);
		if(oMon.getMana(this._iMoveId) == 0) {
			return false;
		}
		return true;
	}
	,process: function(oGame) {
	}
	,__class__: mon_$calc_action_MonMoveAction
};
var mon_$calc_action_MonForcedAction = function(bSide,oMove) {
	if(oMove == null) {
		throw haxe_Exception.thrown("!!!");
	}
	this._oMove = oMove;
	mon_$calc_action_MonMoveAction.call(this,this._bSide,0);
};
$hxClasses["mon_calc.action.MonForcedAction"] = mon_$calc_action_MonForcedAction;
mon_$calc_action_MonForcedAction.__name__ = "mon_calc.action.MonForcedAction";
mon_$calc_action_MonForcedAction.__super__ = mon_$calc_action_MonMoveAction;
mon_$calc_action_MonForcedAction.prototype = $extend(mon_$calc_action_MonMoveAction.prototype,{
	getMove: function(oBattle) {
		return this._oMove;
	}
	,validate: function(oBattle) {
		return true;
	}
	,__class__: mon_$calc_action_MonForcedAction
});
var mon_$calc_action_MonSwitch = function(bSide,iMonIndex) {
	this._bSide = bSide;
	this._iMonIndex = iMonIndex;
};
$hxClasses["mon_calc.action.MonSwitch"] = mon_$calc_action_MonSwitch;
mon_$calc_action_MonSwitch.__name__ = "mon_calc.action.MonSwitch";
mon_$calc_action_MonSwitch.__interfaces__ = [mon_$calc_action_IAction];
mon_$calc_action_MonSwitch.prototype = {
	getSide: function() {
		return this._bSide;
	}
	,getMonIndex: function() {
		return this._iMonIndex;
	}
	,validate: function(oBattle) {
		var oTeam = oBattle.getTeam(this._bSide);
		var oMon = oTeam.getMon(this._iMonIndex);
		if(oMon == null || oMon.getHealth() <= 0) {
			return false;
		}
		return true;
	}
	,process: function(oBattle) {
		throw haxe_Exception.thrown("!!!");
	}
	,__class__: mon_$calc_action_MonSwitch
};
var mon_$calc_battle_$aspect_IAspect = function() { };
$hxClasses["mon_calc.battle_aspect.IAspect"] = mon_$calc_battle_$aspect_IAspect;
mon_$calc_battle_$aspect_IAspect.__name__ = "mon_calc.battle_aspect.IAspect";
mon_$calc_battle_$aspect_IAspect.__isInterface__ = true;
mon_$calc_battle_$aspect_IAspect.prototype = {
	__class__: mon_$calc_battle_$aspect_IAspect
};
var mon_$calc_aspect_IStackable = function() { };
$hxClasses["mon_calc.aspect.IStackable"] = mon_$calc_aspect_IStackable;
mon_$calc_aspect_IStackable.__name__ = "mon_calc.aspect.IStackable";
mon_$calc_aspect_IStackable.__isInterface__ = true;
mon_$calc_aspect_IStackable.__interfaces__ = [mon_$calc_battle_$aspect_IAspect];
mon_$calc_aspect_IStackable.prototype = {
	__class__: mon_$calc_aspect_IStackable
};
var mon_$calc_aspect_core_AAspect = function(aEvent,aFilter,aFlag,iFade) {
	this._aEventType = aEvent;
	this._aFilter = aFilter;
	this._aFlag = aFlag;
	this._iFade = iFade;
	if(this._iFade != null) {
		this._aEventType.push(mon_$calc_ds_EEventType.OnTurnEnd);
	}
};
$hxClasses["mon_calc.aspect.core.AAspect"] = mon_$calc_aspect_core_AAspect;
mon_$calc_aspect_core_AAspect.__name__ = "mon_calc.aspect.core.AAspect";
mon_$calc_aspect_core_AAspect.__interfaces__ = [mon_$calc_battle_$aspect_IAspect];
mon_$calc_aspect_core_AAspect.prototype = {
	getLabel: function() {
		var c = js_Boot.getClass(this);
		return c.__name__;
	}
	,getEvent: function() {
		return this._aEventType;
	}
	,getFadeCount: function() {
		return this._iFade;
	}
	,hasFlag: function(e) {
		return this._aFlag.indexOf(e) != -1;
	}
	,getPriority: function() {
		return "5";
	}
	,getMainClass: function() {
		return js_Boot.getClass(this);
	}
	,validate: function(oContext) {
		var oEvent = oContext.event;
		if(this._aEventType.indexOf(oEvent.type) == -1) {
			return false;
		}
		var _g = 0;
		var _g1 = this._aFilter;
		while(_g < _g1.length) {
			var oFilter = _g1[_g];
			++_g;
			switch(oFilter._hx_index) {
			case 0:
				if(oEvent.type == mon_$calc_ds_EEventType.OnAttack) {
					throw haxe_Exception.thrown("!!!");
				}
				if(oEvent.type == mon_$calc_ds_EEventType.OnStatCalc && oContext.owner != oContext.event.mon) {
					return false;
				}
				if(oEvent.type == mon_$calc_ds_EEventType.OnSwitchOut && oContext.owner != oContext.event.mon) {
					return false;
				}
				if([mon_$calc_ds_EEventType.OnAspectEntryPre,mon_$calc_ds_EEventType.OnAspectEntryPost,mon_$calc_ds_EEventType.OnAspectExecutePre,mon_$calc_ds_EEventType.OnAspectExecutePost,mon_$calc_ds_EEventType.OnAffinityCalc].indexOf(oEvent.type) != -1 && oContext.owner != oContext.target) {
					return false;
				}
				break;
			case 1:
				if(oEvent.type == mon_$calc_ds_EEventType.OnStatCalc && oContext.side != oContext.event.side) {
					return false;
				}
				if(oEvent.type == mon_$calc_ds_EEventType.OnSwitchIn && oContext.side != oContext.event.side) {
					return false;
				}
				break;
			case 2:
				if(oEvent.type == mon_$calc_ds_EEventType.OnSwitchOut && oContext.side == oContext.event.side) {
					return false;
				}
				break;
			case 3:
				if([mon_$calc_ds_EEventType.OnAttack,mon_$calc_ds_EEventType.OnDamageCalc,mon_$calc_ds_EEventType.OnDamagePre].indexOf(oEvent.type) != -1 && oContext.mon != oContext.event.mon_att) {
					return false;
				}
				break;
			case 4:
				if(oEvent.type == mon_$calc_ds_EEventType.OnDamageCalc && oContext.side != oContext.event.def_side) {
					return false;
				}
				break;
			case 5:
				if(oEvent.type == mon_$calc_ds_EEventType.OnDamageCalc && oContext.owner != Reflect.field(oContext.event,"mon_def")) {
					return false;
				}
				if(oEvent.type == mon_$calc_ds_EEventType.OnDamagePre && oContext.owner != Reflect.field(oContext.event,"target")) {
					return false;
				}
				break;
			case 6:
				if(Object.prototype.hasOwnProperty.call(oContext,"target")) {
					return false;
				}
				if(oContext.side == oContext.side) {
					return false;
				}
				break;
			case 7:
				if(Object.prototype.hasOwnProperty.call(oContext,"target")) {
					return false;
				}
				if(oContext.mon != oContext.target) {
					return false;
				}
				break;
			case 8:
				if(!oContext.battle.hasAspectByClass(mon_$calc_battle_$aspect_weather_Rain)) {
					return false;
				}
				break;
			case 10:
				if(!oContext.battle.hasAspectByClass(mon_$calc_aspect_terrain_ElectricTerrain)) {
					return false;
				}
				break;
			case 19:
				if([mon_$calc_ds_EEventType.OnDamageCalc,mon_$calc_ds_EEventType.OnDamagePost,mon_$calc_ds_EEventType.OnDamagePre].indexOf(oEvent.type) == -1) {
					return false;
				}
				throw haxe_Exception.thrown("not implemented");
			default:
				throw haxe_Exception.thrown("not implemented");
			}
		}
		return true;
	}
	,process: function(o) {
		switch(o.event.type._hx_index) {
		case 0:
			this.onAttack(o,o.event);
			return;
		case 1:
			this.onTurnStart(o);
			return;
		case 2:
			this.onAffinityCalc(o,o.event);
			return;
		case 3:
			this.onStatCalc(o,o.event);
			return;
		case 4:
			this.onMoveCalc(o,o.event);
			return;
		case 5:
			this.onAttack(o,o.event);
			return;
		case 8:
			this.onDamageCalc(o,o.event);
			return;
		case 9:
			this.onDamagePre(o,o.event);
			return;
		case 10:
			this.onDamagePost(o,o.event);
			return;
		case 11:
			this.onAspectEntryPre(o,o.event);
			return;
		case 12:
			this.onAspectEntryPost(o,o.event);
			return;
		case 13:
			this.onAspectExecutePre(o,o.event);
			return;
		case 14:
			this.onAspectExecutePost(o,o.event);
			return;
		case 16:
			this.onSwitchIn(o,o.event);
			return;
		case 17:
			this.onSwitchOut(o,o.event);
			return;
		case 18:
			this.onTurnEnd(o);
			return;
		default:
		}
		throw haxe_Exception.thrown("!!!");
	}
	,onTurnStart: function(o) {
		return;
	}
	,onTurnEnd: function(o) {
		if(this._iFade == null) {
			return;
		}
		if(this._iFade <= 0) {
			o.processor.removeAspect(o.owner,this,this);
		}
		this._iFade--;
	}
	,onStatCalc: function(oContext,oEvent) {
		return;
	}
	,onAttack: function(oContext,oEvent) {
		return;
	}
	,onMoveCalc: function(oContext,oEvent) {
		return;
	}
	,onAffinityCalc: function(oContext,oEvent) {
		return;
	}
	,onDamageCalc: function(oContext,oEvent) {
		return;
	}
	,onDamagePre: function(oContext,oEvent) {
		return;
	}
	,onDamagePost: function(oContext,oEvent) {
		return;
	}
	,onActionPrompt: function(oContext,oEvent) {
		return null;
	}
	,onAspectEntryPre: function(oContext,oEvent) {
		return;
	}
	,onAspectEntryPost: function(oContext,oEvent) {
		return;
	}
	,onAspectExecutePre: function(oContext,oEvent) {
		return;
	}
	,onAspectExecutePost: function(oContext,oEvent) {
		return;
	}
	,onSwitchIn: function(oContext,oEvent) {
		return;
	}
	,onSwitchOut: function(oContext,oEvent) {
		return;
	}
	,__class__: mon_$calc_aspect_core_AAspect
};
var mon_$calc_aspect_core_IAspectBearer = function() { };
$hxClasses["mon_calc.aspect.core.IAspectBearer"] = mon_$calc_aspect_core_IAspectBearer;
mon_$calc_aspect_core_IAspectBearer.__name__ = "mon_calc.aspect.core.IAspectBearer";
mon_$calc_aspect_core_IAspectBearer.__isInterface__ = true;
mon_$calc_aspect_core_IAspectBearer.prototype = {
	__class__: mon_$calc_aspect_core_IAspectBearer
};
var mon_$calc_aspect_core_AAspectBearer = function(aAspect) {
	this._aAspect = aAspect == null ? [] : aAspect;
	this._mCacheByClass = new haxe_ds_StringMap();
};
$hxClasses["mon_calc.aspect.core.AAspectBearer"] = mon_$calc_aspect_core_AAspectBearer;
mon_$calc_aspect_core_AAspectBearer.__name__ = "mon_calc.aspect.core.AAspectBearer";
mon_$calc_aspect_core_AAspectBearer.__interfaces__ = [mon_$calc_aspect_core_IAspectBearer];
mon_$calc_aspect_core_AAspectBearer.prototype = {
	getAspectOneByClass: function(oClass) {
		var _g = 0;
		var _g1 = this.getAspectAr();
		while(_g < _g1.length) {
			var o = _g1[_g];
			++_g;
			if(js_Boot.__instanceof(o,oClass)) {
				return o;
			}
		}
		return null;
	}
	,getAspectByClass: function(oClass) {
		var s = oClass.__name__;
		if(!Object.prototype.hasOwnProperty.call(this._mCacheByClass.h,s)) {
			var _this = this._mCacheByClass;
			var _g = [];
			var _g1 = 0;
			var _g2 = this._aAspect;
			while(_g1 < _g2.length) {
				var v = _g2[_g1];
				++_g1;
				if(js_Boot.__instanceof(v,oClass)) {
					_g.push(v);
				}
			}
			_this.h[s] = _g;
		}
		return this._mCacheByClass.h[s];
	}
	,hasAspect: function(o) {
		return this._aAspect.indexOf(o) != -1;
	}
	,getAspectAr: function() {
		return this._aAspect;
	}
	,hasAspectByClass: function(oClass) {
		return this.getAspectOneByClass(oClass) != null;
	}
	,getAspectByEvent: function(oContext) {
		var _g = [];
		var _g1 = 0;
		var _g2 = this.getAspectAr();
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(v.getEvent().indexOf(oContext.event.type) != -1) {
				_g.push(v);
			}
		}
		var _this = _g;
		var result = new Array(_this.length);
		var _g = 0;
		var _g1 = _this.length;
		while(_g < _g1) {
			var i = _g++;
			result[i] = { context : oContext, aspect : _this[i]};
		}
		var _g = [];
		var _g1 = 0;
		var _g2 = result;
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(v.aspect.validate(v.context)) {
				_g.push(v);
			}
		}
		return _g;
	}
	,addAspect: function(o) {
		this._aAspect.push(o);
		this._mCacheByClass.h = Object.create(null);
	}
	,removeAspect: function(oAspect) {
		this._mCacheByClass.h = Object.create(null);
		return HxOverrides.remove(this._aAspect,oAspect);
	}
	,__class__: mon_$calc_aspect_core_AAspectBearer
};
var mon_$calc_aspect_terrain_ATerrain = function(aEvent,aFilter,aFlag,iFade) {
	mon_$calc_aspect_core_AAspect.call(this,aEvent,aFilter,aFlag,iFade);
};
$hxClasses["mon_calc.aspect.terrain.ATerrain"] = mon_$calc_aspect_terrain_ATerrain;
mon_$calc_aspect_terrain_ATerrain.__name__ = "mon_calc.aspect.terrain.ATerrain";
mon_$calc_aspect_terrain_ATerrain.__interfaces__ = [mon_$calc_aspect_IStackable];
mon_$calc_aspect_terrain_ATerrain.__super__ = mon_$calc_aspect_core_AAspect;
mon_$calc_aspect_terrain_ATerrain.prototype = $extend(mon_$calc_aspect_core_AAspect.prototype,{
	getMainClass: function() {
		return mon_$calc_aspect_terrain_ATerrain;
	}
	,addStack: function(oProcessor,oTarget,oAspect) {
		oTarget.removeAspect(this);
		oTarget.addAspect(oAspect);
	}
	,__class__: mon_$calc_aspect_terrain_ATerrain
});
var mon_$calc_aspect_terrain_ElectricTerrain = function() {
	mon_$calc_aspect_terrain_ATerrain.call(this,[mon_$calc_ds_EEventType.OnDamageCalc,mon_$calc_ds_EEventType.OnTurnStart],[],[],5);
};
$hxClasses["mon_calc.aspect.terrain.ElectricTerrain"] = mon_$calc_aspect_terrain_ElectricTerrain;
mon_$calc_aspect_terrain_ElectricTerrain.__name__ = "mon_calc.aspect.terrain.ElectricTerrain";
mon_$calc_aspect_terrain_ElectricTerrain.__super__ = mon_$calc_aspect_terrain_ATerrain;
mon_$calc_aspect_terrain_ElectricTerrain.prototype = $extend(mon_$calc_aspect_terrain_ATerrain.prototype,{
	onDamageCalc: function(oContext,oEvent) {
		if(oEvent.damage.getHitType() == 5) {
			oEvent.factor *= 1.5;
		}
	}
	,onTurnStart: function(oContext) {
		var aMon = [oContext.battle.getCurrentMon(true),oContext.battle.getCurrentMon(false)];
		var _g = 0;
		while(_g < aMon.length) {
			var oMon = aMon[_g];
			++_g;
			if(!mon_$calc_tool_MonTool.isGrounded(oMon) || mon_$calc_tool_MonTool.isUnderground(oMon)) {
				continue;
			}
			var oSleep = oMon.getAspectOneByClass(mon_$calc_battle_$aspect_status_SleepStatus);
			if(oSleep == null) {
				continue;
			}
			oContext.processor.removeAspect(oMon,oSleep,this);
		}
	}
	,onAspectEntryPre: function(oContext,oEvent) {
		if(!((oEvent.aspect) instanceof mon_$calc_battle_$aspect_status_SleepStatus)) {
			return;
		}
		if(!((oEvent.aspect) instanceof mon_$calc_battle_$aspect_status_SleepStatus)) {
			return;
		}
		if(!((oEvent.target) instanceof mon_$calc_entity_Mon)) {
			return;
		}
		var oTarget = js_Boot.__cast(oEvent.target , mon_$calc_entity_Mon);
		if(!mon_$calc_tool_MonTool.isGrounded(oTarget) || mon_$calc_tool_MonTool.isUnderground(oTarget)) {
			return;
		}
		oEvent.prevent_default = true;
	}
	,__class__: mon_$calc_aspect_terrain_ElectricTerrain
});
var mon_$calc_battle_$aspect_IMainStatus = function() { };
$hxClasses["mon_calc.battle_aspect.IMainStatus"] = mon_$calc_battle_$aspect_IMainStatus;
mon_$calc_battle_$aspect_IMainStatus.__name__ = "mon_calc.battle_aspect.IMainStatus";
mon_$calc_battle_$aspect_IMainStatus.__isInterface__ = true;
mon_$calc_battle_$aspect_IMainStatus.__interfaces__ = [mon_$calc_battle_$aspect_IAspect];
var mon_$calc_battle_$aspect_StatModifier = function(mStat) {
	mon_$calc_aspect_core_AAspect.call(this,[mon_$calc_ds_EEventType.OnStatCalc],[],[]);
	this.reset();
	if(mStat != null) {
		this._addStat(mStat);
	}
};
$hxClasses["mon_calc.battle_aspect.StatModifier"] = mon_$calc_battle_$aspect_StatModifier;
mon_$calc_battle_$aspect_StatModifier.__name__ = "mon_calc.battle_aspect.StatModifier";
mon_$calc_battle_$aspect_StatModifier.__interfaces__ = [mon_$calc_aspect_IStackable];
mon_$calc_battle_$aspect_StatModifier.__super__ = mon_$calc_aspect_core_AAspect;
mon_$calc_battle_$aspect_StatModifier.prototype = $extend(mon_$calc_aspect_core_AAspect.prototype,{
	getPriority: function() {
		return "0";
	}
	,onStatCalc: function(oContext,oEvent) {
		var _g = oEvent.stat.keyValueIterator();
		while(_g.hasNext()) {
			var _g1 = _g.next();
			var stat = _g1.key;
			var value = _g1.value;
			oEvent.stat.set(stat,this._calcStat(stat,value));
		}
	}
	,get: function(eStat) {
		return this._mStat.get(eStat);
	}
	,addModifier: function(eStat,iStageDelta) {
		this._mStat.set(eStat,mon_$calc_tool_IntTool.clamp(iStageDelta + this._mStat.get(eStat),-6,6));
	}
	,addStack: function(oProcessor,oTarget,oAspect) {
		if(!((oAspect) instanceof mon_$calc_battle_$aspect_StatModifier)) {
			throw haxe_Exception.thrown("!!!");
		}
		var oAdd = oAspect;
		this._addStat(oAdd._mStat);
	}
	,onStatCalculation: function(m) {
	}
	,reset: function() {
		var _g = new haxe_ds_IntMap();
		_g.set(1,0);
		_g.set(2,0);
		_g.set(3,0);
		_g.set(4,0);
		_g.set(5,0);
		_g.set(6,0);
		_g.set(7,0);
		this._mStat = _g;
	}
	,_addStat: function(mStat) {
		var _g = mStat.keyValueIterator();
		while(_g.hasNext()) {
			var _g1 = _g.next();
			var k = _g1.key;
			var v = _g1.value;
			this.addModifier(k,v);
		}
	}
	,_calcStat: function(eType,iEffectiveStat) {
		if([6,7].indexOf(eType) != -1) {
			return this._mStat.get(eType);
		}
		return Math.floor(iEffectiveStat * this._getMultiplier(eType,this.coal(this._mStat.get(eType))));
	}
	,coal: function(x) {
		if(x == null) {
			return 0;
		}
		return x;
	}
	,_getMultiplier: function(eType,iStage) {
		switch(iStage) {
		case -6:
			return 0.25;
		case -5:
			return 0.2857142857142857;
		case -4:
			return 0.33333333333333331;
		case -3:
			return 0.4;
		case -2:
			return 0.5;
		case -1:
			return 0.66666666666666663;
		case 0:
			return 1;
		case 1:
			return 1.5;
		case 2:
			return 2;
		case 3:
			return 2.5;
		case 4:
			return 3;
		case 5:
			return 3.5;
		case 6:
			return 4;
		}
		throw haxe_Exception.thrown("!!!");
	}
	,__class__: mon_$calc_battle_$aspect_StatModifier
});
var mon_$calc_battle_$aspect_status_AMainStatus = function(aEvent,aFilter,aFlag,iFade) {
	mon_$calc_aspect_core_AAspect.call(this,aEvent,aFilter,aFlag,iFade);
};
$hxClasses["mon_calc.battle_aspect.status.AMainStatus"] = mon_$calc_battle_$aspect_status_AMainStatus;
mon_$calc_battle_$aspect_status_AMainStatus.__name__ = "mon_calc.battle_aspect.status.AMainStatus";
mon_$calc_battle_$aspect_status_AMainStatus.__super__ = mon_$calc_aspect_core_AAspect;
mon_$calc_battle_$aspect_status_AMainStatus.prototype = $extend(mon_$calc_aspect_core_AAspect.prototype,{
	getMainClass: function() {
		return mon_$calc_battle_$aspect_status_AMainStatus;
	}
	,__class__: mon_$calc_battle_$aspect_status_AMainStatus
});
var mon_$calc_battle_$aspect_status_SleepStatus = function(iTurn) {
	mon_$calc_battle_$aspect_status_AMainStatus.call(this,[mon_$calc_ds_EEventType.OnAttack],[mon_$calc_ds_EEventFilter.Dealing],[],iTurn);
};
$hxClasses["mon_calc.battle_aspect.status.SleepStatus"] = mon_$calc_battle_$aspect_status_SleepStatus;
mon_$calc_battle_$aspect_status_SleepStatus.__name__ = "mon_calc.battle_aspect.status.SleepStatus";
mon_$calc_battle_$aspect_status_SleepStatus.__super__ = mon_$calc_battle_$aspect_status_AMainStatus;
mon_$calc_battle_$aspect_status_SleepStatus.prototype = $extend(mon_$calc_battle_$aspect_status_AMainStatus.prototype,{
	getPriority: function() {
		return String.fromCodePoint(1);
	}
	,onAttack: function(oContext,oEvent) {
		oEvent.turnover = true;
		oContext.processor.log("TOTO is asleep");
	}
	,__class__: mon_$calc_battle_$aspect_status_SleepStatus
});
var mon_$calc_battle_$aspect_weather_AWeather = function(aEvent,aFilter,aFlag,iFade) {
	mon_$calc_aspect_core_AAspect.call(this,aEvent,aFilter,aFlag,iFade);
};
$hxClasses["mon_calc.battle_aspect.weather.AWeather"] = mon_$calc_battle_$aspect_weather_AWeather;
mon_$calc_battle_$aspect_weather_AWeather.__name__ = "mon_calc.battle_aspect.weather.AWeather";
mon_$calc_battle_$aspect_weather_AWeather.__interfaces__ = [mon_$calc_aspect_IStackable];
mon_$calc_battle_$aspect_weather_AWeather.__super__ = mon_$calc_aspect_core_AAspect;
mon_$calc_battle_$aspect_weather_AWeather.prototype = $extend(mon_$calc_aspect_core_AAspect.prototype,{
	getMainClass: function() {
		return mon_$calc_battle_$aspect_weather_AWeather;
	}
	,addStack: function(oProcessor,oTarget,oAspect) {
		oTarget.removeAspect(this);
		oTarget.addAspect(oAspect);
	}
	,__class__: mon_$calc_battle_$aspect_weather_AWeather
});
var mon_$calc_battle_$aspect_weather_Rain = function() {
	mon_$calc_battle_$aspect_weather_AWeather.call(this,[mon_$calc_ds_EEventType.OnDamageCalc],[],[],5);
};
$hxClasses["mon_calc.battle_aspect.weather.Rain"] = mon_$calc_battle_$aspect_weather_Rain;
mon_$calc_battle_$aspect_weather_Rain.__name__ = "mon_calc.battle_aspect.weather.Rain";
mon_$calc_battle_$aspect_weather_Rain.__super__ = mon_$calc_battle_$aspect_weather_AWeather;
mon_$calc_battle_$aspect_weather_Rain.prototype = $extend(mon_$calc_battle_$aspect_weather_AWeather.prototype,{
	onDamageCalc: function(oContext,oEvent) {
		var oDamage = oEvent.damage;
		if(oDamage.getHitType() == 3) {
			oEvent.factor *= 1.5;
		}
		if(oDamage.getHitType() == 2) {
			oEvent.factor *= 0.5;
		}
	}
	,__class__: mon_$calc_battle_$aspect_weather_Rain
});
var mon_$calc_core_BattleProcessor = function(oBattle,oRandCallback,oRedTeamCallback,oBlueTeamCallback) {
	this._oBattle = oBattle;
	this._oRandCallback = oRandCallback;
	this._oRedTeamCallback = oRedTeamCallback;
	this._oBlueTeamCallback = oBlueTeamCallback;
	this._aLog = [];
	this._oCurrentActionRed = null;
	this._oCurrentActionBlue = null;
};
$hxClasses["mon_calc.core.BattleProcessor"] = mon_$calc_core_BattleProcessor;
mon_$calc_core_BattleProcessor.__name__ = "mon_calc.core.BattleProcessor";
mon_$calc_core_BattleProcessor.prototype = {
	getLog: function() {
		return this._aLog;
	}
	,getMonSide: function(oMon) {
		if(this._oBattle.getCurrentMon(true) == oMon) {
			return true;
		}
		if(this._oBattle.getCurrentMon(false) == oMon) {
			return false;
		}
		throw haxe_Exception.thrown("!!");
	}
	,getCurrentMonStat: function(oMon) {
		var oEventContext = { type : mon_$calc_ds_EEventType.OnStatCalc, side : this.getMonSide(oMon), mon : oMon, stat : oMon.getStatEffectiveMap()};
		this._trigger(oEventContext);
		return oEventContext.stat;
	}
	,getChance: function(fChance) {
		if(fChance >= 1.0) {
			this.log("Guarantee chance " + fChance * 100);
			return true;
		}
		return this._oRandCallback(this,fChance);
	}
	,getChanceAr: function(aChance) {
		var a = aChance.slice();
		while(a.length != 1) {
			if(this.getChance(1 / a.length)) {
				return a[0];
			}
			a.shift();
		}
		return a[0];
	}
	,generatePlayerAction: function(bSide) {
		var _gthis = this;
		var oMon = this._oBattle.getCurrentMon(bSide);
		var aAction = [];
		aAction.push(new mon_$calc_action_MonMoveAction(bSide,0));
		aAction.push(new mon_$calc_action_MonMoveAction(bSide,1));
		aAction.push(new mon_$calc_action_MonMoveAction(bSide,2));
		aAction.push(new mon_$calc_action_MonMoveAction(bSide,3));
		var _g = [];
		var _g1 = 0;
		var _g2 = aAction;
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(v.validate(_gthis._oBattle)) {
				_g.push(v);
			}
		}
		aAction = _g;
		if(aAction.length == 0) {
			aAction.push(new mon_$calc_action_MonForcedAction(bSide,oMon.getType().getDefaultMove()));
		}
		aAction.concat(this.generatePlayerSwitchAction(bSide));
		var oActionPromptContext = { type : mon_$calc_ds_EEventType.OnActionPrompt, action : aAction, side : bSide};
		this._trigger(oActionPromptContext);
		return oActionPromptContext.action;
	}
	,generatePlayerSwitchAction: function(bSide) {
		var _gthis = this;
		var oCurrent = this._oBattle.getCurrentMon(bSide);
		var oTeam = this._oBattle.getTeam(bSide);
		var aAction = [];
		var _g = 0;
		var _g1 = oTeam.getMonAr().length;
		while(_g < _g1) {
			var i = _g++;
			if(oCurrent != oTeam.getMon(i)) {
				aAction.push(new mon_$calc_action_MonSwitch(bSide,i));
			}
		}
		var _g = [];
		var _g1 = 0;
		var _g2 = aAction;
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(v.validate(_gthis._oBattle)) {
				_g.push(v);
			}
		}
		return _g;
	}
	,isDone: function() {
		return this.getVictor() != null;
	}
	,getVictor: function() {
		var bRed = this._oBattle.getTeamRed().hasValidMon();
		var bBlue = this._oBattle.getTeamBlue().hasValidMon();
		if(!bRed && !bBlue) {
			throw haxe_Exception.thrown("Draw, shoult not happen");
		}
		if(!bRed) {
			return true;
		}
		if(!bBlue) {
			return false;
		}
		return null;
	}
	,log: function(s) {
		this._aLog.push(s);
		return this;
	}
	,removeAspect: function(oOwner,oAspect,oSoure) {
		oOwner.removeAspect(oAspect);
		var c = js_Boot.getClass(oAspect);
		this.log("removing " + c.__name__);
	}
	,addAspect: function(oTarget,oAspect,oSourceMon,oSource) {
		var bIsStackacle = js_Boot.__implements(oAspect,mon_$calc_aspect_IStackable);
		var oPrev = oTarget.getAspectOneByClass(oAspect.getMainClass());
		if(!bIsStackacle && oPrev != null) {
			return;
		}
		var oContext = { type : mon_$calc_ds_EEventType.OnAspectEntryPre, source_mon : oSourceMon, source : oSource, target : oTarget, aspect : oAspect, prevent_default : false};
		this._trigger(oContext);
		if(oContext.prevent_default) {
			return;
		}
		if(bIsStackacle && oPrev != null) {
			(js_Boot.__cast(oPrev , mon_$calc_aspect_IStackable)).addStack(this,oTarget,oAspect);
		} else {
			oTarget.addAspect(oAspect);
		}
		var c = js_Boot.getClass(oAspect);
		this.log("adding " + c.__name__);
		oContext.type = mon_$calc_ds_EEventType.OnAspectEntryPost;
		this._trigger(oContext);
	}
	,process: function() {
		while(!this.isDone()) {
			this.log("Turn start");
			this._oCurrentActionRed = this.promptAction(false);
			this._oCurrentActionBlue = this.promptAction(true);
			try {
				this.processTurn();
			} catch( _g ) {
				if(((haxe_Exception.caught(_g)) instanceof mon_$calc_exception_VictoryException)) {
					break;
				} else {
					throw _g;
				}
			}
			if(this.isDone()) {
				throw haxe_Exception.thrown("!!!");
			}
		}
		var b = this.getVictor();
		if(b == null) {
			throw haxe_Exception.thrown("!!!");
		}
	}
	,promptAction: function(bSide,aAction) {
		if(aAction == null) {
			aAction = this.generatePlayerAction(bSide);
		}
		if(aAction.length == 0) {
			throw haxe_Exception.thrown("!!!");
		}
		if(aAction.length == 1) {
			return aAction[0];
		}
		var oAction = bSide ? aAction[this._oBlueTeamCallback(aAction)] : aAction[this._oRedTeamCallback(aAction)];
		if(oAction == null) {
			throw haxe_Exception.thrown("!!!");
		}
		return oAction;
	}
	,processTurn: function() {
		var _gthis = this;
		if(this._oCurrentActionRed == null) {
			throw haxe_Exception.thrown("!!!");
		}
		if(this._oCurrentActionBlue == null) {
			throw haxe_Exception.thrown("!!!");
		}
		this._trigger({ type : mon_$calc_ds_EEventType.OnTurnStart});
		if(((this._oCurrentActionRed) instanceof mon_$calc_action_MonSwitch)) {
			var oSwtichAction = js_Boot.__cast(this._oCurrentActionRed , mon_$calc_action_MonSwitch);
			this.switchMon(false,oSwtichAction.getMonIndex());
		}
		if(((this._oCurrentActionBlue) instanceof mon_$calc_action_MonSwitch)) {
			var oSwtichAction = js_Boot.__cast(this._oCurrentActionBlue , mon_$calc_action_MonSwitch);
			this.switchMon(false,oSwtichAction.getMonIndex());
		}
		var aMoveAction = [];
		if(((this._oCurrentActionRed) instanceof mon_$calc_action_MonMoveAction)) {
			aMoveAction.push(this._oCurrentActionRed);
		}
		if(((this._oCurrentActionBlue) instanceof mon_$calc_action_MonMoveAction)) {
			aMoveAction.push(this._oCurrentActionBlue);
		}
		aMoveAction.sort(function(a,b) {
			var i = Reflect.compare(b.getMove(_gthis._oBattle).getPriority(),a.getMove(_gthis._oBattle).getPriority());
			if(i == 0) {
				return -Reflect.compare(_gthis.getCurrentMonStat(_gthis._oBattle.getCurrentMon(a.getSide())).get(5),_gthis.getCurrentMonStat(_gthis._oBattle.getCurrentMon(b.getSide())).get(5));
			}
			return i;
		});
		var _g = 0;
		while(_g < aMoveAction.length) {
			var oAction = aMoveAction[_g];
			++_g;
			this.doMove(oAction);
		}
		this._trigger({ type : mon_$calc_ds_EEventType.OnTurnEnd});
		this._oCurrentActionBlue = null;
		this._oCurrentActionRed = null;
		this.log("Turn end");
	}
	,doMove: function(oAction) {
		var bSide = oAction.getSide();
		var oMonAtt = this._oBattle.getCurrentMon(bSide);
		var oMove = oAction.getMove(this._oBattle);
		oMonAtt.decreasePP(oMove,1);
		var oMoveCalcContex = { type : mon_$calc_ds_EEventType.OnMoveCalc, side : bSide, mon : oMonAtt, move_origin : oMove, move : oMove};
		this._trigger(oMoveCalcContex,oMove.getAspectByEvent({ processor : this, battle : this._oBattle, side : bSide, mon : oMonAtt, event : oMoveCalcContex, owner : oMove}));
		oMove = oMoveCalcContex.move;
		if(oMove == null) {
			this.log(oMoveCalcContex.move_origin.getLabel() + " has failed.");
			return;
		}
		var oMonTarget = null;
		switch(oMove.getTarget()) {
		case 0:
			oMonTarget = oMonAtt;
			break;
		case 1:
			oMonTarget = this._oBattle.getCurrentMon(!bSide);
			break;
		default:
			throw haxe_Exception.thrown("!!!");
		}
		var oContext = { type : mon_$calc_ds_EEventType.OnAttack, side_att : bSide, mon_att : oMonAtt, stat_att : this.getCurrentMonStat(oMonAtt), mon_def : oMonTarget, stat_def : this.getCurrentMonStat(oMonTarget), move : oMove, turnover : false};
		this.log(oMonAtt.getLabel() + " use " + oMove.getLabel());
		this._trigger(oContext,oMoveCalcContex.move.getAspectByEvent({ processor : this, battle : this._oBattle, side : bSide, mon : oMonAtt, event : oContext, owner : oMoveCalcContex.move}));
	}
	,calcDamage: function(oContext) {
		this._trigger(oContext);
		return oContext;
	}
	,getAffinityFactor: function(oMon,eType) {
		var oContext = { target : oMon, type : mon_$calc_ds_EEventType.OnAffinityCalc, att_type : eType, def_type_ar : [oMon.getHitType0(),oMon.getHitType1()], factor : mon_$calc_system_BattleProcess.getHitTypeFactor(eType,oMon.getHitType0(),oMon.getHitType1())};
		this._trigger(oContext);
		return oContext.factor;
	}
	,damage2: function(oTarget,iDamage,oSourceMon,oSource,oParentContext) {
		this.damage({ type : mon_$calc_ds_EEventType.OnDamagePre, attack_context : oParentContext, mon_att : oSourceMon, source : oSource, target : oTarget, damage : iDamage, prevent_default : false});
	}
	,damage: function(oContext) {
		this._trigger(oContext);
		if(oContext.damage == 0) {
			this.log("attack has no effect");
			return;
		}
		if(oContext.prevent_default) {
			this.log("attack miss");
			return;
		}
		oContext.target.damage(oContext.damage);
		this.log(" damaging " + oContext.target.getLabel() + " " + oContext.target.getHealth() + " (-" + oContext.damage + ")");
		if(this.isDone()) {
			this.log("TODO : END" + (this.getVictor() ? "Blue" : "Red") + " WIN");
			throw new mon_$calc_exception_VictoryException();
		}
		if(oContext.target.getHealth() <= 0) {
			this.log(oContext.target.getLabel() + " is dead");
			var bSide = this.getMonSide(oContext.target);
			var oAction = this.promptAction(bSide,this.generatePlayerSwitchAction(bSide));
			this.switchMon(bSide,oAction.getMonIndex());
		}
	}
	,heal: function(oContext) {
		this._trigger(oContext);
		if(oContext.prevent_default) {
			return;
		}
		oContext.target.heal(oContext.damage);
		this.log(" healing " + oContext.target.getLabel() + " for " + oContext.damage);
		oContext.type = mon_$calc_ds_EEventType.OnHealPost;
		this._trigger(oContext);
	}
	,heal2: function(oTarget,iHeal,oSourceMon,oSource,oParentContext) {
		this.damage({ type : mon_$calc_ds_EEventType.OnHealPre, attack_context : oParentContext, mon_att : oSourceMon, source : oSource, target : oTarget, damage : iHeal, prevent_default : false});
	}
	,_trigger: function(oContext,aAdditional) {
		this.log("Event - " + Std.string(oContext.type));
		var aPairAspect = this.getAllAspectByEvent(oContext).concat(aAdditional != null ? aAdditional : []);
		aPairAspect.sort(function(a,b) {
			return Reflect.compare(a.aspect.getPriority(),b.aspect.getPriority());
		});
		var bHasTurnOver = Object.prototype.hasOwnProperty.call(oContext,"turnover");
		while(aPairAspect.length != 0) {
			var oPair = aPairAspect.shift();
			var oAspect = oPair.aspect;
			var oThisContext = oPair.context;
			var oContext1 = { type : mon_$calc_ds_EEventType.OnAspectExecutePre, owner_side : oThisContext.side, owner : oThisContext.mon, aspect : oAspect, event : oThisContext.event, prevent_default : false};
			this._trigger(oContext1);
			if(oContext1.prevent_default) {
				continue;
			}
			this.log(oAspect.getLabel() + " execute");
			oAspect.process(oThisContext);
			oContext1.type = mon_$calc_ds_EEventType.OnAspectExecutePost;
			this._trigger(oContext1);
			if(bHasTurnOver && oContext1.turnover == true) {
				return oContext1;
			}
		}
		return oContext;
	}
	,getAllAspectByEvent: function(oContext) {
		var oMonRed = this._oBattle.getCurrentMon(false);
		var oMonBlue = this._oBattle.getCurrentMon(true);
		return this._oBattle.getAspectByEvent({ processor : this, battle : this._oBattle, side : null, mon : null, event : oContext, owner : this._oBattle}).concat(this._oBattle.getTeam(true).getAspectByEvent({ processor : this, battle : this._oBattle, side : true, mon : null, event : oContext, owner : this._oBattle.getTeam(true)})).concat(this._oBattle.getTeam(false).getAspectByEvent({ processor : this, battle : this._oBattle, side : false, mon : null, event : oContext, owner : this._oBattle.getTeam(false)})).concat(oMonRed.getAspectByEvent({ processor : this, battle : this._oBattle, side : false, mon : oMonRed, event : oContext, owner : oMonRed})).concat(oMonBlue.getAspectByEvent({ processor : this, battle : this._oBattle, side : true, mon : oMonBlue, event : oContext, owner : oMonBlue}));
	}
	,switchMon: function(bSide,iIndex) {
		var oBattle = this._oBattle;
		var oTeam = oBattle.getTeam(bSide);
		var oCurrentMon = oBattle.getCurrentMon(bSide);
		var oNextMon = oTeam.getMon(iIndex);
		var oEvent = { type : mon_$calc_ds_EEventType.OnSwitchIn, side : bSide, mon : oNextMon};
		this._trigger(oEvent);
		oCurrentMon.reset();
		this._oBattle.getBattleSlot(bSide).switchMon(oNextMon);
		this.log(oTeam.getLabel() + " change to " + oNextMon.getLabel() + " (" + oNextMon.getHealth() + ")");
		var oEvent = { type : mon_$calc_ds_EEventType.OnSwitchIn, side : bSide, mon : oNextMon};
		this._trigger(oEvent);
	}
	,__class__: mon_$calc_core_BattleProcessor
};
var mon_$calc_core_IProcess = function() { };
$hxClasses["mon_calc.core.IProcess"] = mon_$calc_core_IProcess;
mon_$calc_core_IProcess.__name__ = "mon_calc.core.IProcess";
mon_$calc_core_IProcess.__isInterface__ = true;
mon_$calc_core_IProcess.prototype = {
	__class__: mon_$calc_core_IProcess
};
var mon_$calc_ds_EEventFilter = $hxEnums["mon_calc.ds.EEventFilter"] = { __ename__ : "mon_calc.ds.EEventFilter", __constructs__ : ["Self","Ally","Foe","Dealing","AllyReceiving","Receiving","TargetFoe","TargetOwner","WeatherRain","WeatherSunny","TerrainElectric","TargetHasStatus","TargetSleepable","TargetPoisonable","TargetGrounded","TargetAirBorn","TargetUnderground","Damage","DamagePhy","DamageMag","DamageTypeNormal","DamageTypeDark"]
	,Self: {_hx_index:0,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,Ally: {_hx_index:1,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,Foe: {_hx_index:2,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,Dealing: {_hx_index:3,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,AllyReceiving: {_hx_index:4,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,Receiving: {_hx_index:5,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetFoe: {_hx_index:6,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetOwner: {_hx_index:7,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,WeatherRain: {_hx_index:8,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,WeatherSunny: {_hx_index:9,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TerrainElectric: {_hx_index:10,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetHasStatus: {_hx_index:11,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetSleepable: {_hx_index:12,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetPoisonable: {_hx_index:13,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetGrounded: {_hx_index:14,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetAirBorn: {_hx_index:15,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,TargetUnderground: {_hx_index:16,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,Damage: {_hx_index:17,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,DamagePhy: {_hx_index:18,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,DamageMag: {_hx_index:19,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,DamageTypeNormal: {_hx_index:20,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
	,DamageTypeDark: {_hx_index:21,__enum__:"mon_calc.ds.EEventFilter",toString:$estr}
};
var mon_$calc_ds_EEventType = $hxEnums["mon_calc.ds.EEventType"] = { __ename__ : "mon_calc.ds.EEventType", __constructs__ : ["OnActionPrompt","OnTurnStart","OnAffinityCalc","OnStatCalc","OnMoveCalc","OnAttack","OnHealPre","OnHealPost","OnDamageCalc","OnDamagePre","OnDamagePost","OnAspectEntryPre","OnAspectEntryPost","OnAspectExecutePre","OnAspectExecutePost","OnItemRemove","OnSwitchIn","OnSwitchOut","OnTurnEnd"]
	,OnActionPrompt: {_hx_index:0,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnTurnStart: {_hx_index:1,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnAffinityCalc: {_hx_index:2,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnStatCalc: {_hx_index:3,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnMoveCalc: {_hx_index:4,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnAttack: {_hx_index:5,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnHealPre: {_hx_index:6,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnHealPost: {_hx_index:7,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnDamageCalc: {_hx_index:8,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnDamagePre: {_hx_index:9,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnDamagePost: {_hx_index:10,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnAspectEntryPre: {_hx_index:11,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnAspectEntryPost: {_hx_index:12,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnAspectExecutePre: {_hx_index:13,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnAspectExecutePost: {_hx_index:14,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnItemRemove: {_hx_index:15,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnSwitchIn: {_hx_index:16,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnSwitchOut: {_hx_index:17,__enum__:"mon_calc.ds.EEventType",toString:$estr}
	,OnTurnEnd: {_hx_index:18,__enum__:"mon_calc.ds.EEventType",toString:$estr}
};
var mon_$calc_ds_Nature = function(iId,sLabel,eBonus,eMalus) {
	this._sLabel = sLabel;
	this._eBonus = eBonus;
	this._eMalus = eMalus;
};
$hxClasses["mon_calc.ds.Nature"] = mon_$calc_ds_Nature;
mon_$calc_ds_Nature.__name__ = "mon_calc.ds.Nature";
mon_$calc_ds_Nature.get = function(i) {
	if(i == null) {
		return null;
	}
	return mon_$calc_ds_Nature.NATURE[i];
};
mon_$calc_ds_Nature.prototype = {
	getId: function() {
		return this._iId;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getBonus: function() {
		return this._eBonus;
	}
	,getMalus: function() {
		return this._eMalus;
	}
	,__class__: mon_$calc_ds_Nature
};
var mon_$calc_ds_enumeration_EAspectFlag = $hxEnums["mon_calc.ds.enumeration.EAspectFlag"] = { __ename__ : "mon_calc.ds.enumeration.EAspectFlag", __constructs__ : ["SoundBase","Barrier","Screen","Guard","Multi5","Recoil","Punch","Contact","Bite","SelfDestroy","Trap"]
	,SoundBase: {_hx_index:0,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Barrier: {_hx_index:1,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Screen: {_hx_index:2,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Guard: {_hx_index:3,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Multi5: {_hx_index:4,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Recoil: {_hx_index:5,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Punch: {_hx_index:6,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Contact: {_hx_index:7,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Bite: {_hx_index:8,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,SelfDestroy: {_hx_index:9,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
	,Trap: {_hx_index:10,__enum__:"mon_calc.ds.enumeration.EAspectFlag",toString:$estr}
};
var mon_$calc_effect_Damage = function(iPower,eType,eCategory,aFlag) {
	mon_$calc_aspect_core_AAspect.call(this,[mon_$calc_ds_EEventType.OnAttack],[mon_$calc_ds_EEventFilter.Dealing],aFlag);
	this._eType = eType;
	this._eCategory = eCategory;
	this._iPower = iPower;
};
$hxClasses["mon_calc.effect.Damage"] = mon_$calc_effect_Damage;
mon_$calc_effect_Damage.__name__ = "mon_calc.effect.Damage";
mon_$calc_effect_Damage.__super__ = mon_$calc_aspect_core_AAspect;
mon_$calc_effect_Damage.prototype = $extend(mon_$calc_aspect_core_AAspect.prototype,{
	getPriority: function() {
		return "5";
	}
	,getHitType: function() {
		return this._eType;
	}
	,getCategory: function() {
		return this._eCategory;
	}
	,getDamageCategory: function() {
		return this._eCategory;
	}
	,getPower: function() {
		return this._iPower;
	}
	,getFlagAr: function() {
		return this._aFlag;
	}
	,onAttack: function(oContext,oEvent) {
		if(oEvent.mon_def == null) {
			throw haxe_Exception.thrown("!!!");
		}
		var oCalcContext = oContext.processor.calcDamage(this._createCalcContext(oContext,oEvent));
		if(oCalcContext.factor == null) {
			return;
		}
		oContext.processor.damage({ type : mon_$calc_ds_EEventType.OnDamagePre, attack_context : oEvent, mon_att : oEvent.mon_att, target : this._getTarget(oEvent), source : this, damage : this._calcDamage(oContext,oCalcContext), prevent_default : false});
	}
	,_createCalcContext: function(oContext,oEvent) {
		var fFactor = oContext.processor.getAffinityFactor(oEvent.mon_def,this._eType);
		var mStatAtt = oContext.processor.getCurrentMonStat(oEvent.mon_att);
		var mStatDef = oContext.processor.getCurrentMonStat(oEvent.mon_def);
		return { type : mon_$calc_ds_EEventType.OnDamageCalc, crit_chance : 0.0625, factor : fFactor, power : this.getPower(), damage : this, att_mon : oEvent.mon_att, att_stat : this._eCategory == 0 ? mStatAtt.get(1) : mStatAtt.get(3), def_mon : oEvent.mon_def, def_stat : this._eCategory == 0 ? mStatDef.get(2) : mStatDef.get(4), def_side : !oEvent.side_att};
	}
	,_calcDamage: function(oContext,oEvent) {
		var fStabFactor = this.getStabFactor(oEvent.att_mon);
		var fCriticFactor = oContext.processor.getChance(oEvent.crit_chance) ? 1.5 : 1;
		var fTargetFactor = 1;
		var iLevel = 50;
		var fLevelFactor = mon_$calc_tool_IntTool.div(iLevel * 2,5) + 2;
		var fBaseDamage = Math.floor(fLevelFactor * oEvent.power * (oEvent.att_stat / oEvent.def_stat) / 50) + 2;
		return Math.floor(fBaseDamage * fTargetFactor * fStabFactor * fCriticFactor * oEvent.factor);
	}
	,getStabFactor: function(oMonAtt) {
		if(!oMonAtt.hasHitType(this._eType)) {
			return 1;
		}
		return 1.5;
	}
	,_getTarget: function(oEvent) {
		return oEvent.mon_def;
	}
	,__class__: mon_$calc_effect_Damage
});
var mon_$calc_entity_Ability = function(sLabel,aAspect) {
	this._sLabel = sLabel;
	this._aAspect = aAspect;
};
$hxClasses["mon_calc.entity.Ability"] = mon_$calc_entity_Ability;
mon_$calc_entity_Ability.__name__ = "mon_calc.entity.Ability";
mon_$calc_entity_Ability.prototype = {
	getAspectAr: function() {
		return this._aAspect;
	}
	,__class__: mon_$calc_entity_Ability
};
var mon_$calc_entity_Battle = function(oTeamRed,oTeamBlue) {
	mon_$calc_aspect_core_AAspectBearer.call(this);
	this._oTeamRed = oTeamRed;
	this._oTeamBlue = oTeamBlue;
	this._aBattleSlotRed = [new mon_$calc_entity_BattleSlot(false,this._oTeamRed.getMon(0))];
	this._aBattleSlotBlue = [new mon_$calc_entity_BattleSlot(true,this._oTeamBlue.getMon(0))];
};
$hxClasses["mon_calc.entity.Battle"] = mon_$calc_entity_Battle;
mon_$calc_entity_Battle.__name__ = "mon_calc.entity.Battle";
mon_$calc_entity_Battle.__super__ = mon_$calc_aspect_core_AAspectBearer;
mon_$calc_entity_Battle.prototype = $extend(mon_$calc_aspect_core_AAspectBearer.prototype,{
	copy: function() {
		var _gthis = this;
		var o = new mon_$calc_entity_Battle(this._oTeamRed.copy(),this._oTeamBlue.copy());
		var _this = this._aBattleSlotRed;
		var result = new Array(_this.length);
		var _g = 0;
		var _g1 = _this.length;
		while(_g < _g1) {
			var i = _g++;
			var i1 = _gthis._oTeamRed.getMonIndex(_this[i].getMon());
			if(i1 == null) {
				throw haxe_Exception.thrown("!!!");
			}
			result[i] = new mon_$calc_entity_BattleSlot(false,o._oTeamRed.getMon(i1));
		}
		o._aBattleSlotRed = result;
		var _this = this._aBattleSlotBlue;
		var result = new Array(_this.length);
		var _g = 0;
		var _g1 = _this.length;
		while(_g < _g1) {
			var i = _g++;
			var i1 = _gthis._oTeamBlue.getMonIndex(_this[i].getMon());
			if(i1 == null) {
				throw haxe_Exception.thrown("!!!");
			}
			result[i] = new mon_$calc_entity_BattleSlot(true,o._oTeamBlue.getMon(i1));
		}
		o._aBattleSlotBlue = result;
		o._aAspect = haxe_Unserializer.run(haxe_Serializer.run(this._aAspect));
		return o;
	}
	,getTeamRed: function() {
		return this._oTeamRed;
	}
	,getTeamBlue: function() {
		return this._oTeamBlue;
	}
	,getTeam: function(bSide) {
		if(bSide) {
			return this._oTeamBlue;
		} else {
			return this._oTeamRed;
		}
	}
	,getCurrentMon: function(bSide) {
		return this.getBattleSlot(bSide).getMon();
	}
	,getBattleSlot: function(bSide) {
		if(bSide) {
			return this._aBattleSlotBlue[0];
		} else {
			return this._aBattleSlotRed[0];
		}
	}
	,isDone: function() {
		if(this._oTeamRed.hasValidMon() || this._oTeamBlue.hasValidMon()) {
			return false;
		}
		return true;
	}
	,__class__: mon_$calc_entity_Battle
});
var mon_$calc_entity_BattleSlot = function(bSide,oMon) {
	mon_$calc_core_entity_ABattleSlot.call(this,bSide,oMon);
};
$hxClasses["mon_calc.entity.BattleSlot"] = mon_$calc_entity_BattleSlot;
mon_$calc_entity_BattleSlot.__name__ = "mon_calc.entity.BattleSlot";
mon_$calc_entity_BattleSlot.__super__ = mon_$calc_core_entity_ABattleSlot;
mon_$calc_entity_BattleSlot.prototype = $extend(mon_$calc_core_entity_ABattleSlot.prototype,{
	getMon: function() {
		return this._oBattler;
	}
	,__class__: mon_$calc_entity_BattleSlot
});
var mon_$calc_entity_Item = function(sKey,sLabel,aEffect) {
	this._sKey = sKey;
	this._sLabel = sLabel;
	this._aAspect = aEffect;
};
$hxClasses["mon_calc.entity.Item"] = mon_$calc_entity_Item;
mon_$calc_entity_Item.__name__ = "mon_calc.entity.Item";
mon_$calc_entity_Item.prototype = {
	getKey: function() {
		return this._sKey;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getAspectAr: function() {
		return this._aAspect;
	}
	,__class__: mon_$calc_entity_Item
};
var mon_$calc_entity_Mon = function(sLabel,oType,aStatTraining,iAbilityIndex,eNature,aMove,oItem) {
	mon_$calc_aspect_core_AAspectBearer.call(this);
	this._sLabel = sLabel;
	this._oType = oType;
	this._oAbility = oType.getAbilityAr()[iAbilityIndex];
	this._aType = [oType.getHitType1(),oType.getHitType2()];
	this._mStatTraining = aStatTraining;
	var _g = new haxe_ds_IntMap();
	_g.set(0,31);
	_g.set(1,31);
	_g.set(2,31);
	_g.set(3,31);
	_g.set(4,31);
	_g.set(5,31);
	this._mStatIndiv = _g;
	this._iLevel = 50;
	this._aMove = aMove;
	var result = new Array(aMove.length);
	var _g = 0;
	var _g1 = aMove.length;
	while(_g < _g1) {
		var i = _g++;
		result[i] = js_Boot.__cast(aMove[i].getPointMax() , Int);
	}
	this._aPP = result;
	this._eNature = eNature;
	this._oItem = oItem;
	this._updateEffective();
	this._iHealth = this.getStatEffective(0);
};
$hxClasses["mon_calc.entity.Mon"] = mon_$calc_entity_Mon;
mon_$calc_entity_Mon.__name__ = "mon_calc.entity.Mon";
mon_$calc_entity_Mon.__super__ = mon_$calc_aspect_core_AAspectBearer;
mon_$calc_entity_Mon.prototype = $extend(mon_$calc_aspect_core_AAspectBearer.prototype,{
	copy: function() {
		var oMon = new mon_$calc_entity_Mon(this._sLabel,this._oType,this._mStatTraining,0,this._eNature,this._aMove,this._oItem);
		oMon._oAbility = this._oAbility;
		oMon._aType = this._aType.slice();
		oMon._aPP = this._aPP.slice();
		oMon._iHealth = this._iHealth;
		oMon._aAspect = haxe_Unserializer.run(haxe_Serializer.run(this._aAspect));
		return oMon;
	}
	,getHealth: function() {
		return this._iHealth;
	}
	,getType: function() {
		return this._oType;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getLevel: function() {
		return this._iLevel;
	}
	,getMoveAr: function() {
		return this._aMove;
	}
	,getMove: function(i) {
		return this._aMove[i];
	}
	,getMana: function(i) {
		return this._aPP[i];
	}
	,getAbility: function() {
		return this._oAbility;
	}
	,getItem: function() {
		return this._oItem;
	}
	,getNature: function() {
		return this._eNature;
	}
	,getHitType0: function() {
		return this._aType[0];
	}
	,getHitType1: function() {
		return this._aType[1];
	}
	,getStatTrain: function(eStat) {
		if(!this._mStatTraining.exists(eStat)) {
			return 0;
		}
		return this._mStatTraining.get(eStat);
	}
	,getStatIndiv: function(eStat) {
		return this._mStatIndiv.get(eStat);
	}
	,getStatEffective: function(eStat) {
		return this._mStatEffectiveCache.get(eStat);
	}
	,getStatEffectiveMap: function() {
		return this._mStatEffectiveCache.copy();
	}
	,getMaxHealth: function() {
		return this.getStatEffective(0);
	}
	,hasHitType: function(eType) {
		if(this._aType[0] != eType) {
			return this._aType[1] == eType;
		} else {
			return true;
		}
	}
	,isInPinch: function() {
		return this._iHealth <= Math.floor(this.getMaxHealth() / 3);
	}
	,getMoveIndex: function(oMove) {
		var _g = 0;
		var _g1 = this._aMove.length;
		while(_g < _g1) {
			var i = _g++;
			if(this._aMove[i] == oMove) {
				return i;
			}
		}
		return null;
	}
	,getAspectAr: function() {
		return mon_$calc_aspect_core_AAspectBearer.prototype.getAspectAr.call(this).concat(this._oAbility.getAspectAr()).concat(this._oItem == null ? [] : this._oItem.getAspectAr());
	}
	,decreasePP: function(oMove,i) {
		var index = this._aMove.indexOf(oMove);
		if(index == -1) {
			return this;
		}
		this._aPP[index] -= i;
		return this;
	}
	,reset: function() {
		this.aspectPurge(function(o) {
			return ((o) instanceof mon_$calc_battle_$aspect_status_AMainStatus);
		});
	}
	,aspectPurge: function(fn) {
		var _g = [];
		var _g1 = 0;
		var _g2 = this._aAspect;
		while(_g1 < _g2.length) {
			var v = _g2[_g1];
			++_g1;
			if(fn(v)) {
				_g.push(v);
			}
		}
		this._aAspect = _g;
	}
	,damage: function(i) {
		this._iHealth = mon_$calc_tool_IntTool.clamp(this._iHealth - i,0,this.getMaxHealth());
		return this;
	}
	,heal: function(i) {
		this._iHealth = mon_$calc_tool_IntTool.clamp(this._iHealth + i,0,this.getMaxHealth());
		return this;
	}
	,damagePercent: function(f) {
		this.damage(Math.floor(this._calcStatEffective(0) * f));
		return this;
	}
	,healPercent: function(f) {
		this.heal(Math.floor(this._calcStatEffective(0) * f));
		return this;
	}
	,_updateEffective: function() {
		var _g = new haxe_ds_IntMap();
		_g.set(0,this._calcStatEffective(0));
		_g.set(1,this._calcStatEffective(1));
		_g.set(2,this._calcStatEffective(2));
		_g.set(3,this._calcStatEffective(3));
		_g.set(4,this._calcStatEffective(4));
		_g.set(5,this._calcStatEffective(5));
		this._mStatEffectiveCache = _g;
	}
	,_calcStatEffective: function(eStat) {
		var fStat = this._oType.getStat(eStat) * 2 + this.getStatIndiv(eStat) + this.getStatTrain(eStat) / 4;
		if(eStat == 0) {
			return Math.floor(fStat * this._iLevel / 100 + this._iLevel + 10);
		}
		var fNature = 1;
		if(this._eNature != null) {
			if(this._eNature.getMalus() == this._eNature.getBonus()) {
				fNature = 1;
			} else if(this._eNature.getMalus() == eStat) {
				fNature = 0.9;
			} else if(this._eNature.getBonus() == eStat) {
				fNature = 1.1;
			}
		}
		return Math.floor((fStat * this._iLevel / 100 + 5) * fNature);
	}
	,__class__: mon_$calc_entity_Mon
});
var mon_$calc_entity_MonType = function(iId,sLabel,aStat,eType1,eType2,aAbility,aMoveSet,aEvolution) {
	this._iId = iId;
	this._sLabel = sLabel;
	this._aStat = aStat;
	this._eType1 = eType1;
	this._eType2 = eType2;
	this._aAbility = aAbility;
	this._aMoveSet = aMoveSet;
	this._aEvolution = aEvolution;
};
$hxClasses["mon_calc.entity.MonType"] = mon_$calc_entity_MonType;
mon_$calc_entity_MonType.__name__ = "mon_calc.entity.MonType";
mon_$calc_entity_MonType.prototype = {
	getStat: function(eStat) {
		return this._aStat.get(eStat);
	}
	,getId: function() {
		return this._iId;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getHitType1: function() {
		return this._eType1;
	}
	,getHitType2: function() {
		return this._eType2;
	}
	,getAbilityAr: function() {
		return this._aAbility;
	}
	,getMoveSet: function() {
		return this._aMoveSet;
	}
	,getEvolutionAr: function() {
		return this._aEvolution;
	}
	,getDefaultMove: function() {
		return mon_$calc_entity_MonType.DEFAULT_MOVE;
	}
	,__class__: mon_$calc_entity_MonType
};
var mon_$calc_entity_Move = function(sId,sLabel,eHitType,iPointMax,eTarget,aAspect,ePrioity,oRequirement) {
	if(ePrioity == null) {
		ePrioity = 0;
	}
	mon_$calc_aspect_core_AAspectBearer.call(this,aAspect);
	this._sId = sId;
	this._sLabel = sLabel;
	this._eHitType = eHitType;
	this._iPointMax = iPointMax;
	this._eTarget = eTarget;
	this._ePrioity = ePrioity;
	this._oRequirement = oRequirement;
};
$hxClasses["mon_calc.entity.Move"] = mon_$calc_entity_Move;
mon_$calc_entity_Move.__name__ = "mon_calc.entity.Move";
mon_$calc_entity_Move.__super__ = mon_$calc_aspect_core_AAspectBearer;
mon_$calc_entity_Move.prototype = $extend(mon_$calc_aspect_core_AAspectBearer.prototype,{
	copyEcho: function() {
		return new mon_$calc_entity_Move(this._sId,this._sLabel,this._eHitType,null,this._eTarget,this.getAspectAr(),this._ePrioity,null);
	}
	,getId: function() {
		return this._sId;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getHitType: function() {
		return this._eHitType;
	}
	,getPointMax: function() {
		return this._iPointMax;
	}
	,getValidator: function() {
		return this._oRequirement;
	}
	,getPriority: function() {
		return this._ePrioity;
	}
	,getTarget: function() {
		return this._eTarget;
	}
	,__class__: mon_$calc_entity_Move
});
var mon_$calc_entity_Team = function(sLabel,aMon) {
	mon_$calc_aspect_core_AAspectBearer.call(this);
	if(aMon.length == 0) {
		throw haxe_Exception.thrown("!!!");
	}
	this._aMon = aMon;
	this._sLabel = sLabel;
};
$hxClasses["mon_calc.entity.Team"] = mon_$calc_entity_Team;
mon_$calc_entity_Team.__name__ = "mon_calc.entity.Team";
mon_$calc_entity_Team.__super__ = mon_$calc_aspect_core_AAspectBearer;
mon_$calc_entity_Team.prototype = $extend(mon_$calc_aspect_core_AAspectBearer.prototype,{
	copy: function() {
		var oTeam = this._sLabel;
		var _this = this._aMon;
		var result = new Array(_this.length);
		var _g = 0;
		var _g1 = _this.length;
		while(_g < _g1) {
			var i = _g++;
			result[i] = _this[i].copy();
		}
		var oTeam1 = new mon_$calc_entity_Team(oTeam,result);
		oTeam1._aAspect = haxe_Unserializer.run(haxe_Serializer.run(this._aAspect));
		return oTeam1;
	}
	,getLabel: function() {
		return this._sLabel;
	}
	,getMonAr: function() {
		return this._aMon;
	}
	,getMon: function(i) {
		if(i >= this._aMon.length) {
			return null;
		}
		return this._aMon[i];
	}
	,getMonIndex: function(oMon) {
		var _g = 0;
		var _g1 = this._aMon.length;
		while(_g < _g1) {
			var i = _g++;
			if(this._aMon[i] == oMon) {
				return i;
			}
		}
		return null;
	}
	,hasValidMon: function() {
		var _g = 0;
		var _g1 = this._aMon;
		while(_g < _g1.length) {
			var oMon = _g1[_g];
			++_g;
			if(oMon.getHealth() > 0) {
				return true;
			}
		}
		return false;
	}
	,switchMon: function(i) {
		var oMon = this._aMon[0];
		if(i >= this._aMon.length) {
			throw haxe_Exception.thrown("!!!");
		}
		this._aMon[0] = this._aMon[i];
		this._aMon[i] = oMon;
		return this;
	}
	,__class__: mon_$calc_entity_Team
});
var mon_$calc_exception_VictoryException = function() {
	haxe_Exception.call(this,"-");
};
$hxClasses["mon_calc.exception.VictoryException"] = mon_$calc_exception_VictoryException;
mon_$calc_exception_VictoryException.__name__ = "mon_calc.exception.VictoryException";
mon_$calc_exception_VictoryException.__super__ = haxe_Exception;
mon_$calc_exception_VictoryException.prototype = $extend(haxe_Exception.prototype,{
	__class__: mon_$calc_exception_VictoryException
});
var mon_$calc_system_BattleProcess = function() { };
$hxClasses["mon_calc.system.BattleProcess"] = mon_$calc_system_BattleProcess;
mon_$calc_system_BattleProcess.__name__ = "mon_calc.system.BattleProcess";
mon_$calc_system_BattleProcess.getHitTypeFactor = function(oAtt,oDef1,oDef2) {
	var f = mon_$calc_system_BattleProcess._getHitTypeFactor(oAtt,oDef1);
	if(oDef2 != null && oDef1 != oDef2) {
		f *= mon_$calc_system_BattleProcess._getHitTypeFactor(oAtt,oDef2);
	}
	return f;
};
mon_$calc_system_BattleProcess._getHitTypeFactor = function(oAtt,oDef) {
	var k = oAtt + ";" + oDef;
	if(!Object.prototype.hasOwnProperty.call(mon_$calc_system_BattleProcess.HITTYPE_MAP.h,k)) {
		return 1;
	}
	return mon_$calc_system_BattleProcess.HITTYPE_MAP.h[k];
};
var mon_$calc_tool_IValidator = function() { };
$hxClasses["mon_calc.tool.IValidator"] = mon_$calc_tool_IValidator;
mon_$calc_tool_IValidator.__name__ = "mon_calc.tool.IValidator";
mon_$calc_tool_IValidator.__isInterface__ = true;
mon_$calc_tool_IValidator.prototype = {
	__class__: mon_$calc_tool_IValidator
};
var mon_$calc_tool_IntTool = function() { };
$hxClasses["mon_calc.tool.IntTool"] = mon_$calc_tool_IntTool;
mon_$calc_tool_IntTool.__name__ = "mon_calc.tool.IntTool";
mon_$calc_tool_IntTool.div = function(a,b) {
	return Math.floor(a / b);
};
mon_$calc_tool_IntTool.clamp = function(i,iMin,iMax) {
	if(i < iMin) {
		return iMin;
	}
	if(i > iMax) {
		return iMax;
	}
	return i;
};
mon_$calc_tool_IntTool.max = function(a,b) {
	if(a < b) {
		return b;
	} else {
		return a;
	}
};
var mon_$calc_tool_MonTool = function() { };
$hxClasses["mon_calc.tool.MonTool"] = mon_$calc_tool_MonTool;
mon_$calc_tool_MonTool.__name__ = "mon_calc.tool.MonTool";
mon_$calc_tool_MonTool.isUnderground = function(oMon) {
	return false;
};
mon_$calc_tool_MonTool.isGrounded = function(oMon) {
	if(oMon.hasHitType(10)) {
		return false;
	}
	return true;
};
mon_$calc_tool_MonTool.isPoisonable = function(oMon) {
	if(oMon.hasHitType(8) || oMon.hasHitType(17)) {
		return false;
	}
	return true;
};
mon_$calc_tool_MonTool.isBurnable = function(oMon) {
	if(oMon.hasHitType(2)) {
		return false;
	}
	return true;
};
mon_$calc_tool_MonTool.isParalyzable = function(oMon) {
	if(oMon.hasHitType(5)) {
		return false;
	}
	return true;
};
mon_$calc_tool_MonTool.isSleepable = function(oMon) {
	return true;
};
var mon_$calc_tool_StringTool = function() { };
$hxClasses["mon_calc.tool.StringTool"] = mon_$calc_tool_StringTool;
mon_$calc_tool_StringTool.__name__ = "mon_calc.tool.StringTool";
mon_$calc_tool_StringTool.ucfirst = function(string) {
	return string.charAt(0).toUpperCase() + HxOverrides.substr(string,1,null);
};
mon_$calc_tool_StringTool.slugify = function(s) {
	return StringTools.replace(s.toUpperCase()," ","_");
};
var sweet_functor_builder_IFactory = function() { };
$hxClasses["sweet.functor.builder.IFactory"] = sweet_functor_builder_IFactory;
sweet_functor_builder_IFactory.__name__ = "sweet.functor.builder.IFactory";
sweet_functor_builder_IFactory.__isInterface__ = true;
sweet_functor_builder_IFactory.prototype = {
	__class__: sweet_functor_builder_IFactory
};
var sweet_functor_builder_FactoryDefault = function(oClass,aParam) {
	this._oClass = oClass;
	this._aParam = aParam == null ? [] : aParam;
};
$hxClasses["sweet.functor.builder.FactoryDefault"] = sweet_functor_builder_FactoryDefault;
sweet_functor_builder_FactoryDefault.__name__ = "sweet.functor.builder.FactoryDefault";
sweet_functor_builder_FactoryDefault.__interfaces__ = [sweet_functor_builder_IFactory];
sweet_functor_builder_FactoryDefault.prototype = {
	create: function() {
		return Type.createInstance(this._oClass,this._aParam);
	}
	,__class__: sweet_functor_builder_FactoryDefault
};
function $getIterator(o) { if( o instanceof Array ) return new haxe_iterators_ArrayIterator(o); else return o.iterator(); }
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $global.$haxeUID++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$global.$haxeUID |= 0;
if(typeof(performance) != "undefined" ? typeof(performance.now) == "function" : false) {
	HxOverrides.now = performance.now.bind(performance);
}
$hxClasses["Math"] = Math;
if( String.fromCodePoint == null ) String.fromCodePoint = function(c) { return c < 0x10000 ? String.fromCharCode(c) : String.fromCharCode((c>>10)+0xD7C0)+String.fromCharCode((c&0x3FF)+0xDC00); }
String.prototype.__class__ = $hxClasses["String"] = String;
String.__name__ = "String";
$hxClasses["Array"] = Array;
Array.__name__ = "Array";
Date.prototype.__class__ = $hxClasses["Date"] = Date;
Date.__name__ = "Date";
var Int = { };
var Dynamic = { };
var Float = Number;
var Bool = Boolean;
var Class = { };
var Enum = { };
haxe_Resource.content = [{ name : "form.input_listaspect_item", data : "PGZpZWxkc2V0Pg0KCTxzcGFuIGRhdGEtcGxhY2Vob2xkZXI+PC9zcGFuPg0KCTxidXR0b24gY2xhc3M9ImJ0biBidG4tZGFuZ2VyIiB0eXBlPSJidXR0b24iIG9uY2xpY2s9IkNsaWVudC5nZXRDbGllbnRDaGlsZCg6OnVpZDo6KS5yZW1vdmVBY3Rpb24odGhpcykiPg0KCQlSZW1vdmUNCgk8L2J1dHRvbj4NCjwvZmllbGRzZXQ+"},{ name : "form.input_aspect", data : "PGRpdiBjbGFzcz0ibWItMyIgZGF0YS1keW4tdHBsPSI6OnVpZDo6Ij4NCgk8cCBjbGFzcz0idGV4dC1kYW5nZXIiIGRhdGEtZm9ybS1lcnJvcj0iOjp1aWQ6OiI+PC9wPg0KICAgIDxkaXYgY2xhc3M9ImZvcm0tbGFiZWwiPjo6bGFiZWw6OjwvZGl2Pg0KICAgIDo6aWYgYWN0aW9uX29wdGlvbl9saXN0OjoNCiAgICA8ZGl2Pg0KICAgICAgICA8c2VsZWN0IGRhdGEtaW5wdXRhc3BlY3Qtc2VsZWN0LWFjdGlvbj4NCiAgICAgICAgICAgIDo6Zm9yZWFjaCBhY3Rpb25fb3B0aW9uX2xpc3Q6Og0KICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iOjp2YWx1ZTo6Ij46OmxhYmVsOjo8L29wdGlvbj4NCiAgICAgICAgICAgIDo6ZW5kOjoNCiAgICAgICAgPC9zZWxlY3Q+DQogICAgICAgIDxidXR0b24gY2xhc3M9ImJ0biBidG4tc3VjY2VzcyIgdHlwZT0iYnV0dG9uIiANCiAgICAgICAgICAgIG9uY2xpY2s9IkNsaWVudC5nZXRDbGllbnRDaGlsZCg6OnVpZDo6KS5hZGRBY3Rpb24odGhpcykiDQogICAgICAgID4NCiAgICAgICAgICAgIEFkZCBhY3Rpb24NCiAgICAgICAgPC9idXR0b24+DQogICAgPC9kaXY+DQogICAgOjplbmQ6Og0KICAgIDxkaXYgY2xhc3M9InByLTMiIGRhdGEtYWN0aW9uLWxpc3Q+PC9kaXY+DQo8L2Rpdj4"},{ name : "form.input_base", data : "PGRpdiBkYXRhLWR5bi10cGw9Ijo6dWlkOjoiIGNsYXNzPSJtYi0zIj4NCiAgICA8bGFiZWwgZm9yPSI6OnVpZDo6IiBjbGFzcz0iZm9ybS1sYWJlbCI+OjpsYWJlbDo6PC9sYWJlbD4NCiAgICA8aW5wdXQgdHlwZT0iOjp0eXBlOjoiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIGlkPSJpbnB1dC06OnVpZDo6IiBwbGFjZWhvbGRlcj0iOjpwbGFjZWhvbGRlcjo6Ij4NCjwvZGl2Pg"},{ name : "form.form_base", data : "PGRpdiBkYXRhLWR5bi10cGw9Ijo6dWlkOjoiPg0KOjpmb3JlYWNoIGNoaWxkX2xpc3Q6Og0KICAgIDo6dHBsOjoNCjo6ZW5kOjoNCjwvZGl2Pg"}];
js_Boot.__toStr = ({ }).toString;
haxe_ds_ObjectMap.count = 0;
haxe_Template.splitter = new EReg("(::[A-Za-z0-9_ ()&|!+=/><*.\"-]+::|\\$\\$([A-Za-z0-9_-]+)\\()","");
haxe_Template.expr_splitter = new EReg("(\\(|\\)|[ \r\n\t]*\"[^\"]*\"[ \r\n\t]*|[!+=/><*.&|-]+)","");
haxe_Template.expr_trim = new EReg("^[ ]*([^ ]+)[ ]*$","");
haxe_Template.expr_int = new EReg("^[0-9]+$","");
haxe_Template.expr_float = new EReg("^([+-]?)(?=\\d|,\\d)\\d*(,\\d*)?([Ee]([+-]?\\d+))?$","");
haxe_Template.globals = { };
haxe_Template.hxKeepArrayIterator = new haxe_iterators_ArrayIterator([]);
haxe_crypto_Base64.CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
haxe_crypto_Base64.BYTES = haxe_io_Bytes.ofString(haxe_crypto_Base64.CHARS);
animix_$client_$js_client_TplManager.form = { input_base : new animix_$client_$js_Template(haxe_Resource.getString("form.input_base")), input_aspect : new animix_$client_$js_Template(haxe_Resource.getString("form.input_aspect"))};
animix_$client_$js_client_TplManager._uid = 0;
haxe_Serializer.USE_CACHE = false;
haxe_Serializer.USE_ENUM_INDEX = false;
haxe_Serializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
haxe_Unserializer.DEFAULT_RESOLVER = new haxe__$Unserializer_DefaultResolver();
haxe_Unserializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
mon_$calc_ds_Nature.NATURE = [new mon_$calc_ds_Nature(0,"Whatever",1,1),new mon_$calc_ds_Nature(1,"Adamant",1,3),new mon_$calc_ds_Nature(2,"Modest",3,1),new mon_$calc_ds_Nature(3,"Modest",5,1),new mon_$calc_ds_Nature(4,"Modest",5,3)];
mon_$calc_system_BattleProcess.HITTYPE_MAP = (function($this) {
	var $r;
	var _g = new haxe_ds_StringMap();
	_g.h[1 + ";" + 13] = 0.5;
	_g.h[1 + ";" + 14] = 0;
	_g.h[1 + ";" + 17] = 0.5;
	_g.h[2 + ";" + 2] = 0.5;
	_g.h[2 + ";" + 3] = 0.5;
	_g.h[2 + ";" + 4] = 2;
	_g.h[2 + ";" + 6] = 2;
	_g.h[2 + ";" + 12] = 2;
	_g.h[2 + ";" + 13] = 0.5;
	_g.h[2 + ";" + 16] = 0.5;
	_g.h[2 + ";" + 17] = 2;
	_g.h[3 + ";" + 2] = 2;
	_g.h[3 + ";" + 3] = 0.5;
	_g.h[3 + ";" + 4] = 0.5;
	_g.h[3 + ";" + 9] = 2;
	_g.h[3 + ";" + 13] = 2;
	_g.h[3 + ";" + 16] = 0.5;
	_g.h[5 + ";" + 3] = 2;
	_g.h[5 + ";" + 5] = 0.5;
	_g.h[5 + ";" + 4] = 0.5;
	_g.h[5 + ";" + 9] = 0;
	_g.h[5 + ";" + 10] = 2;
	_g.h[5 + ";" + 16] = 0.5;
	_g.h[4 + ";" + 2] = 0.5;
	_g.h[4 + ";" + 3] = 2;
	_g.h[4 + ";" + 4] = 0.5;
	_g.h[4 + ";" + 8] = 0.5;
	_g.h[4 + ";" + 9] = 2;
	_g.h[4 + ";" + 10] = 0.5;
	_g.h[4 + ";" + 12] = 0.5;
	_g.h[4 + ";" + 13] = 2;
	_g.h[4 + ";" + 16] = 0.5;
	_g.h[4 + ";" + 17] = 0.5;
	_g.h[6 + ";" + 2] = 0.5;
	_g.h[6 + ";" + 3] = 0.5;
	_g.h[6 + ";" + 4] = 2;
	_g.h[6 + ";" + 6] = 0.5;
	_g.h[6 + ";" + 9] = 2;
	_g.h[6 + ";" + 10] = 2;
	_g.h[6 + ";" + 16] = 2;
	_g.h[6 + ";" + 17] = 0.5;
	_g.h[7 + ";" + 1] = 2;
	_g.h[7 + ";" + 6] = 2;
	_g.h[7 + ";" + 8] = 0.5;
	_g.h[7 + ";" + 10] = 0.5;
	_g.h[7 + ";" + 11] = 0.5;
	_g.h[7 + ";" + 12] = 0.5;
	_g.h[7 + ";" + 13] = 2;
	_g.h[7 + ";" + 14] = 0;
	_g.h[7 + ";" + 15] = 2;
	_g.h[7 + ";" + 17] = 2;
	_g.h[7 + ";" + 18] = 0.5;
	_g.h[8 + ";" + 4] = 2;
	_g.h[8 + ";" + 8] = 0.5;
	_g.h[8 + ";" + 9] = 0.5;
	_g.h[8 + ";" + 13] = 0.5;
	_g.h[8 + ";" + 14] = 0.5;
	_g.h[8 + ";" + 17] = 0;
	_g.h[8 + ";" + 18] = 2;
	_g.h[9 + ";" + 2] = 2;
	_g.h[9 + ";" + 5] = 2;
	_g.h[9 + ";" + 4] = 0.5;
	_g.h[9 + ";" + 8] = 2;
	_g.h[9 + ";" + 10] = 0;
	_g.h[9 + ";" + 12] = 0.5;
	_g.h[9 + ";" + 13] = 2;
	_g.h[9 + ";" + 17] = 2;
	_g.h[10 + ";" + 5] = 0.5;
	_g.h[10 + ";" + 4] = 2;
	_g.h[10 + ";" + 7] = 2;
	_g.h[10 + ";" + 12] = 2;
	_g.h[10 + ";" + 13] = 0.5;
	_g.h[10 + ";" + 17] = 0.5;
	_g.h[11 + ";" + 7] = 2;
	_g.h[11 + ";" + 8] = 2;
	_g.h[11 + ";" + 11] = 0.5;
	_g.h[11 + ";" + 15] = 0;
	_g.h[11 + ";" + 17] = 0.5;
	_g.h[12 + ";" + 2] = 0.5;
	_g.h[12 + ";" + 4] = 2;
	_g.h[12 + ";" + 7] = 0.5;
	_g.h[12 + ";" + 8] = 0.5;
	_g.h[12 + ";" + 10] = 0.5;
	_g.h[12 + ";" + 11] = 2;
	_g.h[12 + ";" + 14] = 0.5;
	_g.h[12 + ";" + 15] = 2;
	_g.h[12 + ";" + 17] = 0.5;
	_g.h[13 + ";" + 2] = 2;
	_g.h[13 + ";" + 6] = 2;
	_g.h[13 + ";" + 7] = 0.5;
	_g.h[13 + ";" + 9] = 0.5;
	_g.h[13 + ";" + 10] = 2;
	_g.h[13 + ";" + 12] = 2;
	_g.h[13 + ";" + 17] = 0.5;
	_g.h[14 + ";" + 1] = 0;
	_g.h[14 + ";" + 11] = 2;
	_g.h[14 + ";" + 14] = 2;
	_g.h[14 + ";" + 15] = 0.5;
	_g.h[16 + ";" + 16] = 2;
	_g.h[16 + ";" + 17] = 0.5;
	_g.h[16 + ";" + 18] = 0;
	_g.h[15 + ";" + 7] = 0.5;
	_g.h[15 + ";" + 11] = 2;
	_g.h[15 + ";" + 14] = 2;
	_g.h[15 + ";" + 15] = 0.5;
	_g.h[15 + ";" + 18] = 0.5;
	_g.h[17 + ";" + 2] = 0.5;
	_g.h[17 + ";" + 3] = 0.5;
	_g.h[17 + ";" + 5] = 0.5;
	_g.h[17 + ";" + 6] = 2;
	_g.h[17 + ";" + 13] = 2;
	_g.h[17 + ";" + 17] = 0.5;
	_g.h[17 + ";" + 18] = 2;
	_g.h[18 + ";" + 2] = 0.5;
	_g.h[18 + ";" + 7] = 2;
	_g.h[18 + ";" + 8] = 0.5;
	_g.h[18 + ";" + 16] = 2;
	_g.h[18 + ";" + 15] = 2;
	_g.h[18 + ";" + 17] = 0.5;
	$r = _g;
	return $r;
}(this));
animix_$client_$js_Main.main();
})(typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
